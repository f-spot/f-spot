2006-03-18  Larry Ewing  <lewing@novell.com>

	* src/PhotoView.cs: modify the colors on style changes as well.

	* src/IconView.cs: Set the background on the gdk window as well.

2006-03-17  Larry Ewing  <lewing@novell.com>

	* src/PhotoTagMenu.cs:
	* src/TagCommands.cs
	* src/TagMenu.cs: rename TagItem to TagMenuItem so that themes
	pick it up better.  Fixes #334949.

	* src/IconView.cs: fix the drawing code to set the bg properly and
	only draw the bg if needed.

	* src/Global.cs: swap more colors.

2006-03-16  Larry Ewing  <lewing@novell.com>

	* src/Preferences.cs: add a Proxy method to 

	* src/GalleryExport.cs: Fix for #334706 based on a patch from
	Ivan N. Zlatev.

	* src/FormClient.cs: Add some credential parsing to the uri and
	fix the boundry function.

	* src/AsyncPixbufLoader.cs: Patch from Daniel Drake to fix
	#170311.

	* src/GalleryExport.cs: show an error if the scheme isn't http
	based (based on a patch from  Ivan N. Zlatev fixes #334805).
	Clean up mono.posix namespace issues.

	* src/PhotoView.cs: remove deprecated namespace for the catalog.

2006-03-15  Larry Ewing  <lewing@novell.com>

	* src/ExceptionDialog.cs: fix the resizing logic so that you
	aren't stuck with a tiny box.

	* src/FileImportBackend.cs: another patch from James Fitzsimons to
	clean up directories we are not using upon cancel.  Fixes #334584.

2006-03-13  Larry Ewing  <lewing@novell.com>

	* src/ImportCommand.cs: commit patch from James Fitzsimons to fix
	the copy setting properly.

	* configure.in: bump the version number to 0.1.11.

	* NEWS: update for 0.1.11 release.

2006-03-12  Larry Ewing  <lewing@novell.com>

	* src/ImportCommand.cs: catch import exceptions and stop stepping
	if we receive one.  Don't scan drives as ipods unless they are of
	the right (this helps speed up the initial opening).

	* src/FileImportBackend.cs: make the exceptions that we throw for
	strange cases into ImportExceptions.

	* src/ImportCommand.cs: handle settings changes while the dialog
	is still running.

	* src/ImportCommand.cs: fix the cancelation logic a bit.

	* po/POTFILES.in: add missing files.

2006-03-10  Larry Ewing  <lewing@novell.com>

	* src/ImportCommand.cs: fix accidental commit.

2006-03-08  Larry Ewing  <lewing@novell.com>

	* src/Db.cs: add an encoding string to the connection line for
	verison 2 files.  Should fix bgo #333644 and bxc #77711.

	* src/ImportCommand.cs: remove PhotoFGride from the file.

	* src/PhotoGrid.cs: new file, moving the import photogrid to it's
	own file.

	* src/ImportCommand.cs: use the camera count not the source count
	when deciding to remove the usb entry. Fixes #324752.

2006-03-07  Larry Ewing  <lewing@novell.com>

	* src/GroupSelector.cs: protect the various logic from zero
	counts. Fixes #333745.

	* src/Db.cs: add a small check to check the db version and load
	the right one.

	* src/OpenWithMenu.cs: use variable.

	* src/PhotoStore.cs: rework Aaron's description patch to fix
	importing.

2006-03-06  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: Patch from James Ftizsimons to fix #333671.

2006-03-01  Amanrpeet Singh Alam <apbrar@gmail.com>

	* configure.in: pa (Punjabi) language is added to ALL_LINGUASS

2006-03-01  Gabriel Burt <gabriel.burt@gmail.com>

	* src/MainWindow.cs: Change the tag selection button press handler
	so it's doesn't ConnectBefore the default handler, giving the popup
	the benefit of knowing what is now selected/unselected.

	* src/TagPopup.cs: Fix bugs in when the Edit/Delete/Attach/Unattach
	menu items were sensitive.

	* src/TagSelectionWidget.cs: Override the default ButtonPressEvent
	handler, calling the default handler then returning *false* instead of
	true so others can listen for the event and handle it after us.

	* src/MetaStore.cs: Add check null when loading the data column.

2006-03-01  Larry Ewing  <lewing@novell.com>

	* src/SlideView.cs: catch exceptions while loading the photo and
	return null instead.

	* src/OpenWithMenu.cs: copy the MimeApplications to work around a
	bug in the Gnome.Vfs bindings. Fixes #332949

2006-03-01  Gabriel Burt <gabriel.burt@gmail.com>

	* src/MainWindow.cs: When a new tag is created, scroll to it.

	* src/TagSelectionWidget.cs: Add ScrollTo (Tag) method. Fix the code
	that was supposed to expand any parent tags to show new tags.

	* src/ImportCommand.cs: New Tag stuff moved to TagMenu.  Select a new
	tag when it's made.

	* src/MainWindow.cs: Add New Tag option to the Attach menu. New
	handler for creating new tag and attaching it.

	* src/PhotoPopup.cs: Add New Tag option via TagMenu.

	* src/TagMenu.cs: Add property for NewTagHandler which if set causes a
	new tag option to be put into the tag menu. Fix bug in GetPosition
	method.

	* src/f-spot.in: allow both --debug and --uninstalled at the same time
	in any order.

2006-02-28  Gabriel Burt <gabriel.burt@gmail.com>

	* src/f-spot.in: add --uninstalled option.

	* src/TagCommands.cs: return the created tag instead of a bool.

	* src/TagSelectionWidget.cs: Make TagHighlight a get/set property.

	* src/MainWindow.cs: after creating a new tag, highlight it.  Use the
	new TagHighlight property.

2006-02-28  Larry Ewing  <lewing@novell.com>

	* src/JpegFile.cs: set the orientation to TopLeft when saving the
	image.  Fixes #332934

2006-02-26  Larry Ewing  <lewing@novell.com>

	* src/main.cs: use the new exception dialog.

	* src/ExceptionDialog.cs: borrow the exception dialog from banshee.

	* src/PixbufUtils.cs: fix the success logic.

	* libfspot/f-screen-utils.c (bchswSampler): fix the contrast
	function.

2006-02-25  Larry Ewing  <lewing@novell.com>

	* src/QueryView.cs: 
	* src/PhotoView.cs: handle OnPopupMenu.

	* src/PhotoPopup.cs: handle a null event.

	* src/MainWindow.cs: handle OnPopupMenu for tag selection widget.

	* src/GroupSelector.cs: add OnPopupMenu handler (doesn't work yet).

	* src/f-spot.glade: remove accidentally committed patch.

	* src/TagPopup.cs: handle a null event.

	* src/f-spot.in (EXE_TO_RUN): remove the ability to run f-spot
	without installing it.

	* src/f-spot.glade: remove focus from hidden widget. fixes #332146

	* src/PixbufUtils.cs: distinguish the the errors we might get
	while saving.

	* src/PhotoView.cs: handle exceptions in the color adjuments.

2006-02-24  Larry Ewing  <lewing@novell.com>

	* src/Tiff.cs: return an empty string not a null string.

	* src/PhotoView.cs: fix the tag view themeing.

	* src/ImportCommand.cs: commit patch from Bengt to use the Global
	home setting.  Fixes #332257

	* src/Loupe.cs: clean up the destruction handling.

	* src/SlideView.cs: attach the style to the foreign window.

	* src/Tiff.cs: if the length is zero treat it as empty.
	If the length is 0 > < 8 throw an exceptio.
	
2006-02-24  Gabriel Burt <gabriel.burt@gmail.com>

	* src/f-spot.in: If the user passes --debug, send it on to mono.

2006-02-24  Larry Ewing  <lewing@novell.com>
	
	* src/Tiff.cs: add UserComment method to extract the data.

	* src/JpegFile.cs: support unicode comments by bypassing libexif.

	* src/FlickrRemote.cs: use UrlShow.

	* src/FolderExport.cs: UrlShow does the hard work now.

	* src/Util.cs: make UrlShow () operate in the main thread.

	* src/FlickrExport.cs: pass the dialog.

2006-02-23  Gabriel Burt <gabriel.burt@gmail.com>

	* src/ImportCommand.cs: optimize loading the import dialog.

2006-02-22  Larry Ewing  <lewing@novell.com>

	* src/AsyncPixbufLoader.cs: don't print the pixbuf loader close
	exception we get sometimes if not enough data has been written,
	it is harmless.

	* src/InfoBox.cs: use the Photo.Time not the metadata time here to
	be consistant.

	* src/InfoBox.cs: update the infobox in an idle handler.

2006-02-22  Gabriel Burt <gabriel.burt@gmail.com>

	* src/MainWindow.cs: improve bengt/Larry's patch to fix #332015.
	
2006-02-21  Larry Ewing  <lewing@novell.com>

	* src/Core.cs: clean up the error message.
	
	* src/Core.cs: handle missing photos by displaying an error
	message.

	* src/MainWindow.cs: patch form bengt to fix #332015.

	* src/SlideView.cs: patch from bengt to fix #332018.

2006-02-21  Theppitak Karoonboonyanan  <thep@linux.thai.net>

	* configure.in: Added 'th' (Thai) to ALL_LINGUAS.

2006-02-21  Larry Ewing  <lewing@novell.com>

	* src/PhotoStore.cs: add a new comparer.

	* src/PhotoArray.cs: add a sort method.

	* src/MainWindow.cs: sort the collection before we pass it along.

	* src/TimeDialog.cs: remove the sort

	* src/TimeDialog.cs: fix the timezone handling so that everything
	agrees.  Fix the photo spacing command.

	* src/MainWindow.cs: reload the images if we've adjusted the
	times.

	* src/PhotoStore.cs: set the jpeg time in localtime.

	* src/InfoBox.cs: photo.Time is Utc.

	* src/JpegFile.cs: revert an accidental change.

	* src/IconView.cs: convert times to LocalTime.

	* src/Ciff.cs:
	* src/JpegFile.cs:
	* src/MrwFile.cs: comvert to UniversalTime.

	* src/Tiff.cs: convert Date to UniversalTime.  Remove cr2 date
	override.

2006-02-20  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: update tag entry when a tag is edited. fixes
	#329683
	
	* src/PreferenceDialog.cs: make sure we handle a null value.

	* src/Core.cs: add a register call back into the slideview.

	* src/PhotoImageView.cs: handle the loupe destroy case properly.

	* src/GalleryExport.cs: handle a bad gallery url. fixes #326575.
	Also avoid trying to load the accounts if they don't exist.

	* src/FlickrExport.cs: mark the message for translation.
	
2006-02-13  Gabriel Burt <gabriel.burt@gmail.com>

	* src/f-spot.glade: Change "Arranged" to "Arrange" in the View menu.
	Add Reverse Order check item to the View menu.  Change "Directory" to
	"Folder".

	* src/GroupSelector.cs: Improve upon Thomas' patch by adding the ability
	to switch from Month to Directory in the context menu, and add Reverse
	Order checkbox to the View menu.  Make the context menu reverse order
	items a checkbox too.

	* src/MainWindow.cs: Update HandleArrange handlers and add
	HandleReverseOrder function, make them public so they can be used
	by the context menu produced in GroupSelector.

2006-02-13  Thomas Van Machelen  <thomas.vanmachelen@gmail.com>
 
	* src/GroupAdaptor.cs
	* src/DirectoryAdaptor.cs
	* src/TimeAdaptor.cs: Added OrderAscending property to allow different
	sorting. Added PhotoFromIndex method.

	* src/GroupSelector.cs: Added property to retrieve current glass
	position.  Added dropdown menu to change sort order. Fixes BGO
	#321260.

	* src/MainWindow.cs: Added loading and saving of new preferences,
	remove ICON_VIEW_POSITION preference. Handle reverse order command.

	* src/Preferences.cs: Added three new preferences that store
	the active adaptor, the glass position and the sort order.

	* src/Util.cs: Add method to create dropdown menu's with check
	menu items.

	* src/f-spot.glade: Set the default adaptor button to the
	'month' button.
 
2006-02-20  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: fix #331358

	* src/SlideView.cs: clean up the creation function, make play a
	noop if there are no photos. Don't dispose null values.

	* src/Core.cs: start slideshow in idle function so that the
	AsyncLoader starts inside the mainloop.

	* tools/Makefile.am: add f-spot-import to the build.

	* tools/f-spot-import: add script to launch f-spot import based on
	hal id.  This will eventually be replaced by some hal logic in the
	app.

	* src/f-spot.glade: add cancel button to f-spot.glade fixes #324903.

2006-02-19  Larry Ewing  <lewing@novell.com>

	* src/Loupe.cs: avoid a bug in gtk# and catch null handles.

	* src/SlideView.cs: make slideview work when run standalone.

2006-02-18  Larry Ewing  <lewing@novell.com>

	* src/JpegHeader.cs: wrap streams in using statements.

	* src/ImageFile.cs: dispose the temp pixbuf properly.

	* src/PixbufUtils.cs: make AspectLoader a wrapper around
	Pixbufloader and explicitly dispose the Loader once things are
	loaded.

2006-02-17  Larry Ewing  <lewing@novell.com>

	* src/InfoBox.cs: remove debug output.

	* src/Tiff.cs: silence some debug output.

	* src/PreferenceDialog.cs: add button to set f-spot as the
	gnome-screensaver theme.  Set the optionmenu history to the
	currently selected tag.

	* src/Preferences.cs: add key for gnome-screensaver theme and
	watch gnome-screensaver theme key for changes.

	* src/TagMenu.cs: add method for getting the position of a tag.

	* src/f-spot.glade: add button clean up text.

	* src/Preferences.cs: remove invalid cast when getting default.

	* src/Core.cs: use random sort.

	* src/PhotoStore.cs: add a random sort.

	* src/FlickrRemote.cs: add quotes around tags to handle multuword
	tags better.

	* tools/Makefile.am: add screensaver wrappers for
	gnomescreensaver.

	* tools/f-spot-screensaver.desktop.in: screensaver theme wrapper.

	* configure.in: add some crufty checks to try to figure out the
	gnome-screensaver paths.
	
	* src/Core.cs: remove debug output.

	* src/JpegHeader.cs: remove debug output.

	* src/main.cs: add command line option.
	
	* src/f-spot.glade: add tag option menu.

	* src/TagStore.cs: add method to GetTagById.
	
	* src/PreferenceDialog.cs: allow the user to pick a tag for
	screensaver mode.
	
	* src/Preferences.cs: save a preference for the screensaver tag
	id.
	
	* src/Core.cs: add ShowSlides method, don't expose it over dbus
	for now.
	
	* src/SlideView.cs: Add new widget operate in foreign windows for
	screensaver mode.  Be more forgiving about slow frames, only
	disable the animation if multiple frames are slow in a row.

	* src/MainWindow.cs: remove FSpot.Mail namespace reference.

	* src/Makefile.am (F_SPOT_CSDISTFILES): remove Mail/* from the
	build, it wasn't being used anywhere.

2006-02-14  Larry Ewing  <lewing@novell.com>

	* src/PhotoArray.cs: clean up the implmentation a little.

	* src/DirectoryCollection.cs: make FileCollection a subclass of
	PhotoList since they did the same thing.

	* src/PhotoArray.cs: add missing methods from FileCollection to
	PhotoList.

	* src/SingleView.cs: combine Open and OpenFolder into a single
	function.

2006-02-14  Gabriel Burt <gabriel.burt@gmail.com>

	* src/ImportCommand.cs: Make the import source selector menu not
	trigger unless you actually activate an option.

2006-02-13  Ignacio Casal Quinteiro  <nacho.resa@gmail.com>

	* configure.in: Added 'gl' to ALL_LINGUAS.

2006-02-13  Larry Ewing  <lewing@novell.com>

	* src/SingleView.cs: destroy the chooser when done.

	* src/f-spot.glade: add open folder and new window commands.

	* src/DirectoryCollection.cs: handle setting the path with a
	little more grace.

	* src/SingleView.cs: implement HandleOpen and HandleOpenFolder.

	* src/IOChannel.cs: fix the debug condition.

	* src/DirectoryCollection.cs: use and array list rather than an
	array.

	* src/PhotoView.cs: add tips to the grayscale and sepia buttons.

	* src/f-spot.glade: remove a bunch of unused menu items.
	
	* src/MainWindow.cs: expose HandleAbout to the public.

	* src/SingleView.cs: handle about dialog.

	* src/ImportCommand.cs: clean up formatting.

	* src/f-spot.glade: give the infobox a little more room.

	* src/TagMenu.cs: don't modify the list while iterating.

	* src/VfsExport.cs: remove VfsExport.cs from the repo.

	* po/POTFILES.in: remove VfsExport.cs is is no longer valid.

	* src/MainWindow.cs: remove method that accidentally got committed.

	* src/MainWindow.cs: update the year.

2006-02-13  Gabriel Burt <gabriel.burt@gmail.com>

	* src/Updater.cs: Repair dangling tags created by removing the Other
	tag. Fix another bug in the Other tag removal code.

	* src/OpenWithMenu.cs: Add an insensitive menu item saying there are
	no applciations available as appropriate.

2006-02-13  Larry Ewing  <lewing@novell.com>

	* src/OpenWithMenu.cs: fix a couple of cases of modifying the
	container while iterating.

2006-02-12  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: don't start up the import dialog with a path selected.

	* src/Preferences.cs: add the privacy options for flickr.

	* src/FlickrExport.cs: clean up the message text for the various states, handle exceptions
	in TryWebLogin.  Store the privacy settingings in gconf.

	* src/f-spot.glade: clean up flicker export message text.

	* src/PngFile.cs: remove unused variable.

	* src/Updater.cs: fix the bug I introduced.

	* src/Updater.cs: don't remove the Other tag if it has child
	tags. Patch from Ruben Vermeersch.

	* src/PhotoVersionCommands.cs: remember to save the file before
	committing it.

	* src/PhotoVersionCommands.cs: commit Bengt's patch from #142806.

	* src/ThreadProgressDialog.cs: clamp the fraction value.

	* src/GalleryExport.cs: clean up the exception case slightly.

	* src/FlickrExport.cs: Clean up the authorization and logout code
	so that it follows the flickr model a little better.

2006-02-11  Larry Ewing  <lewing@novell.com>

	* src/f-spot.glade: add permissions to the export dialog.

	* src/FlickrExport.cs: add permissions to the dialog.
	
	* src/FlickrRemote.cs: set the permissions on the photo durring
	upload.

	* src/MetadataStore.cs: only create add keywords if there are
	some.

2006-02-10  Larry Ewing  <lewing@novell.com>

	* src/PhotoView.cs: fix crop to handle images with alpha.

	* src/ImageFile.cs: throw not implemented on calls to Save.

	* src/JpegFile.cs: use the exifData property.

	* src/PngFile.cs: fix ImageFile.Save for png.  Refactor Png to contain
	PngHeader.

	* src/PhotoStore.cs: use ImageFile.Save when saveing a version.

	* src/f-spot.in (libdir): add the FlickrNet path to the MONO_PATH
	when running the uninstalled version.

	* src/ImportCommand.cs: small cleanups.

	* src/FlickrRemote.cs: expose the Auth token to the caller.

	* src/FlickrExport.cs: start reworking the auth checking code for
	flickr.

	* src/OpenWithMenu.cs: make try to load icons if enabled.

	* src/FlickrExport.cs: hook up the metadata check.

	* src/FlickrRemote.cs: add support for striping metadata when
	exporting to flickr.

2006-02-10  Gabriel Burt <gabriel.burt@gmail.com>

	* src/TagSelectionWidget.cs: Revert back to sucky layout because
	putting all the CellRenderers in one column made it so you couldn't
	check the checkbox without having the tag selected first. Ugh.

2006-02-09  Larry Ewing  <lewing@novell.com>

	* src/f-spot.glade: set the image height so the dialog doesn't
	resize.

	* src/main.cs: create a new program before making the dbus calls.
	Something somewhere isn't getting itialized properly otherwise and
	this avoids the problem.

	* src/f-spot.in (libdir): use exec -a when lauching mono.

	* src/main.cs: set the process name using prctl based on Aaron's
	snippet.

2006-02-08  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: add a hack to suppress scrolling if the size
	change is because of a collection change.

	* src/IBrowsableItem.cs: don't reload the image if the old and new
	index are the same and valid.

	* src/Makefile.am: add f-spot-adjust-colors.png as a resource.

	* src/PhotoView.cs: add use f-spot-adjust-colors.png

	* src/StockIcons.cs: add f-spot-adjust-colors.png

	* icons/Makefile.am: add f-spot-adjust-colors.png

	* src/OpenWithMenu.cs: try to clean up the icon loading a bit.

2006-02-09  Gabriel Burt <gabriel.burt@gmail.com>

	* NEWS: added some things for the next release.

	* README: update dependency versions, remove warning.

2006-02-08  Gabriel Burt <gabriel.burt@gmail.com>

	* po/POTFILES.in: Added new file Updater.cs

	* src/Core.cs: intitialize the Db within the Core, provide static
	method for accessing the Db object.

	* src/Db.cs: Add MetaStore property and run the Database.Updater upon
	initialization.
	
	* src/Makefile.am: Add Updater.cs and MetaStore.cs

	* src/MetaStore.cs: Add new database table that is just a key/value
	hash that keeps track of things like what tag id corresponds to the
	Hidden tag, and what version of the database and F-Spot produced the
	database.

	* src/ProgressDialog.cs: Add option for no cancel button, give access
	to the progress bar and message label via properties

	* src/TagStore.cs: Translate default tag names (BGO #170545), utilize
	MetaStore for keeping track of the Hidden tag instead of string
	matching. Remove the silly 'Other' tag.

	* src/Updater.cs: New file, upon start up checks if the database is
	the most current version, and if not it updates it (BGO #329146). The
	only update it currently does is remove empty 'Other' tags.
	
	* src/main.cs: Move the Db initialization code into Core.cs

2006-02-08  Gabriel Burt <gabriel.burt@gmail.com>

	* src/TagSelectionWidget.cs: Put the checkbox, icon, and name into a
	single column so that all tag names, even when in different
	hierarchies, aren't aligned.  Makes the Tag list much nicer. Fixes
	BGO #329401.

2006-02-08  Gabriel Burt <gabriel.burt@gmail.com>

	* po/POTFILES.in: Add OpenWithMenu.cs and VfsExport.cs

	* src/MainWindow.cs: Add handler for 'open with' command that takes
	the MimeApplication and opens it with the selected photos, making
	copies of them first if desired.

	* src/Makefile.am: Add OpenWithMenu.cs

	* src/OpenWithMenu.cs: New file that creates the submenu of an Open
	With menu, filling it with the applications appropriate to a
	combination of mimetypes passed in.  All Open With code based
	on a patch by Loz (gnome2@flower.powernet.co.uk).

	* src/PhotoPopup.cs: Add 'Open With' menu to the photo popup menu (BGO
	#156506).

	* src/PhotoStore.cs: New create new version method.

2006-02-05  Larry Ewing  <lewing@novell.com>

	* src/Preferences.cs: add flickr token path.

	* Makefile.am: add FlickrNet to the build.

	* configure.in: add FlickrNet to the build.

	* src/f-spot.glade: change dialog for flickr.net.

	* src/FlickrExport.cs: Update to use flickr.net (based on a patch from acs)

	* src/FlickrRemote.cs: Update to user flickr.net (based on a patch from acs).

	* FlickrNet/*: import Flickr.Net into the build.

	* f-spot-view.desktop.in (MimeType): add new mime types for the
	raw files.

2006-01-31  Larry Ewing  <lewing@novell.com>

	* src/PhotoView.cs: set the background on the TagView.

2006-01-30  Larry Ewing  <lewing@novell.com>

	* icons/Makefile.am (noinst_DATA): add f-spot-new-icon.png.

	* configure.in: bump version number for release.

	* src/PhotoArray.cs: fill in some missing methods.

	* src/DirectoryCollection.cs: add missing methods.

	* src/IOChannel.cs: dump unexpected status states to the console
	for now.

	* src/PhotoView.cs: remove unused variable.

	* src/JpegFile.cs: make sure the entry exists before trying to set
	it.

	* src/f-spot.glade: fix up the time dialog give the time menu item
	a name.

	* src/MainWindow.cs: set the adjust_time menu item sensitivity
	based on the selection.

	* src/TimeDialog.cs: fix the interval option and make the offset
	entry do something.  TimeSpan parsing still seems to be a mess.
	Hide the action frame if onlt one photo is selectd (should these
	just be insensive?)

2006-01-28  Larry Ewing  <lewing@novell.com>

	* src/f-spot.glade: revert accidental change to f-spot.glade.

2006-01-28  Evandro Fernandes Giovanini <evandrofg@ig.com.br>

	* configure.in(ALL_LINGUAS): Added pt_BR (Brazilian Portuguese).

2006-01-28  Jakub Steiner <jimmac@ximian.com>

	* icons/f-spot-adjust-colors.png
	* icons/f-spot-crop.png
	* icons/f-spot-desaturate.png
	* icons/f-spot-new-tag.png
	* icons/f-spot-red-eye.png
	* icons/f-spot-sepia.png: the bottom toolbar is actually needing
		20x20px icons :/

	* icons/f-spot-question-mark.png: make this look less nasty.
	
2006-01-28  Jakub Steiner <jimmac@ximian.com>

	* icons/f-spot-browse.png
	* icons/f-spot-camera.png
	* icons/f-spot-crop.png
	* icons/f-spot-desaturate.png
	* icons/f-spot-edit-image.png
	* icons/f-spot-favorite.png
	* icons/f-spot-fullscreen.png
	* icons/f-spot-hidden.png
	* icons/f-spot-loading.png
	* icons/f-spot-new-tag.png
	* icons/f-spot-people.png
	* icons/f-spot-places.png
	* icons/f-spot-red-eye.png
	* icons/f-spot-sepia.png
	* icons/f-spot-slideshow.png: start applying tango style. make the
	effect icons more distinct

	* icons/f-spot-adjust-colors.png: this will be better for color
	adjust action instead of edit-image, please use.

2006-01-23  Gabriel Burt  <gabriel.burt@gmail.com>

	* icons/f-spot-new-tag.png:
	* src/Makefile.am:
	* src/StockIcons.cs: add new-tag icon.
	
	* src/ImportCommand.cs: Add a 'Create New Tag' option to the list of
	tags in the import dialog. Based on patch from Pasi Savolainen,
	psavo@iki.fi.

2006-01-23  Larry Ewing  <lewing@novell.com>

	* src/PhotoStore.cs: commit the photo time when updating the photo.

	* src/MetadataStore.cs: redo the logic.

	* src/PhotoStore.cs: call update instead of add.

	* src/XmpFile.cs: expose the store.

	* src/MetadataStore.cs: implement an update call that fixes up the
	list.

2006-01-22  Larry Ewing  <lewing@novell.com>

	* src/PngFile.cs: stop using makesafetemp for now.

	* src/JpegHeader.cs: add GetXmp method.

	* src/PhotoStore.cs: clean up the Xmp updating slightly, handle
	the png write support (this still needs massive refactoring).

	* src/PngFile.cs: fix write support for png files.

2006-01-22  Gabriel Burt  <gabriel.burt@gmail.com>

	* src/Db.cs:
	* src/ImportStore.cs:
	* src/PhotoStore.cs: Use long instead of uint for Unix dates to
	support dates before 1970. Patch by Fredrik Noring, noring@nocrew.org,
	and updated by Curtis Hovey.

2006-01-21  Gabriel Burt  <gabriel.burt@gmail.com>

	* f-spot.desktop.in.in:
	* f-spot-viewer.desktop.in: Add GNOME;GTK to Categories

2006-01-20  Larry Ewing  <lewing@novell.com>

	* src/PngFile.cs: clean up the Crc class for writing.

	* src/InfoDisplay.cs: add InfoDialog.

	* src/SingleView.cs: allow InfoDialogs for single views (these
	should really be in the side pane).

	* src/f-spot.glade: add menu entries for viewing metadata.

2005-01-18  Gabriel Burt  <gabriel.burt@gmail.com>

	* src/SingleView.cs: remember last size, maximized state, and toolbar
	visibility.
	
	* src/Preferences.cs: add strings for new preferences.

2005-01-16  Gabriel Burt  <gabriel.burt@gmail.com>

	* src/MainWindow.cs: Make rotate toolbar buttons sensitive to whether
	there are photo(s) selected.  Add tooltips to all toolbar buttons.
	
	* src/PhotoView.cs: Make redeye/crop buttons display tooltip that
	tells the user to first select an area on the photo if no selection
	has been made. Fix bug with the description_entry tooltip. Add label
	"Comment:" before the description entry.

	* src/TagSelectionWidget.cs: Fix bug that caused tree not to expand
	if the child added was the parent's first. Also, instead of refreshing
	and losing expansions when the TagSelection changes, simply queue a
	redraw.
	
	* src/f-spot.glade: Make the icon button in the edit tag dialog have
	normal relief so it's obvious it can be clicked, and add a tooltip.
	
	* src/MainWindow.cs:
	* src/IptcFile.cs: Fix typos caught by Clytie Siddall (#325578).

2006-01-16  Larry Ewing  <lewing@novell.com>

	* src/f-spot.glade: remove stray can default setting that was
	triggering a critical warning.

	* src/ColorDialog.cs: fix the contrast setting.

	* src/StockIcons.cs: add new icons.
	
	* src/PhotoView.cs: add desaturate button and sepia button.

	* src/ColorDialog.cs: add sepia and desaturate buttons.

	* src/Makefile.am: add new icons to resources.

	* src/IOChannel.cs: revert warning change.

	* src/MainWindow.cs: silence warning.

	* src/IOChannel.cs: get rid of some warnings.

	* libfspot/f-pixbuf-unsharp.c: add start of an unsharp mask for
	the l channel.

	* src/Tiff.cs: remove some of the debug output.

	* configure.in: bump the version number.

	* src/main.cs: add some --help output.

2006-01-15  Larry Ewing  <lewing@novell.com>

	* src/f-spot.glade: hide metadata export options until they
	actually do something.  Clean up the time dialog slightly.

	* src/TagSelectionWidget.cs: clean up a couple of calls that poked
	the mainwindow for no reason.

	* configure.in: bump the required versions for gtk-sharp and gtk.

2006-01-14  Larry Ewing  <lewing@novell.com>

	* src/PhotoStore.cs: don't start a transaction for single item
	commits.

2006-01-13  Larry Ewing  <lewing@novell.com>

	* src/ImportCommand.cs: fix typo.

	* src/RotateCommand.cs: use rename where appropriate.

	* src/JpegFile.cs: set the time on DateTimeOriginal.

	* src/MainWindow.cs: update TimeDialog construction.

	* src/f-spot.glade: update with new names and widgets.

	* src/PhotoStore.cs: add a new commit method that lets one pass
	the args (this should move to the opration interface).

	* src/Db.cs: add transactions to the stores (this is probably not
	a good idea).

	* src/TimeDialog.cs: make the dialog do something.  Account for
	the brokeness in Gnome.DateEdit.

	* src/PhotoImageView.cs: fix argument checking.

2006-01-11  Larry Ewing  <lewing@novell.com>

	* src/f-spot.glade: clean up the FolderExport dialog a bit.

	* src/FolderExport.cs: fix Original comment file names.

	* src/FolderExport.cs: turn on remote source browsing, exporting
	to remote folders works now.

	* src/MainWindow.cs: create a new collection when passing it to
	the time dialog.

	* src/FolderExport.cs: use FileChooserButton rather than a simple
	entry to pick a folder.

	* src/f-spot.glade: remove the uri_entry from the FolderExport
	dialog, update the Time dialog.

	* src/TimeDialog.cs: update the time dialog.
	
	* src/FolderExport.cs: call show in the main thread, the command
	likes to make gtk calls.

2006-01-11  Frank Arnold  <farnold@cvs.gnome.org>

	* configure.in: Added "vi" to ALL_LINGUAS

2006-01-11  Larry Ewing  <lewing@novell.com>

	* src/IOChannel.cs: remove debug output.

	* src/MainWindow.cs: add the new dialog.

	* src/f-spot.glade: add the new dialog.

	* Makefile.am: add TimeDialog.cs.

	* src/TimeDialog.cs: update the time dialog.

2006-01-10  Larry Ewing  <lewing@novell.com>

	* src/TimeDialog.cs: start time dialog.

	* src/Tiff.cs: use the default ImageFile implmentation for sized
	loading.

	* src/ImageFile.cs: use the aspect loader on PixbufStream in the
	default Load (int, int) implementation.

	* src/PixbufUtils.cs: make the aspect loader load from streams
	also.

2006-01-09  Larry Ewing  <lewing@novell.com>

	* src/Tiff.cs: fixup the dng metadata loading.

	* src/TagSelectionWidget.cs: disable the background color for categories.

	* src/Tiff.cs: use embedded jpegs to speed up the dng display.
	
	* src/Tiff.cs: Cleanup some of the output, convert
	ComponentsConfiguration to xmp.

	* src/PhotoView.cs: remove the explicit call to
	WriteMetadataToImage, let the commit update it.

	* src/Unix.cs: remove the errno stuff, the namespace changed in
	recent mono versions and we weren't using it anyway.

	* src/MainWindow.cs: sync the photo metadata using the
	ItemsChanged event on the store, not by hand.

2006-01-08  Larry Ewing  <lewing@novell.com>
Ti
	* src/Tiff.cs: Load ifd0 for the fastpath.

	* src/Scanning.cs: update the bindings a bit.

	* src/AsyncPixbufLoader.cs: tweak some values.

	* libeog/image-view.c (apply_brightness_and_contrast): increase
	the max zoom.

	* src/ImageView.cs: increase the max zoom.

	* src/ColorDialog.cs: fix the contrast defaults

	* src/f-spot.glade: show the constrast again.

	* libfspot/f-screen-utils.c (bchswSampler): add a contrast
	function.

2006-01-06  Larry Ewing  <lewing@novell.com>

	* src/FolderExport.cs: the comment file name, part of a patch from
	Scott Jones.

2006-01-05  Larry Ewing  <lewing@novell.com>

	* src/ColorDialog.cs: redraw the window when the dialog is
	canceled.

	* src/MrwFile.cs: remove some of the debug output.

	* src/DCRawFile.cs: close stdin when opening the pipe.

	* src/IOChannel.cs: unref the handle when we close.

	* src/AsyncPixbufLoader.cs: close the stream if we are done with
	it. Shorten the delay. switch to the old read method.

	* src/Makefile.am (F_SPOT_CSDISTFILES): add InternalProcess and
	IOChannel to the build.

	* src/IOChannel.cs: wrap the watch stuff and use it for polling.

	* src/AsyncPixbufLoader.cs: use IOChannel.DataReady.

	* src/DCRawFile.cs: use InternalProcess.

	* src/IOChannel.cs: debug iochannel binding.

	* src/InternalProcess.cs: fix up g_spawn binding.

2006-01-04  Larry Ewing  <lewing@novell.com>

	* src/InternalProcess.cs: add gspawn binding.

	* src/IOChannel.cs: add iochannel binding.

2006-01-03  Larry Ewing  <lewing@novell.com>

	* src/Makefile.am (F_SPOT_CSDISTFILES): add X3fFile.cs

	* src/Ciff.cs: throw ImageFormatException.

	* src/ImageFile.cs: add foveon.  Andd new exception type.

	* src/X3fFile.cs: add X3f parser to the build.

2005-12-26  Larry Ewing  <lewing@novell.com>

	* src/AsyncPixbufLoader.cs: move back to the old loader until the
	loading bug has been resolved.

2005-12-24  Larry Ewing  <lewing@novell.com>

	* src/AsyncPixbufLoader.cs: move more completely to the async
	interface.

	* src/Scanning.cs: bind more of the interface.

	* src/FolderExport.cs: use a higher quality setting.  This should
	actually probably be tunable.

	* src/TipWindow.cs: set the name to "gtk-tooltips" so we can pick
	up more of the style settings.

	* src/DCRawFile.cs: make the stream disposable.

	* src/Loupe.cs: rework the style of the sharpen call.

2005-12-20  Alexandre Prokoudine  <alexandre.prokoudine@gmail.com>

	* src/f-spot.glade: add mnemonics and fix some capitalization errors.

2005-12-20  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: mark string as plural.

2005-12-20  Gabriel Burt  <gabriel.burt@gmail.com>

	* src/TagView.cs: prevent infinite loop.

2005-12-18  Gabriel Burt  <gabriel.burt@gmail.com>

	* src/Db.cs: add methods for starting, committing, and rolling
	back transactions.
	
	* src/GroupSelector.cs: Add tooltips to > and < buttons

	* src/MainWindow.cs: Keep find_untagged menu item in sync with the
	status of the query. Wrap attaching and unattaching tags to photos
	in transactions for big speedup. Provide static method for adding
	tooltips to widgets. Fix bugs in merging tags and popup the edit tag
	dialog on the surviving tag.
	
	* src/PhotoQuery.cs: Don't clear ranges when finding untagged photos.
	
	* src/PhotoStore.cs: Allow date range in find untagged query.
	
	* src/PhotoView.cs:
	* src/QueryDisplay.cs: Wrap TagView in EventBox for tooltips.
	
	* src/TagCommands.cs: Make text entry labels header case.
	
	* src/TagStore.cs: Add method for adding all the descendents of a
	category to an ArrayList.  Fix TagRemoveComparer logic.
	
	* src/TagView.cs: Set the parent EventBox's tooltip.
	
	* src/TimeAdaptor.cs: Separate SetLimits function for future use.
	
	* src/f-spot.glade: Add tooltips to zoom images and slider, import +
	button, make Find Untagged a CheckMenuItem.
	
	* src/GroupSelector.cs: Make the 'more' tooltips correct for
	different Adaptors.

2005-12-16  Gabriel Burt  <gabriel.burt@gmail.com>

	* src/ImageView.cs: remove debug output.
	
	* src/InfoBox.cs: prevent display glitch where options in versions
	menu would appear gray.
	
	* src/PhotoVersionMenu.cs: change version options from CheckMenuItems
	to normal MenuItems, remove old cruft code, don't signal a versionId
	change if the current version is reselected.
	
	* src/TagMenu.cs: missed a underscore replacement, styled the code.

2005-12-16  Larry Ewing  <lewing@novell.com>

	* src/AsyncPixbufLoader.cs: clean up the debug output tweak the
	timing.

2005-12-16  Gabriel Burt  <gabriel.burt@gmail.com>

	* src/InfoBox.cs: make file name entry not editable and make the
	version menu popup to the full width of the menu.
	
	* src/MainWindow.cs:
	* src/TagCommands.cs:
	* src/TagMenu.cs:
	* src/TagPopup.cs: make tag/file names with _'s display correctly.
	
	* f-spot-view.desktop.in: change title to "F-Spot Photo Viewer"

2005-12-15  Larry Ewing  <lewing@novell.com>

	* src/AsyncPixbufLoader.cs: make our own async io wrapper since
	the default on for mono doesn't work.  Add some hacks to avoid
	canceling running io but instead just flip to the next read.  Need
	massive cleanup. 

	* src/Tiff.cs: use RawPixbufStream.

	* src/DCRawFile.cs: move the command name up.

	* src/MrwFile.cs: use RawPixbufStream.

	* src/Ciff.cs: fallback to RawPixbufStream.

	* src/RafFile.cs: fallback to the RawPixbufStream.

	* src/AsyncPixbufLoader.cs: disable the thumbnail hack.

	* src/AsyncPixbufLoader.cs: handle more of the magic internally so
	we can be smarterer about it.

	* src/PhotoImageView.cs: move a bunch of the loading hacks into
	the async loader.

	* src/DCRawFile.cs: don't let dcraw flip the image, we'll do it.
	
	* src/DCRawFile.cs: wrap the output stream with a wrapper to keep
	it from being disposed prematurely.  Add a new method to provide a
	stream.

2005-12-12  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: Mark the selection changed when the view mode
	changes.

2005-12-09  Gabriel Burt  <gabriel.burt@gmail.com>

	* src/MainWindow.cs: Update the sensitivity of the zoom menu items
	when the zoom changes.

	* src/SingleView.cs: Start syncing zoom state to menu items.
	
2005-12-11  Larry Ewing  <lewing@novell.com>

	* src/FolderExport.cs: fix up the comment files for the original
	export.

	* src/f-spot.glade: rename the preferences buttons so the dialog
	can show up again.

	* src/GalleryExport.cs: Patch from Ben Monnahan to allow and empty
	desctiption when creating a gallery and to select a newly created
	gallery by default.

2005-12-09  Gabriel Burt  <gabriel.burt@gmail.com>
	
	* libeog/image-view.c
	* libeog/image-view.h: Add function to recompute the minimum zoom

	* src/IconView.cs: Change zoom factor, automatically scale the dynamic
	zoom range into 0.0 - 1.0 range, add ZoomChanged event, add ZoomIn and
	ZoomOut methods. Added ctrl-mouse-wheel zooming from Pasi Savolainen,
	psavo@iki.fi.

	* src/ImageView.cs: Add method to update minimum zoom for when a new
	pixbuf is loaded.

	* src/MainWindow.cs: Move details of zooming in/out to the IconView
	and PhotoView classes, keep the zoom_scale in sync with the current
	zoom level.

	* src/PhotoImageView.cs: Handle the details of zooming in/out,
	providing ZoomIn/ZoomOut methods, and update the minimum zoom when
	appropriate.  Fix bug that caused arrow keys to always go to
	next/previous photo even if zoomed in (when they should pan).

	* src/PhotoView.cs: Pass on zoom commands to the PhotoImageView

	* src/Preferences.cs: Remove THUMBNAIL_SIZE preference, add ZOOM

	* src/SingleView.cs: Make zooming work with above changes, add
	handlers for zooming via the menu and keybindings.

	* src/f-spot.glade: Remove the Size menu, make the near/far images
	surrounding the zoom_scale clickable, rearrange the order of the View
	menu for the SingleView mode and add Zoom In/Out commands to it.
	
	* src/MainWindow.cs: Organize menu widgets, make zoom items not
	sensitive as appropriate, fix bug where menu items not updated
	properly when switching between Edit/Browse mode.
	
	* src/SingleView.cs: Variables for zoom items to be able to make
	them not sensitive as appropriate.

2005-12-09  Larry Ewing  <lewing@novell.com>

	* src/GalleryExport.cs:
	* src/GalleryRemote.cs:
	* src/f-spot.glade: Patch from Ben Monnahan to improve the gallery
	export code to handle Gallery versions 1 and 2.  With a patch from
	Ruben Vermeersch to add the ability to create albums from the
	export dailog.

	* po/ru.po: add ru.po from Alexandre Prokoudine to the build.

	* configure.in: added ru.po to ALL_LINGUAS.

	* libfspot/f-image-view.c: patch from Diego Gonzolez to avoid a
	crash when applying selection constrants to an empty image view.

2005-12-08  Larry Ewing  <lewing@novell.com>

	* src/PhotoImageView.cs: remove redundant functions.
	
	* src/IBrowsableItem.cs: rework the changed event to pass the
	previous item and the previous index.  Listen to the ItemChanged
	even on the collection and fire the changed event if it matches.

2005-12-08  Gabriel Burt  <gabriel.burt@gmail.com>

	* src/TagCommands.cs:
	* src/TagSelectionWidget.cs: Allow editing the case of a tag's name

2005-12-08  Larry Ewing  <lewing@novell.com>

	* src/PhotoImageView.cs: enable a feature.

	* src/IBrowsableItem.cs: add a couple of helper methods.

	* src/Scanning.cs: start stubbing in Sane interface.

	* src/PhotoStore.cs: remove unused code.

	* src/Global.cs: allow global setting for profile.
	
	* src/PreferenceDialog.cs: start filling in the profile
	information.
	
	* src/Cms.cs: rename to AlternateRgb for now.
	
	* src/Tiff.cs: use renamed method.

2005-12-08  Gabriel Burt  <gabriel.burt@gmail.com>

	* NEWS: added some things for the 0.1.4 release.

2005-12-07  Larry Ewing  <lewing@novell.com>

	* src/f-spot.glade: hide some used widgets for release.

2005-12-06  Larry Ewing  <lewing@novell.com>

	* src/Tiff.cs: Match what the encoder does.

	* src/Exif.cs: fix the logic when setting values.

	* src/JpegFile.cs: fix the coputed length of the comment.

	* src/Db.cs: move comment.

	* src/TagStore.cs: remove the old signals.

	* src/TagSelectionWidget.cs: use the db store signals not the
	higher level ones.

2005-12-05  Larry Ewing  <lewing@novell.com>

	* src/PhotoQuery.cs:
	* src/IBrowsableItem.cs: 
	* src/IconView.cs:
	* src/MainWindow.cs:
	* src/PhotoArray.cs:
	* src/PhotoImageView.cs:
	* src/PhotoQuery.cs:
	* src/DirectoryCollection.cs: Change the parameters of the
	ItemsChanged event in the BrowsableCollection so that it passes
	the arguments in and Args object that contains an array.  The goal
	is to use this to pass a reason along in the args eventually.
	
	* configure.in: drop the mono required version.

	* src/Makefile.am: add the cairo files to the build.

	* src/Cairo/: add the Cairo binding from mono-1.1.10 to the build
	so we don't need to require that version.
	
	* src/MainWindow.cs: remove extra calls to UpdateTagEntryFromSelection.

	* src/TagSelectionWidget.cs: use Window instead of GtkWindow.

	* src/main.cs: change the dbus error message to a non error
	sounding report.

	* src/MainWindow.cs: expose the Selection to the public. Do a
	little more house keeping.
	
	* src/IconView.cs: don't do anything if the changed item isn't in
	the selection.

	* src/MainWindow.cs: use the selection object in a couple more
	places.
	
	* src/MainWindow.cs: Unify the selection interface.  Clean up some
	of the change notification.  Avoid calculating some things if they
	are hidden.

	* src/PhotoStore.cs: add IBrowsableItem wrapper for versions.

	* src/SingleView.cs: fixup Direction name.

	* src/MainWindow.cs: fixup Direction name.

	* configure.in: bump mono required version to 1.1.10 to pick up
	cairo.

	* src/Makefile.am: add the mail commands and the Loupe to the
	build.

	* src/RotateCommand.cs: refactor to split out the rotations into
	operations.
	
	* src/PhotoStore.cs: fix typo.

	* src/Operation.cs: add new file.

2005-12-04  Gabriel Burt <gabriel.burt@gmail.com>

	* src/MainWindow.cs: Add handler for finding untagged photos.
	
	* src/PhotoQuery.cs: Add gettable Untagged property that initiates
	a search for untagged photos.
	
	* src/PhotoStore.cs: Add method to search for untagged photos.
	
	* src/f-spot.glade: Add menu item to find untagged photos.
	
	* src/TagSelectionWidget.cs: Prevent strange crasher when returning
	empty Tag array.
	
	* f-spot.desktop.in.in: Change title and tooltip to be more
	informative.
	
	* src/QueryDisplay.cs: Add label for when finding untagged photos
	
	* src/PhotoQuery.cs: Make finding untagged mutually exclusive of
	setting a range or tag selection.
	
	* src/MainWindow.cs: Modify tag context menu to appear even if
	activated not over a tag.
	
	* src/TagPopup.cs: Create context menu aware that might not be over a
	tag, so disable some options as needed.
	
	* src/Util.cs: Check if the callback arg is null before using it.

2005-12-03  Gabriel Burt <gabriel.burt@gmail.com>

	* src/PhotoImageView.cs: Added more keybindings for going to the next
	and previous photos, including left/right/up/down keys, and KP_ keys.

2005-12-03  Larry Ewing  <lewing@novell.com>

	* src/main.cs: change the message to sound more possitive.

	* src/Db.cs: add some emit overloads.

	* src/PhotoStore.cs: emit change notifications when a photo is
	modified.

	* src/Db.cs: add basic notification signals to DbStore.

	* src/TagStore.cs: refactor the event to piggyback on the DbStore
	events (for now).

2005-12-02  Aaron Bockover  <aaron@aaronbock.net>

	* src/PhotoStore.cs (Create): Accept a new/destination path and an
	orignal/source path; create the file based on the original path and
	perform all other actions based on the new path; this forces metadata
	parsing to be done on the original path, meaning mtime will be used from
	the orginal and not the copy as date/time in case the photo lacks
	EXIF date/time information

	* src/FileImportBackend.cs (Step): if photo is to be copied and imported, 
	pass both the original and the new path to PhotoStore.Create
	
	* src/ImportCommand.cs: Added two overloaded ImportFromPaths methods that
	will preserve existing calls but also allow a 'copy' boolean to be passed;
	for preserved calls, the default copy value is false

	* src/MainWindow.cs: Added a 'copy' parameter to ImportUriList; set
	copy option to true if DnD drag action contains the DragAction.Copy flag

	* src/ImportCommand.cs (DoImport):  guard against a NullReferenceException
	before setting progress_bar.Text; if the import was invoked from DnD,
	progress_bar won't exist

2005-12-02  Larry Ewing  <lewing@novell.com>

	* src/MailDialog.cs: start new dialog to use the smtp transport
	logic.

	* configure.in: update the version checks bump the package
	version.

	* src/ColorDialog.cs: fix the default brightness value.

	* src/Loupe.cs: make it build with mono 1.1.10 class libraries.

	* src/Mail/*: import then modify the mono SmtpMail and
	support classes allow AUTH LOGIN and use ssl.

2005-11-30  Gabriel Burt <gabriel.burt@gmail.com>

	* src/f-spot.glade and many others: Change 'image' to 'photo', apply HIG
	guidelines for capitalization, reword some labels. Many changes based
	on patch from Alexandre Prokoudine, alexandre.prokoudine@gmail.com
	
	* src/ImportCommand.cs: Change progress bar text to "Loading x of N"
	and to "Done Loading" when done. Fix off-by-one error.

	* src/f-spot.glade: Change "Finish Importing" to "Import" and make it
	translatable.

2005-12-01  Larry Ewing  <lewing@novell.com>

	* src/ColorDialog.cs: clean up adjusment values slightly

	* src/Cms.cs: make brightness do something sane.

2005-11-30  Gabriel Burt <gabriel.burt@gmail.com>

	* src/TagSelectionWidget.cs: don't crash if there are zero tags.

2005-11-30  Daniel Svensson <daniel@nittionio.nu>

	* src/MainWindow.cs: Don't show tag context menu unless over a tag,
	prevents crasher, fixes bug #322290.

2005-11-30  Gabriel Burt <gabriel.burt@gmail.com>

	* src/TagCommands.cs: added ability to create tags and categories
	with toplevel as the parent. Fixes bug #165035.

	* src/TagSelectionWidget.cs: changes for same fix.
	
	* src/TagStore.cs: make root tag name translatable.

	* po/POTFILES.in: add TagStore.cs
	
	* src/MainWindow.cs: new tags in the type-to-find bar are created as
	Category not Tag objects so they can have children.
	
2005-11-30  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: show the prefernce dialog.

	* src/f-spot.glade: hook up more signals.
	
	* src/PreferenceDialog.cs: handle close and show with a little
	more sanity.

	* src/f-spot.glade: add the start of the new dialog.

	* src/PreferenceDialog.cs: get and set the metadata preference.

	* src/Preferences.cs: add metadata option.

	* src/Makefile.am: add PreferenceDialog.cs.

2005-11-30  Gabriel Burt <gabriel.burt@gmail.com>

	* src/MainWindow.cs: When in browse or edit mode, clicking the toggle
	icon again should not unselect the toggle. Based on patch by John
	Russell, jjrussell@gmail.com

2005-11-30  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: set the write metadata flag based on a gconf
	key.

	* src/Preferences.cs: add metadata preference.

	* src/PixbufUtils.cs: update the adjustment dialog calls.

	* src/f-spot.glade: rework the adjustment dialog.  Add reset
	functions.
	
	* src/ColorDialog.cs: change the sliders and color correction
	functions.

	* src/Cms.cs: add new color types. Change the abstract profile
	logic.
	
	* libfspot/f-screen-utils.c (f_cmsCreateBCHSWabstractProfile):
	adjust the equations for the exposure correction.

2005-11-29  Larry Ewing  <lewing@novell.com>

	* src/Histogram.cs: small cleanups.

2005-11-29  Gabriel Burt  <gabriel.burt@gmail.com>

	* src/f-spot.glade: Allow closing F-Spot with ctrl-q.

	* src/MainWindow.cs: change references to categories to tags because
	user's never need to make tags that can't have children and having
	tags and categories is a very confusing thing.
	
	* src/TagCommands.cs: change references to Category to Tag

	* src/TagPopup.cs: Allow only creation of new 'tags' which are what
	used to be called categories.
	
	* src/f-spot.glade: Remove menu items referring to categories

	* src/TagSelectionWidget.cs: Save and restore which tags are expanded.

	* src/MainWindow.cs: Call the TagSelectionWidget save command on exit.

	* src/Preferences.cs: Added key string for expanded tags preference.

	* src/MainWindow.cs: listen for F2 to start editing a tag's name.
	
	* src/TagCommands.cs: do case-insenstive matching to prevent duplicate tags.
	
	* src/TagSelectionWidget.cs: Make tag names editable inline
	
2005-11-24  Miguel de Icaza  <miguel@novell.com>

	* src/MainWindow.cs: Do not crash if there is an error deleting
	the file, report a cute error to the user.

2005-11-21  Larry Ewing  <lewing@novell.com>

	* src/Histogram.cs: speed up the analysis and drawing slightly.

	* libfspot/f-screen-utils.cs: remove unused param.

	* src/Cms.cs: remove unused param.

	* src/ColorDialog.cs: fix up the destination profile so that is
	actually something.  clean up the changed logic slightly.

	* src/f-spot.glade: set the limits to more appropriate values.

	* src/Cms.cs: use the new abstrct profile creation function.

	* libfspot/f-screen-utils.c (f_cmsCreateBCHSWabstractProfile):
	new abstract profile creation function.

2005-11-18  Larry Ewing  <lewing@novell.com>

	* src/Exif.cs: remove unsed stubs.

	* src/ColorDialog.cs: calculate the change state rather than
	storing it.

	* src/ExifUtil.cs: remove file.

	* src/Makefile.am (F_SPOT_CSDISTFILES): rmove ExifUtils from the
	build it is no longer used.

	* src/PngFile.cs: increase the number of entries in the gamma
	table.

	* src/IconView.cs: optimize the change notification slightly.

2005-11-11  Gabriel Burt  <gabriel.burt@gmail.com>
 
 	* src/IconView.cs: Better image selection with shift and ctrl keys.
 
2005-11-17  Larry Ewing  <lewing@novell.com>

	* src/Loupe.cs: clean up calculation functions start cleaning up
	rotation and movement.

	* src/Cms.cs: add more profile introspection functions. Add
	ColorCIEZYZ and add wrapper for gray profile creation.

2005-11-15  Nat Friedman  <nat@novell.com>

	* src/MainWindow.cs: Update the tag entry when the user drags tags
	onto the photo view.  With tag typing, correct for capitalization
	differences in the retrieved tag and what the user typed.
	

2005-11-14  Larry Ewing  <lewing@novell.com>

	* src/Cms.cs: expose the colorant retrieval bits of lcms.

	* src/MainWindow.cs: remove unused variable.

	* src/MrwFile.cs: use DirectoryEntry not ascii entry.

	* src/ColorDialog.cs: reset the transform when the dialog is closed.

	* src/Tiff.cs: read the Gamma value from the exif info (where is
	this tag actually defined?).  Remove AsciiEntry as a type.

	* src/Cms.cs: add a profile for adobe rgb.

2005-11-13  Larry Ewing  <lewing@novell.com>

	* src/Cms.cs: clean up the handle array creation code.

	* src/PhotoView.cs: remove unused variable.

	* src/MainWindow.cs: hook to the ZoomChanged event and update the
	zoom scale from it.

2005-11-11  Larry Ewing  <lewing@novell.com>

	* src/ImageView.cs: wrap the zoom-changed signal.

	* src/SingleView.cs: hook up the zoom slider.

	* src/MainWindow.cs: small optimizations.  Start converting the
	selection to a collection.

	* src/Loupe.cs: move some of the internal settings to properties.

	* src/f-spot.glade: add copy option.

	* src/ImportCommand.cs: add copy option to the import dialog.

2005-11-10  Larry Ewing  <lewing@novell.com>

	* src/PhotoView.cs: remove unused variable.

2005-11-10  Nat Friedman  <nat@novell.com>

	* src/MainWindow.cs: Added support for creating and applying tags
	by typing them into a tagbar entry.  Added support for merging
	tags.  Support for multiselection operations in the tag sidebar.
	Handle photo deleting in the icon and photo views by catching the
	keypress in the icon and photo view widgets, not as a menu
	accelerator.  Pressing delete in the tag treeview will now delete
	the selected tags.  Fixed several bugs.

	* src/TagPopup.cs: Added support for merging tags.  Added support
	for multiselection tag actions.

	* src/TagSelectionWidget.cs: Handle top-level tag creation.

	* src/Db.cs: Made the item_cache protected so the TagStore
	subclass can access it.

	* src/TagStore.cs: Added GetTagByName and GetTagByNameStart, both
	of which are case-insensitive.

	* src/f-spot.glade: Remove the Delete accelerator for deleting
	photos.  Add the tag typing bar.

2005-11-08  Larry Ewing  <lewing@novell.com>

	* src/Loupe.cs: queue a resize iff the dimensions have changed so that the
	mask gets updated.

	* src/Loupe.cs: do something sane in the shape extension case.

	* src/Loupe.cs: draw the loupe normally when the there is no overlay.

	* src/Loupe.cs: fix the sharpener so that it works with the new Loupe.

2005-11-07  Larry Ewing  <lewing@novell.com>

	* src/Loupe.cs: tweak the motion handler.  Use a different method
	of finding the position.

2005-11-07  Nat Friedman  <nat@novell.com>

	* src/f-spot.glade: Add [ and ] accelerators for rotating images.
	Make the rotation actions in the menus behave the same as the
	toolbar buttons -- e.g. rotate left is now rotate 270, not 90.
	Zoom in and zoom out are now C-= and C--.

2005-11-07  Larry Ewing  <lewing@novell.com>

	* src/Loupe.cs: fix the hotspot, update only on motion.

2005-11-06  Larry Ewing  <lewing@novell.com>

	* src/Loupe.cs: update the centering logic.  handle changes a
	little more cleanly.

	* src/Loupe.cs: change the logic slightly.

2005-11-02  Larry Ewing  <lewing@novell.com>

	* src/GroupSelector.cs: disable the timer for now.

	* src/Loupe.cs: set the ranges more appropriately, limit the
	viewing area to the pixbuf bounds.

	* src/Loupe.cs: add save logic.  Fix button press stuff.

	* src/PhotoView.cs: use SaveVersion.

	* src/PhotoStore.cs: add WriteMetadataToImage and SaveVersion
	methods.

	* src/MainWindow.cs: use photo.SaveVersion in the sharpen call.
	Call WriteMetadataToImage when applying tags for now (disabled for
	tagging at the moment).

	* src/ColorDialog.cs: use photo.SaveVersion.

2005-11-01  Larry Ewing  <lewing@novell.com>

	* src/TagSelectionWidget.cs: add patch from Gabriel to fix my half
	baked row expansion patch.

	* src/Loupe.cs: add Sharpen dialog.
	
	* src/Loupe.cs: new file.

	* src/ImageFile.cs: use write time if it is older than ctime.

	* src/Tiff.cs: add some code to simplify the string value of the rational.

	* src/InfoBox.cs: generated rdf metadata for the info box so that we pick up
	metadata from all image types.

	* src/ImageView.cs: wrap f_image_view_window_coords_to_image as
	WindowCoordsToImage.

	* libfspot/f-image-view.c: expose f_image_view_window_coords_to_image.

2005-10-29  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: commit a slightly modified patch from Bengt
	Thuree to switch out of photo view mode when zooming out.  Add
	some people to the credits dialog (If you are reading this and
	feel you should be listed too, remind me please).

	* src/MetadataStore.cs: fix names.

	* src/JpegFile.cs: look for DataTime original and DateTime.

	* src/Tiff.cs: simplify rationals when convering them to strings
	when possible.  Don't add invalid dates to the statement store.

	* src/JpegHeader.cs: make the jpeg header code handle truncated files.

2005-10-28  Gabriel Burt  <gabriel.burt@gmail.com>

	* src/MainWindow.cs: add support for dropping tags onto other tags
	to reparent them.

	* src/TagStore.cs: add IsAncestorOf function to prevent tags from
	becoming a child of one's children.

	* src/TagCommands.cs: Hide one's children as potential Categories
	When editing a tag's icon, allow the user to select an entire image
	by clicking on it instead of having to select a box.  Fixes #319908.

2005-10-27  Larry Ewing  <lewing@novell.com>

	* src/TagSelectionWidget.cs: fix incorrect change when removing
	warnings, expand parent when adding a tag to a category.

	* src/TagSelectionWidget.cs: fix pasteo.

	* src/MainWindow.cs: remove the reference to copy.

	* f-spot.glade: remove copy command, replace with copy
	location. Patch from Gabriel.

	* src/MainWindow.cs: sensitize the copy location item correctly.

	* src/f-spot.glade: apply patch from Gabriel to center the text on
	the bottom.

2005-10-26  Larry Ewing  <lewing@novell.com>

	* src/JpegFile.cs: add SetXmp method.

	* src/JpegHeader.cs: fix the Replace method so that it actually
	replaces things.
	
	* src/PhotoView.cs: sync the tags to the file as xmp (still
	disabled for now).

	* src/JpegFile.cs: use SetExif.

	* src/JpegHeader.cs: add xmp write support to the jpeg stream.	

	* src/TimeAdaptor.cs: tryout putting the count int the tip.

	* src/MainWindow.cs: fix grammar slightly.

2005-10-19  Gabriel Burt  <gabriel.burt@gmail.com>

	* src/MainWindow.cs: added loading and storing of prefs via GConf.
	Includes window size, position, maximized state, icon_view scroll
	position, show toolbar, sidebar, timeline, tags, dates.

	* src/Preferences.cs: New file. Defines the prefs used by F-Spot and
	provides helper methods for getting, setting, and listening to them.

	* src/IconView.cs: changed ScrollTo to optionally valign top or center.

	* src/FlickrExport.cs: save export preferences, fixes #310615.

	* src/GalleryExport.cs: save export preferences, fixes #305733

	* src/f-spot.glade: changed some MenuItem names, added display_toolbar.

	* src/MakeFile.am: added Preferences.cs to the build.

2005-10-25  Larry Ewing  <lewing@novell.com>

	* src/FlickrRemote.cs: Integrate patch from Adam Israel it quote
	tag names with spaces in them.

2005-10-20  Gabriel Burt  <gabriel.burt@gmail.com>

	* src/TagSelectionWidget.cs: modified Model to allow for interactive
	searching by tag name. Fixes #316051.

2005-10-25  Larry Ewing  <lewing@novell.com>

	* libfspot/f-jpeg-utils.c: include patch from Luca Ferretti to
	fix libexif header inclusion.

	* src/PixelBuffer.cs: more fixes.

	* src/PixelBuffer.cs: make the casts explicit.

	* src/Ciff.cs: use ToSingle;

	* src/BitConverter.cs: add ToSingle method.

	* src/Makefile.am (F_SPOT_CSDISTFILES): ignore obsolete wanring on
	Mono.Posix.GetString.

	* src/Cms.cs: remove the size specifier.

	* src/GroupSelector.cs: use TipWindow.

	* src/Makefile.am: add TipWindow.cs.
	
	* src/TipWindow.cs: simple class to get closer to tooltip appearance.

	* src/TimeAdaptor.cs: use the fullname of the month in the tip.

	* src/GroupSelector.cs: rework some of the scrolling logic.

	* src/Cms.cs: add ctor for linearization devicelink profile.
	
	* src/Cms.cs: set the error action to only display the error
	message for now.

	* src/Tiff.cs: add logic to find the right subfile in NefFile.
	Fix broken CFA parsing logic.

2005-10-24  Larry Ewing  <lewing@novell.com>

	* src/Tiff.cs: 

	* src/TimeAdaptor.cs: Reverse the time sorting.

	* src/DirectoryAdaptor.cs: remove GetInitialPosition.

	* src/GroupAdaptor.cs: removed unused initial position call.

	* src/GroupSelector.cs: use Inflate.

	* src/IconView.cs: use the Inflate method on Gdk.Rectangle now
	that it exists.

	* libfspot/f-pixbuf-utils.h: remove the old rotate90 and mirror
	functions.

	* libfspot/f-pixbuf-utils.c: remove the old rotate90 and mirror
	functions.

	* src/PixbufUtils.cs: remove the old copy and mirror functions.

2005-10-22  Larry Ewing  <lewing@novell.com>

	* src/DirectoryCollection.cs: add File collection.
	
	* src/TagSelectionWidget.cs: fixup, colors to work with themes,
	use new gtk# functions for treeiters cleanup formatting.

	* src/PnmFile.cs: rework the 16bit conversion code, add new
	methods, add Xmp generation.

	* src/MrwFile.cs: change the dump string.

	* TODO: clean up slightly.

	* src/Tiff.cs: remove unused variable.

	* src/RafFile.cs: cleanup unused warning.

	* src/TagPopup.cs: get rid of warning.

	* src/SlideView.cs: clean up obsolete warnings.

	* src/PngFile.cs: get rid of warning.

	* src/RotateCommand.cs: get rid of warning.

2005-10-21  Larry Ewing  <lewing@novell.com>

	* src/PixbufUtils.cs: make the adjustment profile deeper.

	* src/Cms.cs: clean up screen profile, return cached srgb profile.

	* src/ImageFile.cs: add srf files using the nef type.

	* src/f-spot.glade: misc updates.

	* src/Tiff.cs: fix up dump output.
	
	* src/MrwFile.cs: call dump with the right parameters.

	* src/ColorDialog.cs: use the screen profile.

	* libfspot/f-screen-utils.c (f_screen_get_profile): expose the
	function, duh.

	* src/ColorDialog.cs: turn off adjustments for images with alpha
	for now, since adjustment profiles break badly with alpha.

	* src/Cms.cs: expose the model and name and description.

2005-10-20  Larry Ewing  <lewing@novell.com>

	* src/PixelBuffer.cs: use the new method name.

	* src/PhotoPopup.cs: use the nondeprecated method.

	* src/ColorDialog.cs: use the image profile when creating the
	transform.

	* src/PngFile.cs: create a profile from the embedded image data.

	* src/ImageFile.cs: add get profile virtual method.

2005-10-19  Larry Ewing  <lewing@novell.com>

	* src/JpegFile.cs: expose the profile to the world.

	* src/MainWindow.cs: make escape return to the icon view (from
	Gabriel Burt).

	* src/Cms.cs: add a new byte ctor that allows an offset.

	* src/JpegHeader.cs: add profile extraction.

	* src/Cms.cs: add more gamma table and profile creation methods.

	* src/Tiff.cs: add profile extraction to ImageDirectory.

	* src/JpegHeader.cs: fix the byte order of the length data when
	writting on a big endian arch.

	* src/FolderExport.cs: move to IBrowsable*.

	* src/PhotoQuery.cs: move to IBrowsable*.

	* src/PhotoArray.cs: move to IBrowsable*.

	* src/Makefile.am (F_SPOT_CSDISTFILES): remove IPhotoCollection
	from the build.

	* src/IPhotoCollection.cs: remove file, this was an empty
	interface.

	* src/GalleryExport.cs: switch to IBrowsable*.

	* src/FlickrRemote.cs: switch to IBrowsable*.

	* src/FlickrExport.cs: swtich to IBrowsable*.

	* src/CDExport.cs: switch to IBrowsable*.

2005-10-18  Larry Ewing  <lewing@novell.com>

	* src/JpegHeader.cs: write out Rst and Tem markers.

	* src/RotateCommand.cs: 

	* src/Util.cs: fixe typos, add string param.

	* src/Util.cs: add some members to Timer.

	* HACKING: add new file with style guides.

2005-10-16  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: use the remove array overloads.

2005-10-13  Larry Ewing  <lewing@novell.com>

	* src/PnmFile.cs: use the pixelbuffer code for loading deep pnm
	files.

	* src/PixelBuffer.cs: fix the pixbuf ctor.

	* src/BitConverter.cs: add a static swap method.

2005-10-11  Larry Ewing  <lewing@novell.com>

	* src/ColorDialog.cs: add a little bit of smarts to the ok case to
	not create a version if the values haven't changed or have been reset.

2005-10-10  Larry Ewing  <lewing@novell.com>

	* src/Cms.cs: add some more data types.

2005-10-09  Larry Ewing  <lewing@novell.com>

	* src/PixelBuffer.cs: fix the loading interface.

2005-10-07  Larry Ewing  <lewing@novell.com>

	* src/Db.cs: add add a Cache empty property.

	* src/ImportCommand.cs: handle exceptions while creating vfs
	sources. (ugh burn:/// ugh)

	* src/IconView.cs: remove region.Destroy calls.

	* src/Cms.cs: add more types.

2005-10-06  Larry Ewing  <lewing@novell.com>

	* src/PixelBuffer.cs: implment 16bit loading.

	* src/PnmFile.cs: implement 16 bit loading.

	* src/PixelBuffer.cs: add some more logic.

	* src/Tiff.cs: handle errors when loading image subdirectories.

2005-10-03  Larry Ewing  <lewing@novell.com>

	* src/Cms.cs: add Lab profile creation functions.

	* src/f-spot.glade: add revert button.

	* src/ColorDialog.cs: add reset method to the dialog.

	* src/MetadataStore.cs: fix typo.

	* src/MetadataStore.cs: add CustomRendered.

	* src/Tiff.cs: add custom rendered.

2005-10-02  Larry Ewing  <lewing@novell.com>

	* src/IptcFile.cs: fix typo in iptc parsing.

	* src/XmpFile.cs: add the requisit processing instructions and
	xmpmeta element.
	
	* src/InfoDisplay.cs: add a disabled debugging dump of the xmp to
	a file.

	* semweb/XmlWriter.cs: don't close the writers when we close the
	rdf writer, we may want to add more info.

	* src/XmpFile.cs: basic writing.

	* src/PixelBuffer.cs: start new class for deep image data.

	* src/FolderExport.cs: copy exif data to the lq file in the
	Original export so that the exif data will show up in the the
	display.  Change the thubmnail size limits.

	* src/Tiff.cs: add OECF parser.

	* src/IptcFile.cs: remove unused code.

	* src/MainWindow.cs: remove unuaed variable.

	* src/InfoDisplay.cs: remove unused variable.

	* src/Unix.cs: remove warnings.

	* src/Tiff.cs: clean up some warnings.

2005-10-01  Larry Ewing  <lewing@novell.com>

	* src/Cms.cs: fix typo.

	* libfspot/Makefile.am (INCLUDES): add the new file for the glue
	function.

	* src/Cms.cs: wrap the profile glue function.

	* libfspot/f-screen-utils.c (f_screen_get_profile): add a simple
	glue function to get the profile from the display.

	* src/Cms.cs: bind CreateRGBProfile.

	* src/Cms.cs: wrap the gamma table creation functions.	

2005-09-29  Larry Ewing  <lewing@novell.com>

	* src/Tiff.cs: add more enums.

	* src/MetadataStore.cs: add more types.

	* src/Makefile.am: add the rdf to extra dist.

	* src/IptcFile.cs: add the info table back.

	* src/JpegFile.cs: just load the metadata in the Select statement.

	* src/JpegHeader.cs: add a mode where we don't read the image data.

	* src/IptcFile.cs: use metadata store everywhere.

	* src/InfoDisplay.cs: allow collections to be named as well.
	Clean up the display a little more.

	* src/MetadataStore.cs: work with MemoryStores as well.

	* src/MetadataStore: add new add overload that takes a subject.

	* src/Tiff.cs: add CFAPattern parsing (and more), clean up code a bit.

	* src/InfoDisplay.cs: improve the display.

2005-09-28  Larry Ewing  <lewing@novell.com>

	* src/MetadataStore.cs: add more mappings.

	* src/Tiff.cs: add more enums.

	* src/MetadataStore.cs: add new description logic.

	* src/Tiff.cs: small formatting changes.

2005-09-27  Larry Ewing  <lewing@novell.com>

	* src/Tiff.cs: remove a bunch of debug output.

	* src/MainWindow.cs: use the PhotoLoader to create the icon so
	that raw files work properly.

	* src/QueryView.cs: show the photo popup.

	* src/IconView.cs: make the ContextMenu virtual.

	* src/MainWindow.cs: if the mode is already set, don't set it again.
	
2005-09-26  Larry Ewing  <lewing@novell.com>

	* src/TagCommands.cs: allow only one selection to be active at a
	time.

	* src/TagStore.cs: fix the sort logic.

	* src/MainWindow.cs: handle removing a tag and its children at the
	same time.

	* src/TagStore.cs: clean up the exception logic. Add a comparer
	for the remove command.

	* src/MainWindow.cs: integrate category removal error dialog patch
	from Bengt Thuree (see #171346). 
	
	* src/TagStore.cs: throw an exception if we try to remove a
	category with children.

	* src/main.cs: remove extra call to Gtk.Application.Init to fix
	init arguments.

2005-09-25  Larry Ewing  <lewing@novell.com>

	* src/Ciff.cs: add some more fields.

	* src/Tiff.cs: make the srational conversion safe.

	* src/BitConverter.cs: add an int converter.

	* src/Ciff.cs: start processing the crw metadata, hook up
	orientation and date in the process.

2005-09-24  Larry Ewing  <lewing@novell.com>

	* src/XmpFile.cs: silence debug output.

	* src/Tiff.cs: silence a bunch of debug noise.

	* src/Util.cs: add trivial timer class for debugging.

	* src/InfoDisplay.cs: handle missing images and inactive messages
	with a little grace.

	* src/SlideView.cs: display an error pixbuf rather than crahsing
	if the image is missing. 

	* src/ImageView.cs: hold onto the delegate we create.

	* src/InfoDisplay.cs: clean up output spew a little.

	* src/Makefile.am: add dces.rdf to the build.

	* src/Tiff.cs: don't print out a denominator of one for rationals.

2005-09-23  Larry Ewing  <lewing@novell.com>

	* src/PngFile.cs: add more triples based on the pHYs chunk.

	* src/JpegFile.cs: disable the md dump on load.

	* src/dces.rdf: add dublin core descriptions.

	* src/InfoDisplay.cs: get the the lable string from the
	description store.

	* src/RafFile.cs: turn raf into a source.

	* src/MrwFile.cs: turn mrw into a source.

	* src/Tiff.cs: handle srational, clean up output methods, add more
	tags.

	* src/PngFile.cs: parse more tags.

	* src/MetadataStore.cs: actually skip this case.

2005-09-22  Larry Ewing  <lewing@novell.com>

	* src/MetadataStore.cs: add methods for actually setting sequences
	with values. Add a store for setting up the display.

	* src/Tiff.cs: add rational parsing, add a whole bunch more tags
	to the rdf sink.
	
	* src/PngFile.cs: convert the cHRM chunk to the tiff WhitePoint
	and PrimaryChromaticities.

	* src/Tiff.cs: start moving the tiff properties over.

2005-09-21  Larry Ewing  <lewing@novell.com>

	* src/IptcFile.cs: convert many more of the items to rdf, do title
	correctly.

	* src/PngFile.cs: use the metadata store methods parse more of the
	chunks.

	* src/MetadataStore.cs: move the Add methods here.

	* src/IptcFile.cs: parse keywords and other more complex datatypes.

	* src/PngFile.cs: parse dc:title dc:creator and dc:description
	from the png text chunks.

	* src/MetadataStore.cs: add namespace.

	* src/InfoDisplay.cs: tweaks.

	* src/f-spot.glade: change the menu entry name.

	* src/MainWindow.cs: change the dialog name.

	* src/f-spot.in: add semweb to MONO_PATH so f-spot can be run from
	the source directory again.

	* src/ImageFile.cs: use SvgFile when loading svg files.

	* src/InfoDisplay.cs: handle complex types inside complex types
	(sort of).

	* src/PngFile.cs: transfer TimeChunks as triples.

	* src/SvgFile.cs: add XMP extraction for svg files.

	* src/Makefile.am: add SvgFile.cs.

	* src/IptcFile.cs: make the literals literal.

	* src/InfoDisplay.cs: clean up the container display a bit.

	* src/MetadataStore.cs: add tiff namespace.

	* src/XmpFile.cs: don't pass xml exceptions up the stack.

	* src/PngFile.cs: make PngFile a source, pass along the simple
	properties.

2005-09-20  Larry Ewing  <lewing@novell.com>

	* src/InfoDisplay.cs: Improve the display for nonliterals.

	* src/Tiff.cs: make TiffFile a source.

	* src/InfoDisplay.cs: start working on the rdf display.

	* src/Tiff.cs: make TiffFile a souce and make Tiff.Header a source.

	* src/JpegFile.cs: make JpegFile a source, use JpegHeader as a
	source and Tiff.Header as a source, to clean up the processing.

	* src/JpegHeader.cs: make JpegHeader into a source.

	* src/MetadataStore.cs: add more namespaces.

	* src/XmpFile.cs: make the store into a metadata store.

	* src/MetadataStore.cs: add some output processing.

	* src/XmpFile.cs: make the store a metadata store.

2005-09-19  JP Rosevear  <jpr@novell.com>

	* f-spot-view.desktop.in: make generic name "Photo Management" and
	Name "F-Spot"

	* f-spot.desktop.in.in: ditto
	
2005-09-19  Larry Ewing  <lewing@novell.com>

	* src/f-spot-view.desktop.in: set nodisplay and change the
	category.
	
	* src/JpegFile.cs: use the metadata store.

	* src/Makefile.am: add missing files.

	* src/Bim.cs: make BimFile into a StatementSouce.

	* src/IptcFile.cs: make IptcFile into a StatementSource.

	* AUTHORS: add note about semweb to the AUTHORS file.

	* semweb/XmlParser.cs: modify the parsing loop to keep looking for
	the rdf element.

	* configure.in: add semweb by Joshua Tauberer <tauberer@for.net>
	to the build.  Integrate it into the automake build.  I may move
	to using a public version later but for now I want the changes
	local.

	* semweb/: import semweb source into f-spot.

	* Makefile.am: add semweb directory to the build.

2005-09-17  Larry Ewing  <lewing@novell.com>

	* src/Core.cs: handle destruction on the main window properly.

	* Makefile.am (desktop_in_files): add f-spot-view.desktop.in.

	* f-spot-view.desktop.in: add a desktop file for the --view
	command line.

2005-09-16  Larry Ewing  <lewing@novell.com>

	* src/Core.cs: support local file paths.

	* src/PngFile.cs: update the tXMP handling and fix the iTXT loader
	to do parsing properly.

2005-09-15  Larry Ewing  <lewing@novell.com>

	* libgphoto2-sharp/Camera.cs: remove unused structures.

	* src/PngFile.cs: start xmp extraction in test logic.

	* src/Tiff.cs: add xmp debug code.

	* src/JpegFile.cs: add xmp extraction logic.

	* src/XmpFile.cs: add stub for xmp parsing.

	* src/Bim.cs: fix some tag names.

2005-09-13  Larry Ewing  <lewing@novell.com>

	* src/IptcFile.cs: fix up some of the error reporting.

	* src/Tiff.cs: add extraction logic to tiff files as well, this is
	all just a little bit too recursive.

	* src/Makefile.am (F_SPOT_CSDISTFILES): add Bim.cs and IptcFile.cs
	to the build.

	* src/IptcFile.cs: add more info.

	* src/JpegFile.cs: add more extraction logic for now.

	* src/Bim.cs: add identifiers for many more of the types, add name
	parsing, and fix up saving.

2005-09-12  Larry Ewing  <lewing@novell.com>

	* src/IptcFile.cs: start filling in the metadata names and descriptions.

	* src/IptcFile.cs: finish saving logic

	* src/IptcFile.cs: start filling in the field names.

	* src/IptcFile.cs: handle long DataSets.

2005-09-11  Larry Ewing  <lewing@novell.com>

	* src/Bim.cs: add FindEntry logic.

	* src/IptcFile.cs: add the start of an IPTC file parser.

	* src/JpegFile.cs: add some test logic for the new metadata code.

	* src/Bim.cs: add the start of a photoshop 3.0 metadata parser.

i2005-09-10  Larry Ewing  <lewing@novell.com>

	* src/PixbufCache.cs: stop an evil loop caused by images smaller
	than the thumbnail size.

2005-09-05  Larry Ewing  <lewing@novell.com>

	* src/PhotoView.cs: add some tooltips to the more of the photoview
	buttons.

2005-09-04  Larry Ewing  <lewing@novell.com>

	* src/TagCommands.cs: fix typo.

	* src/FolderExport.cs: fix misspelling.

	* Src/f-spot.glade: fix typo.

2005-09-01  Larry Ewing  <lewing@novell.com>

	* src/DirectoryCollection.cs: date is now a property.x

	* src/Tiff.cs: make date a property.

	* src/MrwFile.cs: Date is a property.

	* src/PngFile.cs: extract some metadata from the png files.

	* src/JpegFile.cs: SetDescription is a method Date and Description
	are properties.

	* src/PhotoView.cs: JpegImage.SetDescription is a property now.

	* src/Tiff.cs: date is a property now.

	* src/FileImportBackend.cs: date is a property now.

	* src/main.cs: add shutdown command line option.

	* src/Core.cs: add shutdown method.

	* src/ImageFile.cs: add Description property make Date a property
	rather than a normal method.

	* src/PhotoStore.cs: import image descriptions when importing
	photos.  Refactor the code slightly.

	* src/TagView.cs: handle missing icons with a little more grace.

	* src/FileImportBackend.cs: handle issues while importing photos,
	fix from Shlomi Fish for =310536.

2005-08-30  Larry Ewing  <lewing@novell.com>

	* src/PhotoView.cs: change the message type.

2005-08-29  Larry Ewing  <lewing@novell.com>

	* src/main.cs: don't set the import path here let the user set it.

	* src/Core.cs: null protect the import command.

	* src/PhotoImageView.cs: use SetTransparentColor.

	* src/ImageView.cs: add SetTransparentColor wrapper.

	* src/PhotoView.cs: add error message.
	
	* src/ColorDialog.cs: make the saving error a little more clear.

	* src/PixbufUtils.cs: return Rgba8Planar for alpha Pixbufs.

	* src/Cms.cs: fix the lcms bindings add rgba8planar format.

2005-08-28  Larry Ewing  <lewing@novell.com>

	* src/SlideView.cs: clean up the blend function a little.

2005-08-27  Larry Ewing  <lewing@novell.com>

	* src/RotateCommand.cs: change the wording slightly again.

	* src/JpegFile.cs: refactor the metadata saving slightly.

	* src/RotateCommand.cs: change the error handling a bit.

	* src/Unix.cs: change the error handling a bit.

2005-08-26  Larry Ewing  <lewing@novell.com>

	* src/main.cs: clean up the error message a little.

	* src/FileImportBackend.cs: don't stop scanning if we hit an
	unreadable directory.

	* src/PhotoStore.cs: make more checks on the existance of the
	hidden tag.

	* src/TagCommands.cs: make sure the hidden tag is there.

	* src/MainWindow.cs: remove present call add window.

2005-08-25  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: don't draw the shadow on images with alpha.

	* src/AsyncPixbufLoader.cs: add a Prepared flag.

	* src/PhotoImageView.cs: use the loader prepared flag.

	* src/Core.cs: exit when all the toplevels are gone.

	* src/MainWindow.cs: add present call.

	* src/main.cs: move the basic command calls to a core component.

	* src/Core.cs: new class that implements the remote control stuff.

	* src/Makefile.am: add Core.cs

2005-08-21  Larry Ewing  <lewing@novell.com>

	* configure.in: bump version for release.

	* src/ImportCommand.cs: add a timeout based hack to make sure the
	import progresses.

	* src/main.cs: check the value before we use it, avoinding a crash
	the firs time someone runs f-spot.

	* src/Ciff.cs: remove warning.

	* src/MainWindow.cs: Fix 313850. Add present method.

2005-08-18  Larry Ewing  <lewing@novell.com>

	* configure.in: add icon theme define.

	* src/Defines.cs.in: add icon theme define.

	* src/TagCommands.cs: use icon theme define to find emblems.
	Based on a patch by Loz.

	* src/PhotoView.cs: rework the constraint index passing to avoid
	gtk# changes.

	* src/FolderExport.cs: add comment for translators fixes #168359

	* src/PhotoImageView.cs: only zoom fit if the image didn't pass
	successfully through the loader.

	* src/MainWindow.cs: Silence some warnings.

2005-08-17  Larry Ewing  <lewing@novell.com>

	* src/TagView.cs: Use SetFlags.

	* configure.in: bump versions require new mono.

	* src/GroupSelector.cs: use SetFlag rather that changing the flag
	directly.

	* src/f-spot.glade: turn off the stupid month radio again.  I
	really really hate glade.

2005-08-16  Larry Ewing  <lewing@novell.com>

	* configure.in: bump the required versions.

	* src/FolderExport.cs: clean up one of the strings.

2005-08-15  Ilkka Tuohela  <hile@iki.fi>

	* configure.in: Added "fi" to ALL_LINGUAS

2005-08-15  Larry Ewing  <lewing@novell.com>

	* src/AsyncPixbufLoader.cs: reorder some of the operations.

	* src/PhotoImageView.cs: add some debug output.

	* src/AsyncPixbufLoader.cs: make sure your variables mean what you
	think they mean.... ouch.

	* src/PhotoImageView.cs: only try to fallback load the image if
	we've loaded the whole image and still not gotten a Pixbuf.

	* src/AsyncPixbufLoader.cs: more logic to correctly handle all the
	possible exception cases and such.

	* src/PhotoImageView.cs: handle the case when the loader fails.

	* src/MainWindow.cs: change the about dialog code to work with gtk# 2.

	* src/ImportCommand.cs: Load the first image in the PhotoView as
	soon as there is one.

	* src/ImportCommand.cs: make the camera sources do something (even
	though is isn't quite the right thing).

	* src/PixbufUtils.cs: silence some of the warnings.

	* src/GPhotoCamera.cs: be less agressive with disposing of things
	for now.

	* src/CameraFileSelectionDialog.cs: use the time based directory
	structure for the Photos copied from the camera.

	* src/FileImportBackend.cs: export a rename function to share with
	the camera import code.

	* src/Exif.cs: fix the length in setdata calls.

	* src/JpegHeader.cs: remove the eoi check at the end of the
	stream, read everything after sos as the stream (this is what the
	jpegtran routines did).

	* icons/f-spot-simple*: new style info.

	* icons/f-spot.js: new javascript for theme code.

	* src/FolderExport.cs: integrate jimmac's export fixes. Fix out of
	order destruction problem.

	* src/Makefile.am: jimmac's fancy html.

	* src/ImportCommand.cs: fix button sensistivity.  Fix --import
	path handling so that it starts importing from the path
	immediately.

2005-08-14  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: fix device name.

	* src/MainWindow.cs: start reworking the camera import handling.

	* src/main.cs: add import from camera handling.

	* src/AsyncPixbufLoader.cs: clean up the error handling a little,
	set the pixbuf to null if we've reached the end and the signals
	have never fired.

	* src/ImageFile.cs: load svgs with the default loader.

	* src/FileImportBackend.cs: make the UniqueName private.

	* src/PhotoLoader.cs: make everything work with IBrowsableItem
	instead of photo.

	* src/PhotoImageView.cs: try one more method of loading if the
	pixbuf loader failed.  Other misc cleanups.
	
	* src/PhotoImageView.cs: try to regenerate the thumbnail if we get
	an exception trying to load it.

	* src/ImportCommand.cs: make the import commands work from paths
	again.

	* src/ImportCommand.cs: reverse the icon logic now that gnome
	seems to handle more devices properly

	* src/IconView.cs: fix up the iconview destroy handling.

	* src/ImportCommand.cs: wrap the last attempt to load the image in
	a try block.

2005-08-13  Larry Ewing  <lewing@novell.com>

	* src/GroupSelector.cs: draw the background so that that themes
	that don't fill the handle region don't look ugly.

2005-08-12  Larry Ewing  <lewing@novell.com>

	* src/TagCommands.cs: fix the path logic.

2005-08-11  Larry Ewing  <lewing@novell.com>

	* src/PhotoImageView.cs: Check to make sure the item is valid
	before failing out.
	
	* src/PhotoStore.cs: pass a valid array to savev it gets cranky if
	it is just null.

	* src/SlideView.cs: make OnDestroyed into a signal delegate to
	avoid gtk# bug.

	* src/FullScreenView.cs: make OnDestroyed into a signal delegate to
	avoid gtk# bug.

	* src/PreviewPopup.cs: make OnDestroyed into a signal delegate to
	avoid gtk# bug.

	* src/PhotoImageView.cs: remove debugging destroyed handler.

	* src/gnomevfs: remove unused files.

2005-08-10  Chao-Hsiung Liao  <j_h_liau@yahoo.com.tw>

	* configure.in: Add "zh_TW" to ALL_LINGUAS.

2005-08-05  Larry Ewing  <lewing@novell.com>

	* src/RafFile.cs: add some more raf parsing info.

	* src/FullSlide.cs: set the transient and do the capture here.

	* src/MainWindow.cs: use the new fullslide interface.

	* src/SingleView.cs: use the new fullslide interface.

	* src/PixbufUtils.cs: add FromScreen that takes a window argument.

	* src/MainWindow.cs: use window from screen.
	
	* src/SingleView.cs: use the FromScreen overload that takes a
	window.

	* src/f-spot.glade: add F11 keybinding for fullscreen, f still
	works too.

	* src/FullScreenView.cs: add a raw ctor.

2005-08-04  Larry Ewing  <lewing@novell.com>

	* icons/f-spot-simple.css: add a new style from Jakub.

	* src/FolderExport.cs: change html to match the new style.

	* src/Makefile.am: add the new styleheet as a resource.
	
	* configure.in: update sqlite check based on the beagle sqlite
	check.

2005-08-03  Larry Ewing  <lewing@novell.com>

	* src/PhotoStore.cs: add patch from Joerg Buesse to sort all the
	way down to filename in CompareDirectory.  Add start of fix for
	tag removal bug.

2005-07-30  Larry Ewing  <lewing@novell.com>

	* configure.in: switch to using gtk-sharp-2.0

	* src/Makefile.am: go 2.0

	* src/PhotoImageView.cs: 2.0 changes

	* src/SimpleCalendar.cs: 2.0 changes

	* src/PreviewPopup.cs: 2.0 changes

2005-07-26  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: add an open handler.

	* src/AsyncPixbufLoader.cs: add some error handling to the loader.

2005-07-26  Larry Ewing  <lewing@localhost.localdomain>

	* po/POTFILES.in: add missing files.

2005-07-25  ygimantas Beruka  <zygis@gnome.org>

	* configure.in: Added Lithuanian to ALL_LINGUAS.

2005-07-21  Larry Ewing  <lewing@novell.com>

	* src/TagCommands.cs: fixe path typos spotted by Dominik Meister.

	* src/FolderExport.cs: integrate folder export fixes from jimmac.

2005-07-16  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: Add patch from Shlomi Fish to fix crash durring
	selection change.

	* src/Tiff.cs: fix typo.

2005-07-06  Lukas Lipka <lukas@pmad.net>

	* src/Tiff.cs: Fix a broken build.
	
2005-07-05  Larry Ewing  <lewing@novell.com>

	* src/ImageFile.cs: actually load the panasonic raw files.

	* src/Tiff.cs: add some extra niff tags info.

2005-07-03  Larry Ewing  <lewing@novell.com>

	* src/Tiff.cs: handle panasonic .raw files using the nef path.

2005-07-02  Larry Ewing  <lewing@novell.com>

	* src/Tiff.cs: handle olympus orf files by being less strict about
	the header format.

	* src/ImageFile.cs: treat orf files as nef files for the time
	being to get them loading.

	* src/ImageFile.cs: treat pef files as nef files for now (they
	seem to be largely the same structre).

	* src/RafFile.cs: fix typo.

	* src/RafFile.cs: add new file RafFile.cs

	* src/Makefile.am (F_SPOT_CSDISTFILES): add RafFile.cs to the
	build.

	* src/ImageFile.cs: add raf to the list.

	* src/MrwFile.cs: make the loader handle blocks in a different
	order.

2005-07-01  Larry Ewing  <lewing@novell.com>

	* src/Makefile.am (F_SPOT_CSDISTFILES): add MrwFile.cs to the
	build.

	* src/DirectoryCollection.cs: use ImageFile.HasLoader.

	* src/FileImportBackend.cs: use ImageFile.HasLoader.

	* src/ImageFile.cs: add a HasLoader test so that we can move to
	better tests than extension comparisons.

	* src/FileImportBackend.cs: allow importing mrw files.

	* src/ImageFile.cs: hook the minolta loader up.

	* src/MrwFile.cs: start a minolta raw loader.

2005-06-27  Larry Ewing  <lewing@novell.com>

	* src/SingleView.cs: make slideshows work on IBrowsableItems.

	* src/SlideView.cs: make the slideshow work properly with
	IBrowsableItems
	
	* src/SingleView.cs: make the menu items so the proper state.
	Start hooking up the zoom scale.

	* src/f-spot.glade: ad the zoom scale remove some menu items.

2005-06-25  Larry Ewing  <lewing@novell.com>

	* src/f-spot.glade: remove someitems from the menus.

	* src/FullScreenView.cs: Use IBrowsableItem.

	* src/SingleView.cs: hook up the fullscreen menu item.

	* src/Makefile.am (F_SPOT_CSDISTFILES): add SingleView to the build.

	* src/f-spot.glade: add the new view window.

	* src/main.cs: add the --view command line option.

	* src/SingleView.cs: add new file for the out of db view mode.

	* src/Tiff.cs: silence warning.

	* src/PhotoImageView.cs: remove Photo property, use Index instead.

	* src/PhotoPopup.cs: add a quick hack to work when MainWindow
	doesn't exist.

	* src/QueryView.cs: fix some formatting, remove unused variables.

	* src/SlideView.cs: move to IBrowsableItem move the slideview to
	the FSpot namespace.

	* src/PhotoLoader.cs: use IBrowsableItem here.

	* src/DirectoryCollection.cs: add MarkChanged call for now.

	* src/RotateCommand.cs: make rotate work for IBrowsableItems.

	* src/PhotoImageView.cs: start converting everything to use the
	IBrowsable interface.

	* src/DirectoryCollection.cs: clean up the collection code a
	bit. Delay imagefile creation until it is needed.  Filter on a few
	more types.

2005-06-23  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: only mess with the window if it is realized.

2005-06-22  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: limit the minimum size to avoid nastiness.
	Tweak the scrolling code a little more.

	* src/IconView.cs: expanded the cell width to devide up the space
	evenly.

	* src/PngFile.cs: use CreateInstance and remove a bunch of cruft.

	* libeog/image-view.c: fix the redisplay code.

i2005-06-22  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: monkey with redraw code when scaling or
	changing size.

	* src/PhotoView.cs: add some tooltips.

	* src/ImageFile.cs: make dng use the dng loader.

	* src/Tiff.cs: make dng do something sane.

2005-06-18  Larry Ewing  <lewing@novell.com>

	* src/ImageView.cs: only set the zoom if it differs enough.

	* src/IconView.cs: change the thumbnail reloading logic, make sure
	to always invalidate thumbnails we need to scale.

	* src/MainWindow.cs: only set the zoom if is larger than the
	threshold.

	* src/IconView.cs: preserve the scroll offset when the thumbnail
	size changes.

2005-06-17  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: pass the tag_selection_widget for now until
	we have a proper way to clear the selection.

	* src/QueryDisplay.cs: add a warning and a close button to the the
	search bar.

	* src/IconView.cs: never display dates if the size is versy small.

	* src/MainWindow.cs: hook up the zoom icons.

	* src/Makefile.am: add the zoom resources.

	* src/StockIcons.cs: add the zoom stock items.

	* src/f-spot.glade: add the zoom images.

	* src/QueryDisplay.cs: add padding around the tags.

	* src/f-spot.glade: remove the hbox entry.

	* src/TagView.cs: change the tag display for TagView.

	* src/MainWindow.cs: add the start of the search bar.

	* src/QueryDisplay.cs: new widget to dislay and/or change the
	active search.
	
	* src/MainWindow.cs: only set the photo_zoom if the value differs
	to preserve the Fit case.

	* src/f-spot.glade: add the zoom scale.

	* src/MainWindow.cs: hook up zoom slider.

	* src/f-spot.glade: add zoom scale.

	* src/Mainwindow.cs: zoom when the scale changes.

2005-06-16  Larry Ewing  <lewing@novell.com>

	* src/FileImportBackend.cs: rename the files in a slightly more
	sane way.

	* src/CameraFileSelectionDialog.cs: handle null thumbnails without
	complaint.

	* src/GPhotoCamera.cs: handle cameras that don't support thumbnails
	without dieing.

2005-06-15  Larry Ewing  <lewing@novell.com>

	* src/ImportCommand.cs: check if we are one level down into the
	dcim directory.

	* src/ImportCommand.cs: set sensitivity of ok button appropriately.

	* src/f-spot.glade: change name of ok button.

	* src/ImportCommand.cs: add empty source if no cameras are there.

	* src/IBrowsableItem.cs: add fixme.

	* src/f-spot.glade: fix typo, make the add button popup the import
	dialog.

	* src/ImportCommand.cs: make the attach tag command work properly
	again.
	
	* src/ImportCommand.cs: handle response directly so that cancel
	gets processed properly.

	* src/FileImportBackend.cs: remove copied files upon cancel.

	* src/MainWindow.cs: remove the empty check from the constructor.

	* src/main.cs: rework the arg parsing so that it handles the basic
	startup correctly when there is no database but there is an
	--import commandline.

2005-06-14  Larry Ewing  <lewing@novell.com>

	* src/f-spot.glade: new import dialog.

	* src/ImportCommand.cs: use the new dialog code.

	* src/main.cs: call import file.

	* src/MainWindow.cs: add import file method.

	* src/FileImportBackend.cs: add the ability to copy files durring
	import.

	* src/PhotoArray.cs: add clear method.

	* src/Global.cs: add PhotoDirectory to the global path list.

	* src/MainWindow.cs: update the glass position as we scroll.
	Based on a patch by Gabriel Burt gburt-at-uiuc.edu. 

	* src/IconView.cs: add topLeftvisible call.  Replace with an
	averaging window soon.

	* src/TimeAdaptor.cs: add IndexFromPhoto and initial position.
	
	* src/GroupAdaptor.cs: add IndexFromPhoto.

	* src/DirectoryAdaptor.cs: Implement the new methods.

	* libgphoto2-sharp/CameraList.cs: remove unsued structure.

	* libgphoto2-sharp/CameraFile.cs: remove unused and empty
	structure.

	* src/GPhotoCamera.cs: make finalize a destructor.

	* src/PixbufUtils.cs: ScaleToMaxSize fall down to simple
	interpolation for very small images.

	* src/IconView.cs: make the display handle null tags with a little
	more grace.  Protect remove calls from invalid arguments.

	* src/PhotoArray.cs: add capacity param.

2005-06-07  Larry Ewing  <lewing@novell.com>

	* src/PngFile.cs: commit new facotry code remove a lot of cruft.

2005-06-03  Larry Ewing  <lewing@novell.com>

	* src/IBrowsableItem.cs: add direct indexer so that we can avoid
	making all collections mirror their internal structures as actual
	arrays.  The collections that change a lot were doing far too much
	work.

	* src/CDExport.cs: use count and indexer.

	* src/DirectoryCollection.cs: add indexer.

	* src/GalleryExport.cs: use indexer.

	* src/FolderExport.cs: use indexer.

	* src/FlickrExport.cs: use indexers and count.
	
	* src/IPhotoCollection.cs: remove only method, start to deprecate.

	* src/IconView.cs: use indexer and Count where appropriate.

	* src/MainWindow.cs: use indexer.

	* src/PhotoArray.cs: add indexers use them where appropriate.

	* src/PhotoLoader.cs: use the indexer.

	* src/PhotoQuery.cs: add indexer.

	* src/ScalingIconView.cs: use count and direct indexer.

	* src/TagCommands.cs: use the direct indexer not the Items
	accessor.

	* src/Tiff.cs: if nef file has a jpeg stream offer it as the
	pixbuf stream.  This should make browsing d70 files zippy.

2005-06-02  Larry Ewing  <lewing@novell.com>

	* src/DCRawFile.cs: do broken but better than nothing filename
	quoting before creating the process.

	* src/Tiff.cs: use dcraw on images that don't have embedded previews.

	* src/PnmFile.cs: use the pixbuf loader for 8 bit images and the
	the internal one for 16 bit images (even though it is still a
	horrible hack).

	* src/Unix.cs: wrap mkstemp and rename.

	* src/Tiff.cs: use dcraw to load cr2 files... Wow is it slow.
	
	* src/JpegFile.cs: use the safe temp file stuff to avoid problems
	with reading while rotating.

	* src/Makefile.am (F_SPOT_CSDISTFILES): add the new files.

	* src/DCRawFile.cs: add simple dcraw based loader.

	* src/TagView.cs: handle a null photo properly.

	* libeog/image-view.c (endif): pass the position of the area to
	adjust.

	* src/JpegFile.cs: be more careful with the output stream.

	* src/PhotoImageView.cs: make reload work again hook back up to
	item changed.

	* src/TagView.cs: add a quick hack to set the size request on
	expose.

	* src/ColorDialog.cs: use the new indexing interface.

	* src/TagCommand.cs: use the new indexing and selection
	interfaces.

	* src/MainWindow.cs: fixup sleection changed handling for the
	IconView.

	* src/PhotoImageView.cs: remove old indexing interface.

	* src/PhotoView.cs: move to using the Item for indexing.  Remove
	old indexing interface.

	* src/MainWindow.cs: stop using the old current photo interfaces,
	use the Browsable pointer stuff.

2005-06-01  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: make sure the item numer is sane.

	* src/PhotoView.cs: remove local next and previous methods.  Use
	View.Items instead.

	* src/PhotoImageView.cs: remove next, previous, first, last
	methods, use the Items methods instead.

	* src/MainWindow.cs: move the selection tray out of the creation
	function for now.

	* PhotoImageView.cs: rework the done handler so that it handles
	things more gracefully.

	* src/Ciff.cs: return a null stream.  This should eventually
	return the embedded jpeg stream at some point.
	
	* src/Tiff.cs: make PixbufStream always return false for tiff
	files since they can't be loaded with a pixbuf loader anyway.

	* src/ImageFile.cs: add PixbufStream method to allow async loading
	for types that allow it.

	* src/AsyncPixbufLoader.cs: use new image file insterface to get
	the stream.

2005-05-31  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: use the selection interface instead of the
	unselect call.

	* src/TagCommands.cs: remove incorrect unselect call.

	* src/IconView.cs: make the selection merging work over query
	changes.  Fix item changed propogation, other misc fixeups.

2005-05-30  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: disable the broke selection merging logic.

	* src/IBrowsableItem.cs: add contains to the interface (one step
	closer to IList).

	* src/IconView.cs: use a custom IBrowsableCollection as the
	selection.

	* src/DirectoryCollection.cs: implement contains.

	* src/PhotoQuery.cs: implement contains.

	* src/PhotoArray.cs: implement contains.
	
	* src/MainWindow.cs: stop using the old selection interface.

	* src/TagCommands.cs: stop using the old selection interface.

	* src/IconView.cs: when we scroll to an item scroll it to the
	middle of the screen.

	* src/PhotoImageView.cs: fix the fallthough case and sue count on
	the proper item.

	* src/ColorDialog.cs: cast Photo properly, missed this before.

	* src/DirectoryCollection.cs: add Count.

	* src/PhotoArray.cs: add Count.

	* src/PhotoQuery.cs: implement count and fix IndexOf.

	* src/IBrowsableItem.cs: add Browsable pointer. Add Count to
	IBrowsableCollection.

	* src/PhotoImageView.cs: use BrowsablePointer.

	* src/MainWindow.cs: clean up the JumpTo method and consolidate
	it with the Present method.

	* src/IconView.cs: fix up the ScrollTo function so that it works
	when the destination is outside the old dimensions.

2005-05-28  Larry Ewing  <lewing@novell.com>

	* src/PhotoImageView.cs: make the query a PhotoCollection.

	* configure.in: bump the gtk-sharp required version.
	
	* src/StockIcons.cs: use stock add without the extra bogus
	parameter.

	* src/QueryView.cs: make sure cells_per_orw is always > 0;

	* src/PhotoStore.cs: fix the compare function a little.

	* src/PhotoLoader.cs: use IPhotoCollection. Use ImageFile.

	* src/IBrowsableItem.cs: Add IndexOf to the interface.

	* src/PhotoArray.cs: implement IndexOf.

	* src/PhotoQuery.cs: implement IndexOf.

	* src/DirectoryCollection.cs: implement IndexOf.

2005-05-27  Larry Ewing  <lewing@novell.com>

	* src/ScalingIconView.cs: fixup fo rthe variable name changes.

	* src/QueryView.cs: add TrayView that scales to fit number of
	items.  Move events into IconView, QueryView is an empty class
	now.

	* src/PhotoArray.cs: allow setting the array directly.

	* src/IconView.cs: make some of the const items non const and
	rename.  Move the events into IconView now that they are generic.

2005-05-26  Larry Ewing  <lewing@novell.com>

	* src/PhotoArray.cs: add the ability to add items.

	* src/ImageFile.cs: clean up the creat function.

2005-05-26  Jordi Mas i Hernandez <jordi@ximian.com>

	* MainWindow.cs: Allow localise hardcoded strings
	* PhotoStore.cs: Allow localise hardcoded strings
	* PhotoVersionMenu.cs: Allow localise hardcoded strings
	* main.cs: Allow localise hardcoded strings

2005-05-25  Larry Ewing  <lewing@novell.com>

	* src/PngFile.cs: don't bail on Adam7 for now.

	* src/ImageFile.cs: fix the orientation on the raw formats we can load.

	* src/Tiff.cs: fix up the jpeg loading code.  Handle errors more
	gracefully..

2005-05-24  Miguel de Icaza  <miguel@novell.com>

	* src/PhotoStore.cs: Fix build.

2005-05-23  Larry Ewing  <lewing@novell.com>

	* src/PhotoStore.cs: Fix for #305208 from Daniel Drake.  Check for
	existance of file before trying to delete it.

	* src/Tiff.cs: make the embedded thumbnail call use the pixbuf
	loader.

	* src/ImageFile.cs: disable orf.

	* src/Ciff.cs: step into the structure.

	* src/Tiff.cs: small cleanups.

	* src/ImageFile.cs: map nef to NefFile.

	* src/Tiff.cs: decode the jpeg segment in the NEF version for now.

	* src/Tiff.cs: actually commit the right version.

	* src/ImageFile.cs: use the cr2 loader for cr2files.

	* src/PixbufUtils.cs: make LoadFromStream public for now.

2005-05-22  Larry Ewing  <lewing@novell.com>

	* src/Tiff.cs: handle loading thumbnails from cr2 files.

	* src/PhotoStore.cs: If we've just created the photo mark it as
	loaded. fixes #301968.

	* src/f-spot.glade: make the predefined icon selector shadow in
	and make fix the directory/month arrangement again.

	* src/Tiff.cs: more debug output to the tiff parser.

	* src/ImageFile.cs: add all the strange formats to the Creation
	table.

	* src/PngFile.cs: open the file in readonly mode.

	* src/DirectoryCollection.cs: only use png icons for now.

	* src/PhotoStore.cs: remove exception.

	* src/Tiff.cs: add missing tag ids.  Add enums for some of the
	more critical settings.

2005-05-21  Larry Ewing  <lewing@novell.com>

	* src/PhotoImageView.cs: handle closed, fall back to
	ImageFile.Load if the progressive loader fails.  Set the error
	pixbuf if things do fail.

	* src/AsyncPixbufLoader.cs: always emit the closed event.  Remove
	the ciff hack for now.

	* src/Makefile.am: add new files to the build.

	* src/PnmFile.cs: add simplistic pnm parser.

	* src/Tiff.cs: Add some tag definitions parse some more of the
	tags.  Add date and orientation to TiffFile.

2005-05-20  Larry Ewing  <lewing@novell.com>

	* src/PixbufLoader.cs: use the ImageFile loaders.

	* src/ThumbnailGenerator.cs: lower the timeout and use catch
	exceptions.

	* src/AsyncPixbufLoader.cs: unblock the thumbnail loader here.

2005-05-19  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: set the drag icons for tags.

	* src/PngFile.cs: make it possible to include pngfile into the build.
	
	* src/Tiff.cs: fixup some of the subdirectory parsing code.

2005-05-19  Martin Willemoes Hansen  <mwh@sysrq.dk>

	* src/MainWindow.cs: Fixed an i18n bug by adding the domain parameter 
	  "f-spot", while loading the glade file.
	* src/PrintDialog.cs: Ditto
	* src/GladeDialog.cs: Ditto

2005-05-19  Larry Ewing  <lewing@novell.com>

	* src/PhotoLoader.cs: use ImageFile.

	* src/Makefile.am (F_SPOT_CSDISTFILES): add CiffFile to the build.

	* src/ThumbnailGenerator.cs: use ImageFile to load the thumbnail.

	* src/ColorDialog.cs: use one of the new interfaces here.

	* src/ImageFile.cs: add some new rather questionable interfaces to
	ImageFile.

	* src/Tiff.cs: fix value.

	* src/Ciff.cs: start hacking Ciff as ImageFile

2005-05-18  Larry Ewing  <lewing@novell.com>

	* src/Ciff.cs: start ciff parser.  Can extract embedded jpegs and
	thumbnails.

2005-05-17  Larry Ewing  <lewing@novell.com>

	* src/PngFile.cs: more formats.

	* src/PngFile.cs: implement indexed decoding.

	* src/Tiff.cs: fix typo.

2005-05-16  Larry Ewing  <lewing@novell.com>

	* src/PngFile.cs: add 1,2,4 bit unpackers fix the line length do
	other stuff good too.

	* src/PngFile.cs: implement reconstruction for more formats.	

	* src/PngFile.cs: implement scanline filter reconstruction, and
	grey8 and rgb8 unpacking.

2005-05-15  Larry Ewing  <lewing@novell.com>

	* src/PngFile.cs: implment the scanline inflater.  It still
	doesn't work for interlaced images.

	* src/Tiff.cs: clean up the converter class to use BitConverter
	add a main method for the time being.

	* src/Cms.cs: remove uneeded unsafe keyword.

	* src/PngFile.cs: start the decoder.

2005-05-14  Larry Ewing  <lewing@novell.com>

	* src/PngFile.cs: start decoding the important chunks.

	* src/PngFile.cs: add iCCP chunk decoding.  fix some other stuff
	yo.

	* src/PngFile.cs: and tXMP decoding (well not the encoding yet)
	and make the thing actually compile.

	* src/BitConverter.cs: new file.

	* src/JpegFile.cs: remove BitConverter.

	* src/PixbufUtils.cs: add Save overload that takes a stream.  Fix
	the options to the pixbuf save code.

	* src/JpegHeader.cs: add BitConverter class that understands
	endianess, use it.

	* src/IthmbDb.cs: add different yuv coversion code.

	* src/ImageFile.cs: add virtual save command.

	* src/Exif.cs: add integer conversions.

	* src/JpegFile.cs: add the start of more complete saving code.

	* src/PngFile.cs: start a PNG chunk parser to extract XMP.

2005-05-13  Larry Ewing  <lewing@novell.com>

	* src/JpegFile.cs: add some testing code to use the JpegHeader
	code for exif saving.

	* src/f-spot.glade: remove vfs export menu item.  Rename original
	export to folder export.  Add plain export option.

	* src/FolderExport.cs: fix plain export and scaling.

	* src/MainWindow.cs: remove vfs export method.
	
	* src/Makefile.am (F_SPOT_CSDISTFILES): add JpegHeader to the
	build remove VfsExport.  Everything Vfs Export did is now covered
	in FolderExport.

	* src/PixbufUtils.cs: use ImageFile to get the orientation.
	always close the stream.

	* src/Exif.cs: add an overload to the data ctor.

	* src/JpegHeader.cs: fix the saving code, make exif saving work.

2005-05-13  Danilo egan  <dsegan@gmx.net>

	* configure.in (ALL_LINGUAS): Added "sr" and "sr@Latn".

2005-05-12  Larry Ewing  <lewing@novell.com>

	* src/JpegHeader.cs: add saving to the jpeg header code.

	* src/PhotoView.cs: enable description saving in the exif data.

	* src/RotateCommand.cs: make the rotate command use the exif
	orientation rather than coefficient rotation.

	* src/ImageFile.cs: add load and Orientation.

	* src/Exif.cs: bind dump function so we can see what is going on.

	* src/PixbufUtils.cs: add orientation rotations.  Fix the fix the
	orientation transform functions.  Fix TransformAndCopy tmp buff bounds.

	* src/JpegFile.cs: make SetOrientation work.

	* src/Exif.cs: make ushort data work.

2005-05-11  Larry Ewing  <lewing@novell.com>

	* src/StockIcons.cs: use the old obsolete add again.

	* src/ImportCommand.cs: refactor source menu work.

2005-05-10  Larry Ewing  <lewing@novell.com>

	* src/FolderExport.cs: fix the stylesheet path for html export.

2005-05-10  Larry Ewing  <lewing@novell.com>

	* configure.in: bump version to 0.0.13.

	* NEWS: update for release.

2005-05-09  Larry Ewing  <lewing@novell.com>

	* src/JpegFile.cs: remove debug output and unused function.

	* libfspot/f-jpeg-utils.c: add warning

	* libjpegtran/jpeg-data.c: add warnings on unexpected results
	(this code will a go away soon).

	* src/ImageFile.cs: add path property.

	* src/DirectoryCollection.cs: Proxy an ImageFile as an
	IBrowsableItem, these need to be cleaned up and combined.

	* src/PhotoStore.cs: set the thumbnail based on
	IThumbnailContainer if it exists.

	* src/CameraFileSelectionDialog.cs: Apply Funda Wang's fix to the
	format string for the error dialog.  Fixes #303395. 

2005-05-07  Larry Ewing  <lewing@novell.com>

	* src/IthmbDb.cs: update the api to follow the data available from
	the db.

	* src/PhotoDatabase.cs: use the db to load the thumbnails.

2005-05-06  Larry Ewing  <lewing@novell.com>

	* src/TagSelectionWidget.cs: initialize iter to Zero.

	* src/JpegFile.cs: fix up the exif_data logic.

	* src/PhotoDatabase.cs: new file to parse the Photo Database file
	format.

2005-05-05  Larry Ewing  <lewing@novell.com>

	* src/PhotoView.cs: use the new image file work.

	* src/Exif.cs: update some of the names.

	* src/ExifUtils.cs: mirror the Exif.cs changes.

	* src/PhotoStore.cs: use the new ImageFile work.

	* src/DirectoryCollection.cs: use image file (need to be rewritten
	still but you get the idea).

	* src/PhotoView.cs: use new api to set the description.

	* src/PixbufUtils.cs: mirror the new exif api.

	* src/Makefile.am: add JpegFile.cs and ImageFile.cs to the build.

	* src/ImportCommand.cs: fix up formatting a bit.

	* src/StockIcons.cs: use the new entry point, people need to have
	upgraded by now.

	* src/JpegFile.cs: new file to put all the jpeg specfic stuff in one place.

	* src/ImageFile.cs: start of a helper class for all the.

	* src/IthmbDb.cs: add support for the BigEndian fullscreen
	thumbnails that camera connector stores.
	
2005-05-04  Larry Ewing  <lewing@novell.com>

	* src/PhotoView.cs: add conditional code to store the description
	in the exif info.  Translate SelectionConstraint entries.

	* src/PixbufUtils.cs: use writeline instead of write.  Patch from
	Joshua Nichols.

2005-05-03  Kostas Papadimas <pkst@gnome.org>

	* configure.in: Added "el" to ALL_LINGUAS.

2005-04-28  Larry Ewing  <lewing@novell.com>

	* src/QueryView.cs: remove unused variable.

	* src/TimeAdaptor.cs: remove unused variable.

	* src/ThreadProgressDialog.cs: remove unused variables.

	* src/Makefile.am: remove noisy 0169 warnings from the build for
	now.

	* src/ColorDialog.cs: remove unused variable.

	* src/AsyncPixbufLoader.cs: remove unused variable.

	* src/gnomevfs/VfsStream.cs: remove self assignment.

2005-04-25  Larry Ewing  <lewing@novell.com>

	* src/FolderExport.cs: set destination to value not destinaton.

	* src/FlickrRemote.cs: set used rather than limit when parsing the
	result (Spotted by Gary Cody).

	* src/TagSelectionWidget.cs: initialize the treeiter to zero to
	make csc happy.

	* libgphoto2-sharp/CameraFilesystem.cs: fix up for new marshalling rules.

	* libgphoto2-sharp/Port.cs: fix up for new marshalling rules.

	* libgphoto2-sharp/Camera.cs: more changes to comply with the new
	marshalling rules.

2005-04-24  Christopher Orr  <chris@orr.me.uk>

        * configure.in: Added "en_GB" to ALL_LINGUAS.

2005-04-21  Larry Ewing  <lewing@novell.com>

	* src/IthmbDb.cs: refactor the loading code a little.

	* src/IthmbDb.cs: add yuv saving.

2005-04-20  Larry Ewing  <lewing@novell.com>

	* src/IthmbDb.cs: add rgb565 writing with accompanying command
	line arguments.
	
	* src/IthmbDb.cs: fix the blue channel calculation in 565 mode.
	Display all the thumbs in the same window. Play around with the
	yuv decoder a little.

	* src/FlickrExport.cs: clean up the password dialog slightly.

	* src/FlickrRemote.cs: parse the space as a long since it might
	overflow int now that flickr is all growed up. (patch from Adam
	Israel).

2005-04-20  Priit Laes  <amd@store20.com>

	* src/MainWindow.cs: do not display translator-credits in
	about box, when they are not specified.

2005-04-20  Larry Ewing  <lewing@novell.com>

	* src/IthmbDb.cs: clamp the yuv values properly.
	
	* src/IthmbDb.cs: it appears external is interlaced YUV decode
	appropriately.

	* src/IthmbDb.cs: Add support for other image sizes.  External
	still doesn't work and fullscreen needs to be rotated.	

	* src/IthmbDb.cs: add start of thumbnaildb loader.

2005-04-19  Larry Ewing  <lewing@novell.com>

	* src/FormClient.cs: remove unused headers.

	* src/GroupSelector.cs: set the legend height based on the font
	metrics.

	* src/OriginalExport.cs: remove unused file.

2005-04-18  Adam Weinberger  <adamw@gnome.org>

	* src/ColorDialog.cs: Remove extra space from string.

2005-04-14  Larry Ewing  <lewing@novell.com>

	* libgphoto2-sharp/Camera.cs: hack around the struct marshalling
	changes in mono head.

2005-04-07  Iaki Larraaga  <dooteo@euskalgnu.org>

	* configure.in: Added "eu" (Basque) to ALL_LINGUAS.

2005-04-01  Steve Murphy  <murf@e-tools.com>

        * configure.in: Added "rw" to ALL_LINGUAS.

2005-03-20  Miguel de Icaza  <miguel@novell.com>

	* src/Util.cs (GnomeUtil.UrlShow): New helper routine to show urls
	and detect errors.  Gnome.Url.Show might fail if some url handlers
	are not registered. 

	* src/MainWindow.cs: Use new helper routine.
 
2005-03-24  Larry Ewing  <lewing@novell.com>

	* src/JpegUtils.cs: offer a method to save exif info directly.

	* configure.in: check for new .so versions.

	* libfspot/f-jpeg-utils.c: add save_jpeg call.

2005-03-22  Larry Ewing  <lewing@novell.com>

	* libgphoto2-sharp/libgphoto2-sharp.dll.config: remove the
	explicit path to libgphoto.

	* src/f-spot.exe.config.in: remove extra lib in libfspot path.

2005-03-19  Adam Weinberger  <adamw@gnome.org>

	* src/RotateCommand.cs: fix typo.

2005-03-19  Larry Ewing  <lewing@novell.com>

	* configure.in: bump the version numbers for release.

	* src/FullScreenView.cs: add exit button to fullscreen mode.

	* src/PhotoImageView.cs: remove debug output.

	* src/MainWindow.cs: handle sharpen errors properly.

	* libfspot/f-jpeg-utils.c: add workaround for missing macro.

	* src/RotateCommand.cs: fix format string.

	* src/PhotoView.cs: provide error dialog if file can't be saved.

	* src/ColorDialog.cs: provide error dialog if file can't be saved.

	* src/f-spot.exe.config.in: add a dllmap for gdk-x11.

	* src/MainWindow.cs: use the new FullSlide class.

	* src/SlideView.cs: hide the cursor if it isn't moving.

	* src/f-spot.glade: expose fix up the Cd dialog.

	* src/MainWindow.cs: update the menus based on the selection.

	* src/InfoDisplay.cs: handle the no exif info case a little more
	gracefully.

	* src/CompatFileChooser.cs: be a little more careful setting the
	current folder to avoid upsetting the gnome-vfs backend.

	* src/FullScreenView.cs: put the pointer into scoll mode not
	select mode.

2005-03-18  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: use the capitalized name in the about dialog.

	* src/MainWindow.cs: set some defaults for the sharpen command.

2005-03-14  Larry Ewing  <lewing@novell.com>

	* src/f-spot.glade: clean up the add dialog make it work as an
	error dialog as well.

	* src/GalleryExport.cs: clean up the add and error dialogs.

	* src/GalleryExport.cs: reenable the scaling code.

	* src/f-spot.glade: add the scaling bits back to the dialog.

	* src/GalleryRemote.cs: use force_filename in add item.  Add an
	overload for passing a different file to to AddItem.

	* src/RotateCommand.cs: show error dialog if rotation fails.

	* src/MainWindow.cs: pass "" instead of null to the galde function
	so that monogrind.pl works.

	* src/GalleryExport.cs: popup a password dialog when the the
	password is bad.

	* src/f-spot.glade: expose the ok and cancel buttons make ok
	sensitive only
	
2005-03-13  Artur Flinta  <aflinta@cvs.gnome.org>

        * configure.in (ALL_LINGUAS): Added "pl" (Polish)

2005-03-12  Larry Ewing  <lewing@novell.com>

	* src/ThumbnailCommand.cs: only dispose the thumbnail if it was
	reallt loaded.

2005-03-11  Larry Ewing  <lewing@novell.com>

	* src/AsyncPixbufLoader.cs: clean up close handling to avoid the
	ugly messages at exit.

	* src/f-spot.glade: remove unused prefernces menu item.

	* src/PhotoImageView.cs: clean up the close handling.

	* src/PhotoView.cs: fix an off by one error in the description
	sensitivity.

	* src/Util.cs: remove debug spew.

	* src/PhotoImageView.cs: remove debug spew.

2005-03-10  Larry Ewing  <lewing@novell.com>

	* f-spot.desktop.in.in:  Change the name. 

2005-03-09  Larry Ewing  <lewing@novell.com>

	* src/FormClient.cs: bump the chunk size.

	* src/TagStore.cs: clean up what we can and fix a leak in
	serialize.

	* src/FlickrExport.cs: fix the final upload url creation.

2005-03-08  Larry Ewing  <lewing@novell.com>

	* src/ThumbnailGenerator.cs: only try to save the image if we
	successfully loaded it.

	* src/MainWindow.cs: handle the case where we can't load the
	original image gracefully.

	* src/PhotoImageView.cs: catch exceptions loading the thumbnail
	and continue as usual.

	* src/PixbufCache.cs: don't lookup when a thumbnail is loaded
	simply update the entry.  Lookup can cause cache starvation.

	* src/ThumbnailGenerator.cs: sleep for a quarter of a second after
	every thumbnail.  We are trying to make pretty pictures not save
	the world.

2005-03-07  Larry Ewing  <lewing@novell.com>

	* src/FormClient.cs: bump the timeout for mulitpart requests since
	they will typically take a long time to process.

2005-03-07  Raja R Harinath  <rharinath@novell.com>

	* configure.in 	(src/f-spot): Make generated script executable.
	(expanded_libdir): Evaluate value of $libdir.
	* src/f-spot.exe.config.in: Use it.
	* src/f-spot.in (prefix, exec_prefix, libdir): New substs.
	[uninstalled]: Use check that's also valid when srcdir !=
	builddir.

2005-03-07  Larry Ewing  <lewing@novell.com>

	* src/ImportCommand.cs: be explict when disposing of thumbnails
	while importing.

2005-03-04  Larry Ewing  <lewing@novell.com>

	* NEWS: update news for release.

	* configure.in: bump version for release.

	* src/PhotoImageView.cs: regenerate the thumbnail if it is invalid.

	* src/f-spot.glade: remove the no html option in the export
	dialog.
	
	* src/AsyncPixbufLoader.cs: block and unblock the thumbnail thread
	when loading.

	* src/PixbufLoader.cs: wake up the worker if the count drops to
	zero.

	* src/IconView.cs: alway request at least two pages even if the
	scroll increment is smaller.

2005-03-02  Larry Ewing  <lewing@novell.com>

	* src/PixbufCache.cs: only count the image size if the image is
	loaded, that way way we don't throw away loaded images to make
	space for unloaded ones.

	* src/IconView.cs: fix the preload function bounds and make the
	fill work inwards.  Make the scroll function always request the
	visible region after the offscreen region to prime the cache
	properly.

	* src/PixbufCache.cs: refactor the cache, lock the processed queue
	separately from the times.  Add some missing locks, and Pulse in
	Reload.

2005-03-01  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: stop allocating a gc we never use.  Fix the
	preload data value;

	* src/IconView.cs: add logic to preload from the center of the
	area.  Reverse the traversal of the region rectangles depending on
	direction.  Fix the preload bounds.

	* src/PixbufCache.cs: make sure that we don't store pixbufs in
	entries that have already been disposed.  Fixes the giant leak
	that was bringing everything down.  Refactor the size handling
	bits, deal with them in dispose.

2005-02-28  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: Don't preload on expose, it just makes things
	slower.

	* src/PixbufCache.cs: lock while loading the pixbuf, the previous
	lock was not sufficient.

	* src/PixbufCache.cs: use the alternate move forward, lock around
	the size change when processing the pixbufs.

	* src/IconView.cs: clean up the preload logic a little more.

	* src/SlideView.cs: make the message more clear.

	* src/PhotoImageView.cs: fix some indentation.

	* src/FolderExport.cs: remove debug output.

	* src/ThumbnailGenerator.cs: remove unused block.

	* src/ColorDialog.cs: disconnect the signal handler when the
	dialog is destroyed.

2005-02-27  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: Dispose of more of the intermediate pixbufs.

	* src/PixbufCache.cs: copy the thubnail options when the
	ThumbnailGenerator has loaded an image.

	* src/MainWindow.cs: Allow hiding of the tag side bar.  Patch from
	Nat.

	* src/f-spot.glade: expose the sidbar vpaned from Nat.

2005-02-27  Hendrik Richter  <hendrik@gnome-de.org>

	* configure.in: Added "de" to ALL_LINGUAS.

2005-02-27  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: Remove the layout cache.

	* libgphoto2-sharp/libgphoto2-sharp.dll.config: add a config file
	for libgphoto2-sharp.

	* libgphoto2-sharp/Makefile.am: add the .config file to the build.

	* src/f-spot.exe.config.in: add the libexif entry to to the config
	file with the proper major version.
	
	* configure.in: set the major version of the libexif lib we are
	using at configure time.

	* src/PixbufUtils.cs: update libgnomeui import line, add config
	entry.

	* src/f-spot.exe.config.in: add a map entry for libgnomevfs.
	
	* src/gnomevfs: update the dll name to something more reasonable.

	* src/f-spot.exe.config.in: add a map entry for libgnomevfs.

	* src/main.cs: initialize gnome-program with the right arguments.

2005-02-24  Gary Ekker  <gekker@novell.com>

	* f-spot.desktop.in.in: add file for .desktop menu-spec support
	* Makefile.am: make f-spot.desktop installable
	* configure.in: add f-spot.desktop.in to AC_OUTPUT
	* icons/Makefile.am: make f-spot-logo.png installable

2005-02-24  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: use regions to compute the preload area.

	* src/SlideView.cs: increase the max interval for the slide
	timeout.

	* src/FolderExport.cs: write out the stylesheet from a resource,
	bump the page count.

	* icons/Makefile.am: add the stylesheet to the build.

	* icons/f-spot-simple-white.css: add static export stylesheet.

	* src/Makefile.am: add the stylesheet as a resource.

	* src/FolderExport.cs: clean up the html output a little.

	* src/GalleryRemote.cs: search the result string for the
	#__GR2PROTO__ not just the beginning of the string.
	
	* src/PhotoLoader.cs: use the thumbnail generated validation now.

	* src/Thumbnail.cs: make the default size tiny.

	* src/PixbufLoader.cs: add the blocking logic to the loader.

	* src/PhotoImageView.cs: use bilinear interp it looks nicer.

	* src/AsyncPixbufLoader.cs: lower the async loader threshold now
	that we have a scaled version loaded.

	* src/PhotoImageView.cs: when switching photos switch to a scaled
	version of the thumbnail first.

	* src/IconView.cs: preload only in the direction of motion.
	Decrease the amount the farther out we go.

	* src/PixbufCache.cs: Block the thumbnail generator from
	thumbnailing while there are pending icon requests.

	* src/ThumbnailGenerator.cs: add the ability to block.

	* src/PixbufUtils.cs: remove debug output.

2005-02-23  Adam Weinberger  <adamw@gnome.org>

	* src/f-spot.glade: fix one more typo.

2005-02-23  Larry Ewing  <lewing@novell.com>

	* src/ThumbnailGenerator.cs: remove debugging logic.

	* src/PixbufCache.cs: remove debug output.

	* src/SlideView.cs: bail out of the animation on the current frame
	if it is taking too long.

	* src/IconView.cs: clean up the preload code a little.  Do less
	preloading but do it a little smarter.

	* src/FolderExport.cs: set the description string properly.

2005-02-23  Adam Weinberger  <adamw@gnome.org>

	* src/CDExport.cs: fix typos.

	* src/VfsExport.cs: fix typos.

	* src/f-spot.glade: fix typos.

	* src/OriginalExport.cs: fix typos.

2005-02-22  Larry Ewing  <lewing@novell.com>

	* src/ImportCommand.cs: fix typo.

	* src/PhotoLoader.cs: make photo loader use the ThumbnailGenerator
	entry point.

2005-02-21  Larry Ewing  <lewing@novell.com>

	* src/ThumbnailGenerator.cs: dispose of the thumbnail after
	notifying listeners.

	* src/PixbufLoader.cs: allow the loaded handler to be overridden.

	* src/MainWindow.cs: fix the icon loading logic for drag items.

	* src/IconView.cs: expose the PixbufCache so that we can use it in
	the drag operation.

	* src/Makefile.am: remove original export from the Build add html
	export.

	* src/MainWindow.cs: make original export use FolderExport.

	* src/Exif.cs: remove small thinko in exif parsing.

	* src/FolderExport.cs: set the description string.

	* src/f-spot.glade: fix up folder export dialog.
	
	* src/FolderExport.cs: new file does original and static html
	export.  

	* NEWS: update for 0.0.9 release.

	* configure.in: bump for release.

2005-02-20  Larry Ewing  <lewing@novell.com>

	* src/f-spot.glade: remove several unsesd dialogs, update
	folder_export_dialog.

	* src/GalleryRemote.cs: remove debug output.

	* src/FormClient.cs: remoce some debug output.

	* src/f-spot.glade: remove some unused 

	* src/GalleryExport.cs: guard against a missing scale check.

	* src/f-spot.glade: rename some items.
	
	* src/ImportCommand.cs: center the dialog on the parent.

	* src/IconView.cs: remove unused variable.

	* libgphoto2-sharp/Object.cs: actually finalize things.

	* src/ImportCommand.cs: verify the import path don't leave the
	dialog until it comes up ok or is canceled.
	
	* src/ImportCommand.cs: deal with the attach tag better, add
	recurse check option.

	* src/AsyncPixbufLoader.cs: silence debug output.

	* src/ImportCommand.cs: set the window correctly.

	* src/PhotoImageView.cs: remove debug output.

	* src/CompatFileChooser.cs: add some logic to set the current
	directory.

	* src/ImportCommand.cs: get the start position correct.

	* src/f-spot.glade: update the import dialog layout a little better.

	* src/PixbufCache.cs: scale the pixbuf to fit.

	* src/MainWindow.cs: add writeline for camera exceptions.

	* src/IconView.cs: add back intptr constructor.

	* src/QueryView.cs: add back intptr constructor.

	* src/GPhotoCamera.cs: clean up the formatting a little.

	* libgphoto2-sharp/Object.cs: renable the Cleanup bits of the dispose call.

	* libgphoto2-sharp/: rewrite the bindings so that they work with
	newer mono versions.

	* src/GroupSelector.cs: use Gtk.Arrow instead of adding and image.

2005-02-19  Larry Ewing  <lewing@novell.com>

	* src/PhotoStore.cs: use the right Ifd when looking up the time.
	
	* src/SlideView.cs: disable the slide animation if processing the
	window update takes more than animate_max milliseconds.

	* src/InfoBox.cs: oops, change the display back a little.

	* src/InfoDisplay.cs: clean up slightly.

	* src/PixbufUtils.cs: remove the old ExifData stuff.

	* src/PhotoStore.cs: use Exif.cs.

	* src/Makefile.am: remove ExifData.cs.

	* src/DirectoryCollection.cs: use Exif.cs

	* src/PixbufData.cs: set closure data.
	
	* src/AsyncPixbufLoader.cs: add a Path property.

	* src/Exif.cs: make sure that we don't include nulls in string we
	try to generate.

	* src/ExifUtils.cs: use Exif.ExifData.

	* src/InfoBox.cs: clean up output a little.

	* src/PhotoStore.cs: use Exif.ExifData to get thumbnail.

	* src/PixbufUtils.cs: add GetThumbnail for Exif.ExifData.

	* src/IconView.cs: preload the scroll destination.

	* src/IconView.cs: fix typo in the request case.

	* src/IconView.cs: use ScaleDown when scaling the loaded pixbuf,
	the 64x64 icons start hitting the degenerate scaling cases.

	* src/PixbufCache.cs: put a limit of twice the max size before we
	start culling entries.

	* src/IconView.cs: bump the preload limit slightly.  Fix the
	request case, update the data on lookup.

	* src/PixbufCache.cs: bump the cache limit slightly. Fix the debug
	output.
	
	* src/PixbufCache.cs: don't shrink the cache until we are done
	with loading the queue, this gives us better responsiveness while
	scrolling.

	* src/IconView.cs: tweek the caching some more.  Try to rebuild
	thumbnails that don't exist.

	* src/PixbufCache.cs: make the potentially large remove more efficient.

2005-02-18  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: when scaling down scale the pixbuf if we can.

	* src/PixbufUtils.cs: make a shallow copy op.

	* src/PixbufCache.cs: remove debug output, it was slowing things down ;).

	* src/IconView.cs: improve the preload boundry at little, avoid annoying crash.

	* src/IconView.cs: remove extra debug output.
	

2005-02-18  Miguel de Icaza  <miguel@novell.com>

	* src/Makefile.am: Use the endorsed command line arguments. 

2005-02-18  Larry Ewing  <lewing@novell.com>

	* src/ThumbnailGenerator.cs: add some utility functions.

	* src/IconView.cs: refactor to use the new PixbufCache class.
	Preload on every expose.

	* src/PixbufCache.cs: integrate the cache and the loader into a
	single mru.  Include max size smarts.
	
	* src/IconView.cs: remove debug output.

2005-02-18  Tuomas Kuosmanen  <tigert@novell.com>

	* icons/f-spot-red-eye.png: new icon for red-eye.

2005-02-18  Larry Ewing  <lewing@novell.com>

	* src/Makefile.am: add the gnome-vfs volume stuff to the build.

	* src/gnomevfs/ObjectManager.cs: register the object with the
	proper assembly.

	* src/main.cs: call Gnome.Vfs.Vfs.Initialize.

	* src/MainWindow.cs: sensitize the edit_tag_button properly.

	* src/FileImportBackend.cs: use the recurse setting rather than
	hardcoding to true.

	* src/SlideView.cs: use Math.Round rather that truncation.

	* src/PixbufUtils.cs: add LoadThemeIcon and overload for Fit.

2005-02-17  Larry Ewing  <lewing@novell.com>

	* src/FileImportBackend.cs: reenable the thumbnail thread.

	* src/FileImportBackend.cs: handle file vs. directory imports with
	more grace.  Check for duplicates even on file imports.

	* src/FileImportBackend.cs: handle zero item imports differently.

	* src/ImportCommand.cs: fix zero item imports.

	* src/f-spot.in: remove debug spew.

	* src/TagMenu.cs: Add some new helpers to TagItem.
	
	* src/TagCommands.cs: tag the selection and use it to preselect
	the parent category (Based on a patch from Loz).  Use the new
	TagItem ctors to get images on the menus.
	
	* src/MainWindow.cs: pass the tag selection on the the Create
	command.
	
	* src/FileImportBackend.cs: rebuild the thumbnails on all the
	imported photos.

	* src/MainWindow.cs: clean up definitions.

	* src/QueryView.cs: remove IntPtr constructor.

	* src/IconView.cs: make some of the members protected for the
	alternate layout work.

	* src/ImportCommand.cs: don't pass a null item in the array.

2005-02-16  Larry Ewing  <lewing@novell.com>

	* src/Makefile.am: remove ExportCommand.cs from the build.

	* src/CDExport.cs: use GladeDialog.

	* src/CameraFileSelectionDialog.cs: use GladeDialog.

	* src/CameraSelectionDialog.cs: use GladeDialog.

	* src/ColorDialog.cs: use GladeDialog.

	* src/ExportCommand.cs: remove unused file.

	* src/DateCommands.cs: use GladeDialog.

	* src/PhotoVersionCommands.cs: use GaldeDialog.

	* src/TagSelectionDialog.cs: use GladeDialog.

	* src/MainWindow.cs: namespace the filesel stuff.

	* src/ImportCommand.cs: use GladeDialog.

	* src/Makefile.am: add GladeDialog to the build.

	* src/GladeDialog.cs: Helper class to handle the repetitive bits
	of the using glade to create dialogs.  Expose Dialog as a public
	property.

	* src/OriginalExport.cs: derive from GladeDialog.

	* src/TagCommands.cs: derive commands from GladeDialog.
	
	* src/FlickrExport.cs: derive from FSpot.GladeDialog.

	* src/VfsExport.cs: derive from FSpot.GladeDialog.

	* src/TagCommands.cs: derive from GladeDialog.
	
	* src/f-spot.glade: Tweak some values.

	* src/CameraFileSelectionDialog.cs: make the thumbnail progress
	cancel button stop the thumbnail download but still fill in the
	file entries.

	* src/CameraFileSelectionDialog.cs: fix typo.

	* src/CameraFileSelectionDialog.cs: add more progress info.  Fix
	the file renaming function.

	* src/GPhotoCamera.cs: make the exception more informative.

	* configure.in: integrate Loz's patch to improve version check for
	lcms.

	* src/GPhotoCamera.cs: thow an exception instead of silently
	failing

	* src/CameraFileSelectionDialog.cs: use a thread for the download
	task.

	* src/f-spot.glade start new dialog work.

	* src/FileImportBackend.cs: fix typo.

	* src/CameraFileSelectionDialog.cs: start rewriting the import
	code.  Select all files by default.

	* src/ImportCommand.cs: clean up the code a little.

2005-02-15  Larry Ewing  <lewing@novell.com>

	* configure.in: add a lame warning to configure when the lcms.pc
	file is missing.  This needs a proper version check.

2005-02-15  Martin Willemoes Hansen  <mwh@sysrq.dk>

	* src/StockIcons.cs: Marked strings for translation.

2005-02-15  Larry Ewing  <lewing@novell.com>

	* src/CameraFileSelectionDialog.cs: scale the image down and
	reorder the items.

	* src/f-spot.glade: remove extra space.

	* src/MainWindow.cs: fix another typo.

	* src/FlickrExport.cs: fix typo in string.

2005-02-14  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: tweak the strings a little.

	* src/f-spot.in: add a hack to load the libgphoto2-sharp assembly
	when running the uninstalled executable.

	* src/FlickrExport.cs: use HigMessageDialog.

	* src/PhotoVersionCommands.cs: translate strings.

	* src/RotateCommand.cs: clean up the message dialog strings.

	* src/CameraFileSelectionDialog.cs: use HigMessageDialog clean up
	messages a little.

	* libgphoto2-sharp/ErrorCodes.cs: expose the error via property.

	* src/TagSelectionDialog.cs: clean up formatting.

	* src/MainWindow.cs: use HigMessageDialog on more of the error
	dialogs.  Be more verbose in camera error messages.

	* src/f-spot-red-eye.png: ugly overhaul so it doesn't look like
	the icon, waiting for a better Icon from tigert.

	* src/TagMenu.cs: add an overload for a flat selection case.
h
	* src/ImportCommand.cs: work on cleaning up the UI.

	* src/f-spot.glade: clean up the layout slightly.

	* src/GPhotoCamera.cs: fixup formatting.

	* src/CameraSelectionDialog.cs: fix up style and translate column
	names.

	* src/CameraFileSelectionDialog.cs: fix up style and translate
	strings.

	* configure.in: bump the version number to 0.0.8.

	* src/MainWindow.cs: add import from camera.  This is the first
	pass at integrating Ewen Cheslack-Postava's excellent libgphoto2
	patch.
	
	* src/ImportCommand.cs: add tag setting overload to the import
	command.

	* src/f-spot.glade: add new dialog glade bits

	* src/GPhotoCamera.cs: add new binding for the gphoto cameras.

	* src/CameraSelectionDialog.cs: add new dialog to select the camera.

	* src/CameraFileSelectionDialog.cs: add new camera selection dialog.

	* src/TagSelectionDialog.cs: add selection dialog.

	* src/Makefile.am: add libgphoto2-sharp subdir to the build.

	* README: add libgphoto dep to the README.

	* src/PhotoStore.cs: clean up the debug output.

	* src/MainWindow.cs: update the toolbar state at startup.

	* src/IconView.cs: protect GetCellPosition from strange
	Allocations.

	* libgphoto2-sharp/: Import my changes to Ewen's gphoto bindings
	directly into the source for now.  Don't hook it into the build yet.
	
	* libfspot/f-jpeg-utils.c: always initialize the error_string to
	null.

	* src/JpegUtils.cs: make the string an out parameter.

	* src/IconView.cs: fix the tag centering.

	* src/MainWindow.cs: Pop up an import dialog if the db is empty.

	* src/Db.cs: add and empty property so we fire up the import
	dialog if we need to.

2005-02-13  Larry Ewing  <lewing@novell.com>

	* src/FileImportBackend.cs: clean up the constructor.

	* src/GroupSelector.cs: fix a redraw bug in the group selector.

	* src/MainWindow.cs: fix the IconView application/x-fspot-photos
	source so that dragging to the tags works again.  Turn off sync
	writes when importing.

	* src/AsyncPixbufLoader.cs: handle errors on write.

2005-02-06  David Sedeo <david@alderia.com>

	* src/f-spot.glade: New import dialog.

	* src/ImportCommand.cs: Handle the new import dialog.

	* src/FileImportBackend.cs: Add tag to the new imported photo.

2005-02-13  Larry Ewing  <lewing@novell.com>

	* src/OriginalExport.cs: add a some more status.

	* src/PixbufUtils.cs: add a scale to max size upscale bool and
	overload.  Remove buggy double copy.

	* src/OriginalExport.cs: Add gallery name entry and clean up
	scaling logic.  Make the scale option work and make the open
	option work.

	* src/f-spot.glade: rework the orignal dialog.

2005-02-12  Larry Ewing  <lewing@novell.com>

	* src/Db.cs: add a way to turn off synchronous writes.

	* src/ThumbnailGenerator.cs: throttle the thumbnail generation
	thread a little.

	* src/f-spot.glade: rework the ui for original and flickr export.

	* src/VfsExport.cs: refactor a little.

	* src/FlickrExport.cs: add scaling logic to upload.

	* src/FlickrRemote.cs: add scaling logic.

	* src/PixbufUtils.cs: move the scaling code here.

	* src/VfsExport.cs: hook up the ui for the scaling logic.

	* src/f-spot.glade: change the scaling option parameters.

	* src/VfsExport.cs: add basic scaling to vfs export.

2005-02-10  Larry Ewing  <lewing@novell.com>

	* src/ColorDialog.cs: remove the worker thread and disable the
	expose timeout.  Things appear to be fast enough without extra
	work.

	* src/MainWindow.cs: fix drag and drop of uri-lists.

2005-02-08  Larry Ewing  <lewing@novell.com>

	* configure.in: add it.po to the build thanks to Marco Colombo.

2005-02-07  Larry Ewing  <lewing@novell.com>

	* icons/Makefile.am: add the new image to the build.

	* src/StockIcons.cs: add the icon to the stock items.

	* icons/f-spot-red-eye.png: add placeholder image.

	* src/Makefile.am: add the red-eye icon to the resources.

	* src/PhotoView.cs: add in red eye button.

	* libfspot/f-pixbuf-utils.c: remove some debug spew.

	* src/PixbufUtils.cs: Implement RemoveRedeye by calling
	f_pixbuf_remove_redeye.

	* libfspot/f-pixbuf-utils.c:  add f_pixbuf_remove_redeye.

2005-02-06  Larry Ewing  <lewing@novell.com>

	* src/GroupSelector.cs: pass non null strings in the drawing code
	since it crashes some themes.

2005-02-05  Larry Ewing  <lewing@novell.com>

	* src/GroupSelector.cs: use a different Gtk.Button ctor that is in
	the gtk-sharp that ships with ubuntu.

2005-02-03  Larry Ewing  <lewing@novell.com>

	* TODO: update the TODO file with a new list of items.

	* src/PhotoImageView.cs: add Home/End/Space keybindings.

2005-02-02  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: add patch from Nat to make Return act like
	double click on the FocusCell.

2005-02-01  Larry Ewing  <lewing@novell.com>

	* configure.in: bump version number.

	* NEWS: update for 0.0.7 release.

	* libeog/eog-scroll-view.c: remove unused variables.

	* libeog/eog-image.c: fix return values remove unused vars.

	* libeog/eog-pixbuf-util.c: remove unused vars fix return values. 

	* src/MainWindow.cs: save updated exif info when unsharping.

	* src/PhotoView.cs: save updated exif info when cropping.

	* src/f-spot.glade: set the limits on saturation to something a
	little more sane.
	
	* libeog/image-view.c: add missing prototype patch from Garry
	Ekker.

	* libfspot/f-image-view.c: remove unused variable.

	* libfspot/f-pixbuf-utils.c: add missing include.

	* libfspot/f-pixbuf-save.c: add missing include.

	* libfspot/f-pixbuf-unsharp.c: add missing include.

2005-01-31  Larry Ewing  <lewing@novell.com>

	* src/GroupSelector.cs: make sure the scroll bounds are updated
	correctly on resize and manual scrolling.

2005-01-30  Larry Ewing  <lewing@novell.com>

	* src/GroupSelector.cs: add scrolling delays so that you can hold
	down the button and get scrolling.

	* src/Tiff.cs: add a little more code to the parser.

	* src/GroupSelector.cs: update the RangeType.Min to be a little
	more sane.

	* src/GroupSelector.cs: make the scroll buttons do something,
	update their sensitivity properly.

	* src/MainWindow.cs: set the mode to to RangeType.Min.

	* src/GroupSelector.cs: add scroll buttons.

2005-01-29  Larry Ewing  <lewing@novell.com>

	* src/PixbufUtils.cs: dispose the dat once it is loaded.

	* src/PhotoView.cs: use CompletePixbuf to make sure we get a
	completely loaded pixbuf.

	* src/Exif.cs: add a few missing tags to the list.

	* src/InfoDisplay.cs: fix up the output format a little.

2005-01-28  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: add bounds check to CellAtPosition.  Fixes #165465.

2005-01-28  Alexander Shopov  <ash@contact.bg>

	* configure.in (ALL_LINGUAS): Added "bg" (Bulgarian)

2005-01-27  Larry Ewing  <lewing@novell.com>

	* src/Tiff.cs: add more features.

	* src/Tiff.cs: new managed Exif/Tiff header parser.	

	* src/JpegHeader.cs: test out parsing of jpeg headers using the
	tiff parser.

2005-01-26  Larry Ewing  <lewing@novell.com>

	* src/PixbufUtils.cs: move the get orientation logic over to the
	new Exif structure.

	* src/Exif.cs: add some accessors for the entry data, restructure
	clases to work around crappy libexif object design.

	* src/Exif.cs: clear existing data before calling initialize
	otherwise initialize will short circuit.

	* src/PixbufUtils.cs: use simple command forms.

	* src/Exif.cs: add more SetData overloads, override broken libexif
	datasetting.

	* src/ColorDialog.cs: use the new Exif.cs to correctly copy exif
	data when creating a version.

	* src/PixbufUtils.cs: set more exif tags now that we can.

	* src/Exif.cs: Add more features, fix bugs.

	* Makefile.am: add the new exif wrapper to the build.
	
	* src/InfoDisplay.cs: use the new exif wrapper.
	
	* src/Exif.cs: add a new libexif wrapper that covers more of the
	library.

2005-01-25  Larry Ewing  <lewing@novell.com>

	* src/ImageView.cs: pass the cms transform as a HandleRef.

	* src/Cms.cs: use handleref not just IntPtr, clean up the
	finalizer.

	* src/MainWindow.cs: update the toolbars on state change.

	* src/AsyncPixbufLoader.cs: handle null pixbufs a little better.

	* src/Makefile.am: add HigMessageDialog.cs.
	
	* src/HigMessagesDialog.cs: new file imported from Tomboy.

	* src/MainWindow.cs: use the new HigMessageDialog for the
	confirmation dialogs from Loz.

	* src/PixbufUtils.cs: add SaveJpeg and ScaleToAspect.

	* src/MainWindow.cs: use the togglebutton overload now that mike
	is working on a fix.

	* libfspot/Makefile.am: add f-pixbuf-save to the build.

	* libfspot/f-pixbuf-save.c: add a save routine that lets you save
	jpeg markers.

	* libeog/Makefile.am: add LCMS_CFLAGS from Loz.

	* configure.in: add pkg-config check for lcms from Loz.

2005-01-24  Larry Ewing  <lewing@novell.com>

	* src/ExifData.cs: add thumbnail saving and an empty ctor.

2005-01-23  Larry Ewing  <lewing@novell.com>

	* src/GroupSelector.cs: add a SetLimits overload that allows the
	limit to be set without senting out update notification for the
	case when it is clear the bounds have changed.

	* src/MainWindow.cs: remove the update hack.

	* src/GroupSelector.cs: make sure we reset the bounds if the size
	of the timeline changes.
	
	* src/GroupSelector.cs: fix the expose area computation.

2005-01-22  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: tweak the import path naming.

	* src/ImportCommand.cs: make last_import_path a read only property
	called ImportPath;

	* src/PixbufLoader.cs: use separate locks for the main queue and
	the processed queue;

	* src/IconView.cs: 

2005-01-22  David Sedeo <david@alderia.com>

	* src/MainWindow.cs: If there are a correct import, remember the path.

	* src/ImportCommand.cs: Set and get the path of the file selector.

2005-01-22  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: refactor a little more.

	* src/MainWindow.cs: protect the tag drop from out of range items.

	* src/IconView.cs: more cleanups, optimizations.

	* src/IconView.cs: Clean up and speed up IconView drawing code,
	work around Nat's drawing bug.

	* src/PhotoStore.cs: use SaveAtomic.

	* src/PixbufUtils.cs: add SaveAtomic.

2005-01-21  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: add basic confirmation dialogs based on a
	patch from Laurence.  Closes #156441
	
	* src/MainWindow.cs: handle out of range photos more gracefully.

	* src/ColorDialog.cs: handle invalid photos better.

	* src/PhotoView.cs: desensitize buttons if the photo isn't valid.

	* src/OriginalExport.cs: fix the uri case a little.

	* src/OriginalExport.cs: only create a tempdirectory if we need
	it.  Use hack to create tempdirectory name.

	* src/OriginalExport.cs: store the date in a format original-0.9
	understands.

	* src/f-spot.glade: add orignal export dialog.

	* src/MainWindow.cs: add original export handler.

	* src/Makefile.am: add OriginalExport to the build.
	
	* src/OriginalExport.cs: add new file from Alessandro Gervaso to
	export to Jakub's original gallery.

2005-01-20  Larry Ewing  <lewing@novell.com>

	* src/Makefile.am: add new resources.

	* icons/: add icons for stock items still missing them.
	
	* configure.in: check for mono.pc too.

	* src/PixbufUtils.cs: new GetThumbnail call.

	* src/PhotoStore.cs: use the new util to load a thumbnail from
	exif data (it handles orientation).

	* src/CDExport.cs: learn how to spell.

	* src/SlideView.cs: return cycling behavior so it matches earlier
	versions.
	
	* src/SlideView.cs: fix a bug that was caused the slideshow to
	stop working.  This bug was exposed by a branch optimization bug
	in mono

	* src/ThumbnailGenerator.cs: remove debug output.

	* src/PhotoView.cs: remove debug output.

	* src/FileImportBackend.cs: remove debug output.

	* configure.in: add configure check for the various mono dlls we
	require.

	* configure.in: update version in preparation for release.

	* NEWS: update for release.

	* src/AsyncPixbufLoader.cs: don't fire the updated signal if there
	is no updated region.

	* src/DirectoryCollection.cs: Make directory collection not throw
	an exception if the directory doesn't exist.  In reality it
	probably should throw one but it is difficult to deal with
	properly right now.
	
	* src/TagCommands.cs: add icon selection.  Clean up some
	image_view handling code.  Add evil emblem directory hack.

2005-01-19  Larry Ewing  <lewing@novell.com>

	* src/PhotoStore.cs: use ThumbnailGeneratore where appropriate.

	* src/PixbufUtils.cs: remove GenerateThumbnail.

	* src/ThumbnailGenerator.cs: add Create and Save methods.

	* src/ThumbnailCommand.cs: use thumbnail generator.

	* src/PixbufUtils.cs: correct the calculation of the area to walk.

	* src/AsyncPixbufLoader.cs: use the chunk_timeout value.

	* src/PhotoStore.cs:  fix a bug that prevents you from adding a
	tag to a photo without a tag.

2005-01-18  Larry Ewing  <lewing@novell.com>

	* NEWS: add new items.

	* configure.in: update version number in preparation for release.
	
	* src/Util.cs: add a ToogleButton helper that doesn't currently work.

	* TODO: remove some of the items that work now.

	* src/MainWindow.cs: use the new timeadaptor function for the time
	lookup.

	* src/TimeAdaptor.cs: move the search function into a wrapper.

	* src/ExifData.cs: add a Save method that returns a byte[] array.

2005-01-17  Larry Ewing  <lewing@novell.com>

	* src/PhotoStore.cs: delay the creation some of the internal
	structures until they are needed.

	* src/MainWindow.cs: clean up the mode setting and page switching
	code.

	* src/ExifData.cs: remove debug spew.

2005-01-17  Mike Kestner  <mkestner@novell.com>

	* configure.in : check for the specific gtk-sharp deps.

2005-01-17  Larry Ewing  <lewing@novell.com>

	* src/ThumbnailGenerator.cs: don't remove the files ahead of time
	SaveThumbnail does a better job.

	* src/PixbufUtils.cs: catch missing files here for now.

	* src/PhotoLoader.cs: Handle missing files with a lame exception
	for now.

	* src/IconView.cs: use the ThumbnailGenerator if the icon is
	invalid.

	* src/PhotoLoader.cs: use ThumbnailGenerator, split out hte
	validation logic.

	* src/AsyncPixbufLoader.cs: reset damage in the right place.

	* src/Makefile.am: add ThumbnailGenerator to the makefile.

2005-01-16  Larry Ewing  <lewing@novell.com>

	* src/PixbufLoader.cs: make handle request virtual so that we can
	override it in ThumbnailGenerator.

	* src/ThumbnailGenerator.cs: new class to asynchronously update
	thumbnails.

	* src/ThumbnailCache.cs: clean up initialization, use CopyOptions.

	* src/PixbufUtils.cs: copy options in more of the ops.

	* src/PhotoImageView.cs: diable the copying and filling in
	progress.

	* src/InfoBox.cs: add strategically placed newlines for now.

	* src/PixbufUtils.cs: add some helper fucntions. remove some old
	unused functions.

	* src/AsyncPixbufLoader.cs: allow the loader to disable thumbnail
	validation.

	* src/Global.cs: wrap the base/text setting in an exception
	handler so that things will stil mostly work with old gtk-sharp
	versions.

	* src/PixbufUtils.cs: add border to drag Icons and center them in
	their space.

2005-01-15  Larry Ewing  <lewing@novell.com>

	* src/AsyncPixbufLoader.cs: turn off copy_data. in AreaPrepared it
	isn't useful.

	* src/PixbufUtils.cs: break the working region up into a 256x256
	subregion and use a temporary buffer to improve the locality of
	the rotation.  Speeds things up a _lot_.

	* src/IconView.cs: disable the call to
	Gnome.Thumnail.ScaleDownPixbuf it leaks really badly

	* src/f-spot.glade: give the infobox a little more space.

	* src/CompatFileChooser.cs: change the version check now that
	return value has changed.

	* src/GroupSelector.cs: fix the weighting.

	* src/MainWindow.cs: set multiple icons when dragging more than
	one image.

	* src/GroupSelector.cs: make snapping to filled positions work.

2005-01-14  Larry Ewing  <lewing@novell.com>

	* src/PixbufUtils.cs: handle a few more cases in Transform and
	copy.

	* src/AsyncPixbufLoader.cs: increase the latency, on both
	notifications and reading, gives a percieved speed increase.

	* src/ExifData.cs: try the 0.5 version first.

	* src/PhotoView.cs: expose the PhotoImageView via the view
	property.

	* src/f-spot.glade: add the new color dialog version, adjust the
	mainwindow size.

	* src/IconView.cs: use the Global background color.

	* src/ColorDialog.cs: make a new version of the color dialog that
	can work on it's own.

	* src/Global.cs: Move the color setting function here for now.

	* src/ImageView.cs: null protect the tranform setting routine.

	* src/Makefile.am: add SimpleCalendar.cs to the build.

	* src/SimpleCalendar.cs: make sure we don't get spurious month
	changed events.

	* src/MainWindow.cs: hook up a SimpleCalendar for now.

	* libfspot/f-pixbuf-utils.c (f_pixbuf_copy_with_orientation): fix
	again.

	* src/TagStore.cs: make sure we don't try to fire null events.

	* src/PixbufUtils.cs: small cleanups, remove some debug output.

	* libfspot/f-pixbuf-utils.c (f_pixbuf_copy_with_orientation): fix
	some of the orientation logic.

2005-01-13  Larry Ewing  <lewing@novell.com>

	* src/SimpleCalendar.cs: add a simple calendar view hack.  This
	probably won't end up being used but I didn't want to lose the
	source.

	* src/Makefile.am: add f-spot.exe.mdb to CLEANFILES.. 

	* configure.in: remove the 0.6 check now that it we can handle it.

	* src/ExifData.cs: wrap the get_data function from both 0.5 and
	0.6 and fall back to 0.5 if 0.6 fails.

	* src/f-spot.exe.config.in: remove the libexif dll map since we
	actually want to pick up whatever is installed now..

	* libfspot/f-pixbuf-utils.c (f_pixbuf_copy_with_orientation): new
	function to do the orientation transform on a pixbuf.

	* src/PixbufUtils.cs: wrap the new f_pixbuf_copy_with_orientation.

	* src/GalleryExport.cs: Destroy the dialog once the upload starts.

	* src/TagStore.cs:
	* src/MainWindow.cs:
	* src/TagSelectionWidget.cs:  Integate Loz's patch
	frohttp://bugzilla.gnome.org/show_bug.cgi?id=158490

	* src/TagCommands.cs: add thumbnails for emblems.

	* src/f-spot.glade: fix up the Icon editing display.

	* src/Util.cs: use the return value for the check rather than a null value.

2005-01-12  Larry Ewing  <lewing@novell.com>

	* src/Makefile.am: add CDExport.c to build.
	
	* src/VfsExport.cs: only open the location if a photo has been
	transfered.

	* src/MainWindow.cs: add cd export handler.

	* src/f-spot.glade: add cd export dialog.

	* src/CDExport.cs: add Cd export dialog.

	* src/f-spot.glade: add ellipsis for menu items that open dialog.

	* src/PixbufUtils.cs: only call setoption if the value is not null.

	* src/: silence a bunch of compiler warnings.

	* src/PixbufUtils.cs: wrap all the file loading in the exception handler.

	* src/MainWindow.cs: call close on Destroy.

	* src/PhotoImageView.cs: handle missing images when Loading.

	* src/PhotoStore.cs: intentionally make exif generated thumbnails invalid 
	so that when we load them we know to regenerate them.

	* src/IconView.cs: remove the size from the PixbufLoader
	constructor.

	* src/PixbufLoader.cs: remove scaling from the constructor.

2005-01-12  Raja R Harinath  <rharinath@novell.com>

	* src/Makefile.am (F_SPOT_CSDISTFILES): Rename from
	F_SPOT_CSFILES.  Remove Defines.cs.
	(EXTRA_DIST, F_SPOT_CSFILES): Use it.

2005-01-12  Larry Ewing  <lewing@novell.com>

	* src: move the changed events from IPhotoCollection to IBrowsable
	collection.  Fixup handlers.

2005-01-11  Larry Ewing  <lewing@novell.com>

	* src/f-spot.glade: add new check Items for VfsExport and
	FlickrExport.

	* src/VfsExport.cs: handle the open_check.

	* src/FlickrExport.cs: handle the open_check.

	* src/MainWindow.cs: add handler for timeline selector.

	* src/f-spot.glade: add memonics to menu items add timeline view
	option.

2005-01-10  Larry Ewing  <lewing@novell.com>

	* src/VfsExport.cs: add more progrss info.

	* src/VfsExport.cs: Add the start of progress info.

	* src/VfsExport.cs: Add some hooks try out the auth bindings.

	* src/gnomevfs: import all of the gnome-vfs bindings from gtk-sharp
	1.9 since we can't depend on gtk-sharp 1.9 until it is released.
	
	* src/Makefile.am: add VfsExport.cs back into the build and copy
	the current version of the gtk-sharp 1.9 gnome-vfs bindings into
	the build

	* src/MainWindow.cs: add a ViewDirectory handler using DirectoryCollection.

	* src/PixbufUtils.cs: handle return null on error.

	* src/FileImportBackend.cs: get the version name check correct.
	
	* src/PhotoStore.cs: remove thumbnailing bug introduced yesterday.

	* src/FileImportBackend.cs: add duplicate detection by directory.

	* src/PhotoStore.cs: add a directory path query.

2005-01-09  Larry Ewing  <lewing@novell.com>

	* src/PreviewPopup.cs: remove some debug spew.

	* src/PhotoQuery.cs: add Items property.

	* src/PhotoStore.cs: make Photo implement IBrowsableItem.

	* src/IPhotoCollection.cs: make IPhotoCollection inherit from
	IBrowsableCollection.

	* src/PhotoArray.cs: Make add Items Property.

	* src/Makefile.am: add new files.
	
	* src/IBrowsableItem.cs: new collection and item interfaces to
	allow viewing non-Photo items in an IconView.

	* src/IconView.cs: make Collection an IBrowsableCollection not a
	PhotoCollection.

	* src/DirectoryCollection.cs: IBrowsableCollection and
	IBrowsableItem implmentations for handling files outside of the
	database.

	* src/Defines.cs.in: define PACKAGE.
	
	* src/MainWindow.cs: use package define in about box.

	* src/ExifData.cs: convert libexif.so DllImport references to
	libexif-0.5.dll

	* src/f-spot.exe.config.in: map libexif-0.5.dll to libexif.so.9
	which should be 0.5.x so that people can run with libexif-0.6
	installed as long as 0.5 is also installed.

	* configure.in: limit libexif to < 0.6.0 

	* src/f-spot.exe.config.in: fix the broken commit.

	* src/TimeAdaptor.cs: remove some debug output.

	* configure.in: add f-spot.in and fspot.exe.config.in to the
	targets.  Rename makefile.am to Makefile.am

	* src/f-spot.in: remove LD_LIBRARY_PATH crap.

	* src/f-spot.exe.config.in: added.

	* src/f-spot.exe.config: removed.

	* src/makefile.am: removed.

	* src/Defines.cs.in: add verison here.

	* src/Makefile.am: rename make f-spot.exe.config.in, move library
	path lookup into the .config instead of in the script.

	* src/MainWindow.cs: use Delay for the idle handler, bump the
	version number pending a proper fix.

	* src/ThumbnailCommand.cs: be explicit about disposing the new thumbnail.
	
	* src/PixbufUtils.cs: be explicit about disposing the non rotated
	image.

2005-01-08  Larry Ewing  <lewing@novell.com>

	* src/PhotoStore.cs: use the PixbufUtils thumbnail generator.

	* src/PixbufUtils.cs: add thumbnail generator.

	* src/f-spot.glade: replace the toolbar with a named vbox so we
	can pack a toolbar in later.

	* src/MainWindow.cs: use the toolbar utils.

	* src/Util.cs: some gross toolbar helper bits.

2005-01-07  Larry Ewing  <lewing@novell.com>

	* configure.in: revert to gtk-sharp 1.0.

	* src/makefile.am: revert to gtk-sharp 1.0 disable VfsExport for now.

	* src/Util.cs: revert to gtk-sharp 1.0 interfaces.

	* src/StockIcons.cs: revert to gtk-sharp 1.0 interfaces.

	* src/PrintDialog.cs: revert to gtk-sharp 1.0 interfaces.

	* src/PreviewPopup.cs: revert to gtk-sharp 1.0 intefaces.

	* src/MainWindow.cs: disable vfs for now.

	* src/StockIcons.cs: add the new icons.

	* src/MainWindow.cs: start hooking up the new toolbar items.

	* src/f-spot.glade: add some more elements.

	* src/makefile.am: include the new images in the resource.

	* icons/f-spot-fullscreen.png: added.

	* icons/f-spot-slideshow.png: added.

	* icons/Makefile.am: add the new files.

	* src/f-spot.glade: add a few more items fix window title.

	* src/QueryView.cs: invalidate the thumbnail if we see
	ItemChanged.

2005-01-06  Larry Ewing  <lewing@novell.com>

	* src/PhotoView.cs: commit the description change in a delay,
	check to see if the text has changed before setting it.  Commit
	any pending changes before switchi

	* src/PhotoImageView.cs: use -1 rather than 0 to reset.

	* src/VfsExport.cs: fix the uri handling a little.  This still
	isn't working completely correctly but it does work for some
	things.

	* src/AsyncPixbufLoader.cs: fix up the dispose logic some more.

	* src/StockIcons.cs: add stock items for all the new icons.

	* src/PhotoView.cs: use f-spot-edit-image for the adjustment
	dialog icon.

	* src/main.cs: change the window icon to f-spot-logo.png.

	* src/makefile.am: add new icons to the resource.

	* icons/Makefile.am: add new icons.

	* src/f-spot.glade: hook up the toolbar items.

	* src/StockIcons.cs: add accels.

	* src/MainWindow.cs: remove debug spew.

	* src/PixbufUtils.cs: remove helper that is covered by a ctor now.

	* src/PhotoPopup.cs: use the simpler menu item util function.

	* src/StockIcons.cs: register stock items not just images.

	* src/Util.cs: Make the menu helpers work with stock items.

	* src/ThreadProgressDialog.cs: remove some using statements to
	disambiguate the namespace so the old mono versions don't
	complain.

	* src/GalleryRemote.cs: set autorotate to true for gallery.

	* src/f-spot.glade: set the pane packing correctly.

2005-01-05  Larry Ewing  <lewing@novell.com>

	* src/PhotoView.cs: play with some of the Padding.

	* src/f-spot.glade: start moving the items around.  More to come soon.
	
	* src/MainWindow.cs: start moving to the new layout.  Fix the
	Active item to use the on the icon view when it is set (this all
	needs more cleanup but this is a start).

	* src/AsyncPixbufLoader.cs: stop the delay when closing.
	
	* src/AsyncPixbufLoader.cs: make sure that we have a pixbuf before
	we try to dispose it.

	* src/VfsExport.cs: s/Dup/Clone now that the binding has been fixed.

	* src/GroupSelector.cs: fix box drawing bounds, make min box width 1.

2004-12-30  Satoru SATOH <ss@gnome.gr.jp>

	* configure.in: [ALL_LINGUAS] Added Japanese (ja) again.

2004-12-26  Larry Ewing  <lewing@novell.com>

	* src/f-spot.glade: add stock icon patch from Laurence.  Fixes 
	158951.

	* src/AsyncPixbufLoader.cs: integrate the spirit of a patch from
	Loz to quiet some warnings on shutdown. Fixes 158944.

2004-12-24  Larry Ewing  <lewing@novell.com>

	* src/AsyncPixbufLoader.cs: make LoadToDone and LoadToAreaPrepared
	check the state before reading.

2004-12-23  Larry Ewing  <lewing@novell.com>

	* src/SlideView.cs: call dispose on the pixbufs more in more
	places.

	* src/AsyncPixbufLoader.cs: Implement IDisposable clean up close
	method.
	
	* src/PhotoImageView.cs: call dispose on the AsyncPixbufLoader.

	* src/AsyncPixbufLoader.cs: excplicitly call displose on the
	loader to attempt to keep the memory from growing out of control.

	* src/PrintDialog.cs: disable the extended print dialog for now
	until it can be implmented properly.

	* configure.in: bump the version number, fix the pkg-config check.

	* src/f-spot.glade: add the new menu items.

	* src/PhotoView.cs: call ColorDialog with the right arguments.

	* src/ColorDialog.cs: remove unused ctor param.

	* src/MainWindow.cs: Add a basic unsharp mask ui.  Add a
	ColorDialog menu item.

	* src/GalleryExport.cs: use the global base directory.

	* src/main.cs: use the gobal directory stuff.

	* configure.in: fix the LIBLCMS define.

	* src/makefile.am: add Global.cs

	* src/PhotoImageView.cs: add a CompletePixbuf interface that
	ensures the Pixbuf is completely loaded.

	* src/AsyncPixbufLoader.cs: Make Load no Longer return a Pixbuf
	add LoadToAreaPrepared and LoadToDone sync methods.

	* src/ColorDialog.cs: remove orig image use the
	view.CompletePixbuf.

2004-12-22  Larry Ewing  <lewing@novell.com>

	* src/f-spot.glade: change the colordialog now that it uses the
	PhotoImageView (yes I still hate that name).

	* src/PixbufUtils.cs: add an overload where you can pass just the
	transform.

	* src/PhotoView.cs: namespace ColorDialog now that it has changed.

	* src/ColorDialog.cs: use the image view here so that zooming and
	scrolling work.

	* configure.in: add a check for liblcms since we can't count on 
	a .pc file yet.
	
	* configure.in: [ALL_LINGUAS] removed Japanese (ja) because the po
	file wasn't actually added.

2004-12-21  Satoru SATOH <ss@gnome.gr.jp>

	* configure.in: [ALL_LINGUAS] Added Japanese (ja).

2004-12-19  Larry Ewing  <lewing@novell.com>

	* src/FlickrRemote.cs: Parse the xml results of upload and Login.
	Make upload return the photoid.

	* src/FlickrExport.cs: handle Login errors a little more gracefully.

	* src/FlickrExport.cs: make the passwd entry a little prettier and
	turn off visibility.

2004-12-18  Larry Ewing  <lewing@novell.com>

	* src/FlickrRemote.cs: add a progressItem to the object.

	* src/FlickrExport.cs: Add progress info to the upload.

2004-12-17  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: hook up the new event handlers.
	
	* src/makefile.am: add FlickrExport.cs to the build.

	* src/VfsExport.cs: Xfer the src not the target.

	* src/FlickrRemote.cs: add ExportTags setting.
	
	* src/FlickrExport.cs: add the start of a Flickr upload dialog.

	* src/f-spot.glade: add the Flickr export dialog, fix some of the
	other dialogs add a mockup for a combined export dialog.

2004-12-16  Larry Ewing  <lewing@novell.com>

	* src/GalleryExport.cs: clean up the interface a little.

	* src/f-spot.glade: add the new dialog.

	* src/VfsExport.cs: add the start of a new export method and inteface.

	* src/makefile.am (F_SPOT_CSFILES): add VfsExport.cs.

	* src/MainWindow.cs: add new export option.

2004-12-15  Larry Ewing  <lewing@novell.com>

	* src/FullScreenView.cs:  revert accidental change.

	* src/GroupSelector.cs: use the expose event region not the area.

	* src/makefile.am: link against gtk-sharp-2.0.

	* src/ColorDialog.cs: fix for gtk-sharp-2.0.
	
	* src/PrintDialog.cs: fix for 2.0.
	
	* src/TagCommands.cs: fix for 2.0.

	* src/PreviewPopup.cs: add the new keyword for now.

	* src/ImportCommand.cs: fix for gtk-sharp-2.0.

	* src/FileImportBackend.cs: make it build with gtk-sharp-2.0.

	* src/DateCommands.cs: disambiguate the Dialog call.

	* src/ImageView.cs: add a property for the Cms.Transform.

	* libeog/image-view.c: make sure we avoid the shortcut if we have
	a transform.

2004-12-14  Larry Ewing  <lewing@novell.com>

	* configure.in: add ca.po.

	* libeog/image-view.c: add the ability to apply a cms transform to
	the image. 

2004-12-12  Larry Ewing  <lewing@novell.com>

	* po/ca.po: add ca.po from Jordi.

2004-12-10  Larry Ewing  <lewing@novell.com>

	* src/GalleryRemote.cs: add exceptions to the Gallery code so that
	we can handle them gracefully in the export dialog.

	* src/TagCommands.cs: update the spinbutton and label when the
	photo changes.

	* src/ImageView.cs: return a zero width rectangle if Pixbuf ==
	null.  This shouldn't ever happen but a null pixbuf is a valid
	state so we should handle it.

	* src/PhotoImageView.cs: use the new AreaPrepared event to
	initialize the next image with the previous image here in the
	PhotoImageView where it should be.

	* src/AsyncPixbufLoader.cs: add an event for AreaPrepared so that
	we can safely set the Pixbuf and initialize it with the data we
	want in this event.

2004-12-09  Larry Ewing  <lewing@novell.com>

	* src/AsyncPixbufLoader.cs: initialize the next image with the
	previous image.

	* src/PhotoView.cs: hook the tag_view back up.

	* src/MainWindow.cs: kill UpdateViews use query.MarkChanged for
	now.  Notification needs to be moved down to the photo store level
	(or perhaps dbitem).

	* src/FullScreenView.cs: add a PhotoPopup as a right click item.
	
	* src/MainWindow.cs: hack in fsview notification in a few more
	places this needs to be cleaned up.
	
	* src/PhotoPopup.cs: not worth mentioning.
	
	* src/MainWindow.cs: a little more refactoring.  Make fsview
	change the selection and the CurrentPhoto.

	* src/MainWindow.cs: refactor the current_photo_idx crap out of
	the way.

2004-12-06  Larry Ewing  <lewing@novell.com>

	* src/PixbufUtils.cs: add GetOrientation call for now.  Make
	AspectLoader use the orientation info.
	
	* src/MainWindow.cs: add Loz to Authors.

	* src/AsyncPixbufLoader.cs: Use PixbufUtils.GetOrientation here.

	* src/PhotoLoader.cs: Use the orientation tag when loading images.

2004-12-04  Sigurd Gartmann  <sigurd-translate@brogar.org>

	* configure.in: [ALL_LINGUAS] Added Norwegian Bokml (nb and no)

2004-12-03  Larry Ewing  <lewing@novell.com>

	* src/PhotoImageView.cs: use the area updated event from the
	AsyncLoaders, stop poking the Gdk.PixbufLoader directly.

	* src/PixbufUtils.cs: update the orientation code.

	* src/AsyncPixbufLoader.cs: use the new orientation stuff.

	* src/PixbufUtils.cs: start adding orientation support.

	* src/ImageView.cs: fix ImageToWindowCoords so that it actually
	works.

2004-12-03  Adam Weinberger  <adamw@gnome.org>
M
	* configure.in: Added en_CA to ALL_LINGUAS.

2004-12-02  Larry Ewing  <lewing@novell.com>

	* src/IPhotoCollection.cs: add Changed and ItemChanged events.

	* src/PhotoQuery.cs: move into FSpot namespace replace reload
	event with PhotoCollection events.
	
	* src/ColorDialog.cs:
	* src/DateCommands.cs:
	* src/DirectoryAdaptor.cs:
	* MainWindow.cs:
	* PhotoImageView.cs:
	* PhotoView.cs:
	* QueryView.cs:
	* TagCommands.cs:
	* TimeAdaptor.cs: Update for above name and namespace changes.

	* src/PhotoTagMenu.cs: mark string for translation.

2004-12-01  Larry Ewing  <lewing@novell.com>

	* src/POTFILES.in: add the new files.

	* src/PhotoPopup.cs: mark strings for translation.

	* src/TagCommands.cs: mark strings for translation.

	* src/InfoBox.cs: mark strings for translation.

	* src/RotateCommand.cs: mark more strings for translation.

	* src/GalleryExport.cs: set the button text to Ok.  Translated the
	dialog strings.

	* src/ThreadProgressDialog.cs: expose a string for the button
	label.

	* src/ProgressDialog.cs: translate the  strings.  Use stock strings.

	* src/MainWindow.cs: remove the using Mono.Posix call and use
	explicit paths.

	* src/RotateCommand.cs: add Catalog.GetString call.

	* po/POTFILES.in: add src/RotateCommand.cs

	* src/MainWindow.cs: use photo.DefaultVersionUri.

	* src/PhotoLoader.cs: use PathToFileUri.

	* src/IconView.cs: add and ifdefed fastpath for scaling (currently
	true).  Convert the thumbnail calls to using DefaultVersionUri.

	* src/Util.cs: use UriList.PathToFileUri where appropriate.  make
	PathToFileUri static.

	* src/PhotoStore.cs: add Photo.DefaultVersionUri.  Use
	UriList.PathToFileUri where appropriate.

2004-12-01  Martin Willemoes Hansen  <mwh@sysrq.dk>

	* src/MainWindow.cs:
	  Added code to display translator credits
          Added myself to author-credits

2004-12-01  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "sv" to ALL_LINGUAS.

2004-11-30  Martin Willemoes Hansen  <mwh@sysrq.dk>

	* AUTHORS: Converted to UTF-8,
	  added myself
	* configure.in: Added Defines.cs.in
	* src/Defines.cs.in: Added
	* src/MainWindow.cs: Call Mono.Posix.Catalog.Init to setup
	  correct dir for locales
	* src/.cvsignore: Add3ed Defines.cs
	* src/makefile.am: Added reference to Mono.Posix
	* src/makefile.am: Added Defines.cs to the list of sources
	* configure.in: Added Danish translation.
	* po/ChangeLog: Ditto.
	* po/da.po: Ditto.
	* po/.cvsignore: Added

2004-11-30  Larry Ewing  <lewing@novell.com>

	* src/PhotoView.cs: clean up some of the update code and current
	photo code, chain off of the PhotoImageView change not the the
	query changes.

	* src/MainWindow.cs: use PhotoView.Reload not update.

	* src/JpegUtils.cs: make the error message a ref, newer mono
	versions seem to be unhappy about marshalling an out there.

2004-11-29  Larry Ewing  <lewing@novell.com>

	* src/FullScreenView.cs: set decorated to false.

2004-11-23  Larry Ewing  <lewing@novell.com>

	* src/PhotoImageView.cs: connect to the query change notification
	signals.

2004-11-22  Jon Trowbridge  <trow@ximian.com>

	* src/Util.cs: Added code to more correctly map paths to file
	Uris.  This fix allows the --import to work with non-absolute
	paths.

	* src/main.cs: Wait to change the current directory until
	immediately before we call Program.Run.  Also replaced some string
	concatenations with calls to Path.Combine.

2004-11-20  Larry Ewing  <lewing@novell.com>

	* src/PreviewPopup.cs: mark the key presses as handled.

	* src/PhotoImageView.cs: remove the update notifcation if we get
	destroyed before the image is done loading.

	* src/MainWindow.cs: don't show the full view until we've set the
	image.
	
	* src/PhotoImageView.cs: fix typo.

	* src/MainWindow.cs: quick hack to let f turn on fullscreen mode.

	* libeog/image-view.c (image_view_key_press_event): disable the f
	key handler.

	* src/AsyncPixbufLoader.cs: remove debug output.

	* src/PhotoImageView.cs: add a PhotoChanged handler, fix some of
	the indexing logic.

	* src/PhotoView.cs: Change CurrentPhoto off of PhotoImageView's
	CurrentPhoto.

2004-11-19  Larry Ewing  <lewing@novell.com>

	* src/PhotoImageView.cs: unset Fit inside ScrollEvents.

	* src/MainWindow.cs: use the same zoom logic as the PhotoImageView.

	* src/PhotoImageView.cs: make +/- work for zooming.

	* src/PhotoView.cs: remove keypress handling and proxy zoom
	handling to the PhotoImageView.
	
	* src/PhotoImageView.cs: move the generic kery press handling
	here.  Move the Zoom interface here for now.

	* src/FullScreenView.cs: clean up key handling a bit.

2004-11-18  Larry Ewing  <lewing@novell.com>

	* src/PhotoImageView.cs: check for negative CurrentPhoto values.
	Fix off by one error.

	* src/TagCommands.cs: Use PhotoImageView here.

	* src/PhotoView.cs: always change CurrentPhoto if the pixbuf is null;

	* src/AsyncPixbufLoader.cs: fix the close logic.

	* src/MainWindow.cs: use a more sensible value for the zoom hack.

	* src/PhotoImageView.cs: if the current pixbuf is null try to
	reload even if CurrentPhoto == value.  Don't set the bg here.

	* src/FullScreenView.cs: set the bacground color here.

	* src/PhotoImageView.cs: set the scrollbars to automatic.

	* src/MainWindow.cs: make zoom behave a little better.

	* src/PhotoView.cs: make zoom do something a little more sane.

	* src/PhotoImageView.cs: remove out of date comment.

	* src/PhotoView.cs: switch to using PhotoImageView.cs.

	* src/PhotoImageView.cs: only expose the updated areas as the
	pixbuf loads.

	* src/ImageView.cs: add ImageCoordsToWindow method.

	* src/PhotoLoader.cs: expose the thumbnail gernation routine.

	* src/AsyncPixbufLoader.cs: regenerate the thumbnail after the
	async load is done.

2004-11-17  Larry Ewing  <lewing@novell.com>

	* src/AsyncPixbufLoader.cs: Integrate
	http://bugzilla.gnome.org/attachment.cgi?id=33891&action=view
	from Loz.

	* src/RotateCommand.cs: Integrate
	http://bugzilla.gnome.org/attachment.cgi?id=25789&action=view from
	Matthew Lowrance.
	
2004-11-14  Larry Ewing  <lewing@novell.com>

	* src/FullScreenView.cs: add Fit logic to the Zooming InterFace in
	the KeyPresshandler.  The Key press stuff needs to be moved still.

	* src/PhotoImageView.cs: hide ZoomFit make fit a Boolean mode.

	* src/MainWindow.cs: move the show call.

2004-11-12  Larry Ewing  <lewing@novell.com>

	* src/PhotoView.cs: remove the left right bindings, they just get
	in the way of the scroll bindings and now pg up/down is the
	correct way to handle this.

	* src/MainWindow.cs: make view->fullscreen start to do something.

	* src/PhotoImageview.cs: ew, who comes up with these names?  (OK
	this is meant to only be temporary while I fixup the naming
	mess).  New Widget that handles more of the query specific logic
	than the old.  I'll transition PhotoView soonish.

	* src/FullScreenView.cs: stubbed out widget for the new full
	screen mode.
	
	* src/InfoDisplay.cs: add null check patch from Loz.

2004-11-09  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: make the handler connect before.

2004-10-28  Larry Ewing  <lewing@novell.com>

	* icons/f-spot-loading.png: added file.

	* icons/Makefile.am (noinst_DATA): add f-spot-loading.png

	* src/PixbufUtils.cs: reenable the pixbuf rotation ops.

	* src/JpegHeader.cs: add a few more fields to the loader.

	* src/PhotoView.cs: use the AsyncLoader for the PhotoView for now.

	* src/makefile.am (F_SPOT_CSFILES): add AsyncPixbufLoader.cs to
	the build.

	* src/AsyncPixbufLoader.cs: add a new progressive loader for
	testing async loading.

2004-10-27  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: process expose events by the region not the area.

2004-10-20  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: add private flag that controls the use of the
	PixbufLoader so that we can use blocking loads for small exposes.

	* src/ImageView.cs: take ownership of the ref, the libeog
	image-view apis is funky this way.

2004-10-19  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: optimize for the actually exposed regions in the drawing code.

2004-10-17  Larry Ewing  <lewing@novell.com>

	* src/PhotoView.cs: Change the background color to match the
	IconView (still a temp hack).   Make the croping code work better
	if you are operating on a version.

	* src/TagView.cs: make TagView a nowindow widget.

	* src/GalleryExport.cs: handle exceptions while loging in
	correctly.

	* src/PhotoView.cs: fixup the croping logic now that the commit
	call updates the image.

2004-10-16  Larry Ewing  <lewing@novell.com>

	* src/PreviewPopup.cs: update the logic now that we don't just
	trigger off of the alt key.  rework the logic again.

	* src/f-spot.glade: kill the toolbar that didn't do anything anyway.

	* src/f-spot.glade: use C-t to apply tag.  Remove unused export
	dialog handlers.
	
	* src/GalleryExport.cs: Turn off tags and dates.  Remove unused
	handlers.

	* src/IconView.cs: new drawing style.  This isn't intendend.

	* src/PreviewPopup.cs: remove alt keybinding for preview popup.

2004-10-15  Larry Ewing  <lewing@novell.com>

	* src/GalleryExport.cs: start using the ProgressItem into the
	upload operation.

	* src/ThreadProgressDialog.cs: add ProgressItem class to help
	track progress of long running operations.

	* src/GalleryRemote.cs: start progress item integration, move
	album url to GetUrl.

	* src/FormClient.cs: start integrating the progress items.

	* src/GalleryExport.cs: make open gallery in browser work.

2004-10-14  Larry Ewing  <lewing@novell.com>

	* src/GalleryExport.cs: save and load the accounts from an xml
	file.  Fixup the url if it doesn't have the gallery_remote2.php
	string.img_3142.jpg

2004-10-14  Mikael Hallendal  <micke@imendio.com>

	* autogen.sh: Run intltoolize

2004-10-13  Larry Ewing  <lewing@novell.com>

	* src/PreviewPopup.cs: add a border to the preview popup window.

	* src/GalleryExport.cs: Make the add gallery dialog actually work,
	although it still isn't being saved.

	* src/PreviewPopup.cs: add a histogram display to the PreviewPopup.

	* src/GalleryExport.cs: fix up the responses etc.

	* src/MainWindow.cs: make the InfoDisplay window a Gtk.Dialog.

2004-10-12  Larry Ewing  <lewing@novell.com>

	* src/f-spot.glade: change the tab labels.

	* src/IconView.cs: make the date throb with the thumbnail so that
	we can save more space.

	* src/QueryView.cs: add missing constructor.

	* src/IconView.cs: add the start of date drawing.

	* src/MainWindow.cs: allow toggling of display dates.

	* src/f-spot.glade: add the date menu items.

2004-10-11  Larry Ewing  <lewing@novell.com>

	* src/PhotoView.cs: make Page up/down do next prev.

	* src/PhotoTagMenu.cs: Add tag icons to the menu.

	* src/TagMenu.cs: Add tag icons to the menu.

	* src/Util.cs: add rotate menu images to the popup menu.

2004-10-10  Larry Ewing  <lewing@novell.com>

	* src/f-spot.glade: add a Display tags menu fix the addaptor
	toggle setup.

	* src/MainWindow.cs: Handle the display tags menu item.

2004-10-09  Larry Ewing  <lewing@novell.com>

	* src/GalleryExport.cs: fix the step size so that we all the images.

	* src/PhotoArray.cs: fix the broken commit.

	* src/IPhotoCollection.cs: the Interface that we use in IconViews.

	* src/PreviewPopup.cs: use view.Collection not view.Query.

	* src/PhotoQuery.cs: implement IPhotoCollection.

	* src/GalleryExport.cs: Use the IconView to display the photos
	that we are going to upload. 

	* src/MainWindow.cs: use QueryView rather than IconView for the
	main icon list.
	
	* src/PhotoArray.cs: a simple IPhotoCollection that just stores
	an array of Photos.

	* src/makefile.am: add all the new files.

	* src/QueryView.cs: add an IconView subclass that stores uses and
	stores the PhotoQuery.
	
	* src/IconView.cs: Use IPhotoCollection rather than PhotoQuery to
	hold the photos.

	* src/MainWindow.cs: hook to the new export dialog.

	* src/makefile.am: add GalleryExport.cs.

	* src/GalleryExport.cs: Make the dialog do something nice.

	* src/GalleryRemote.cs: rework the result codes.

	* src/f-spot.glade: add the new dialog stuff.
	
2004-10-08  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: add gnome about dialog to the about menu
	item, I did a quick rundown iQn my head and tried to find everyone
	who had contributed so far, but I'm sure I missed several people.
	If you feel you've been left out please let me know.  

	* src/f-spot.glade: add about dialog.

2004-10-07  Larry Ewing  <lewing@novell.com>

	* src/GalleryExport.cs: fill in more of the dialog logic.

	* src/GalleryRemote.cs: add namespace.
	
	* src/ExportCommand.cs: use namespace.

	* src/GalleryRemote.cs: fix command name typo.

	* src/GalleryExport.cs: start hooking up the new gallery dialog.

	* src/f-spot.glade: layout a new export dialog.
	
	* src/makefile.am (F_SPOT_CSFILES): add Delay.cs

	* src/ExportCommand.cs: use the new ThreadProgressDialog.
	
	* src/ThreadProgressDialog.cs: rewrite using delay and strings as
	properties.

	* src/Delay.cs: new timeout/idle helper class.

2004-10-06  Larry Ewing  <lewing@novell.com>

	* src/InfoDisplay.cs: don't call base.StyleSet it seems to not
	like it.

	* src/ColorDialog.cs: set the histogram background color.

	* src/Histogram.cs: get rid of UseAlpha and allow the user to set
	a color.

	* src/ColorDialog.cs: hook up spinbutton adjustments and set the
	values.

	* src/f-spot.glade: add spinbuttons.
	
	* src/ColorDialog.cs: turn off alpha for now.

	* src/f-spot.glade: make the dialog a little prettier.
	
	* src/makefile.am: add Histogram.cs

	* src/ColorDialog.cs: hook up the histogram.

	* src/f-spot.glade: add a simple histogram display to the ugly
	editing dialog.

	* src/Histogram.cs: modify the FillValues behavior, store the
	GeneratePixbuf results.

2004-10-05  Larry Ewing  <lewing@novell.com>

	* src/Histogram.cs: new Histogram display.

2004-10-04  Larry Ewing  <lewing@novell.com>

	* src/main.cs: add an --import command line option that lets you
	specify a file or directory to import from.

	* src/MainWindow.cs: expose a public ImportUriList method, make
	the dnd code use the new method.

	* src/Util.cs: add another constructory for urilist that takes an
	array of strings.

2004-09-30  Larry Ewing  <lewing@novell.com>

	* src/TiffHeader.cs: Add GetRawXmp method that extracts the XMP
	data from the tiff.

	* src/ExifData.cs: fix the data copy so that it actually does
	something.

	* src/TiffHeader.cs: add a new TiffHeader parser that extracts the
	exif info from tiffs.

	* src/JpegHeader.cs: update tags add profile.  Improve test case.

2004-09-29  Larry Ewing  <lewing@novell.com>

	* src/JpegHeader.cs: new class to decode Jpeg structure and
	extract APP segments.

2004-09-28  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: Get rid of the hack to force the
	GroupSelector to reload on imports.

	* src/GroupSelector.cs: make the group selector listen to the
	adaptor.Changed event.

	* src/GroupAdaptor.cs: add a Changed event.

	* src/TimeAdaptor.cs: fire the changed signal on reload.

	* src/DirectoryAdaptor.cs: fire the changed signal on reload.

2004-09-25  Larry Ewing  <lewing@novell.com>

	* src/DirectoryAdaptor.cs: rewrite this so that we don't have to
	sort the full query.  Make set glass actually do the right thing.

	* src/PhotoView.cs: Integrate patch from Tambet
	<tambet@ximian.com> to clean up initialization and use double's
	epsilon.

	* src/InfoDisplay.cs: Keep the scroll position of the exif window.

	* src/MainWindow.cs: only set the current photo if the
	info_display exists

2004-09-23  Larry Ewing  <lewing@novell.com>

	* src/InfoDisplay.cs: only write to the stream if we have data.
	Change the layout a little.

	* src/MainWindow.cs: remove unused code, hook up the start of the
	new print dialog.  Add temporary View->EXIF Data window.  Clean up
	the code a little.

	* src/InfoDisplay.cs: remove debug spew.

	* src/IconView.cs: remove annoying key release handler.

	* src/InfoDisplay.cs: render the exif thumbnail, fix color type.
	
	* src/InfoDisplay.cs: use better colors, remove padding add
	spacing.

	* src/InfoDisplay.cs: use the style for colors.  Handle OnStyleSet.

	* src/ExifData.cs: add a Array of the set tags.

	* src/makefile.am (F_SPOT_CSFILES): add InfoDisplay and
	gkthtml-sharp.

	* src/InfoDisplay.cs: A simple display widget for full exif info.

	* src/GroupSelector.cs: move the glass to a valid position when
	changing adaptors.

	* src/DirectoryAdaptor.cs: check GlassSet for null.

2004-09-22  Larry Ewing  <lewing@novell.com>

	* src/f-spot.glade: misc fixups.
	
	* src/PixbufUtils.cs: Add an ErrorPixbuf property;

	* src/IconView.cs: use PixbufUtils.ErrorPixbuf;

	* src/PreviewPopup.cs: handle errors loading the image.

2004-09-17  Larry Ewing  <lewing@novell.com>

	* src/PrintDialog.cs: hook up the configure button.
	
	* src/PrintDialog.cs: add a little more to the print dialog.

2004-09-16  Larry Ewing  <lewing@novell.com>

	* src/PrintDialog.cs: start of the new print dialog.

	* src/f-spot.glade: add the glade for the new dialog.

2004-09-14  Larry Ewing  <lewing@novell.com>

	* src/PhotoView.cs: Don't commit the Description changes we get
	when changing images.

	* src/IconView.cs: cleanup a few edge cases.

	* src/MainWindow.cs: start reworking the change notification for
	image modifications.  Hook the InfoBox update to query.ItemUpdated.

	* src/ColorDialog.cs: make the color dialog use the query.Commit
	method for now, be smarter about the version committing.

	* src/PhotoQuery.cs: add Commit Method, notify listener of
	committed changes.
	
	* src/PhotoView.cs: add Query.ItemChanged handler.

	* src/IconView.cs: add Query.ItemChanged hander.
	
	* src/MainWindow.cs: Use PhotoQuery.Commit, remove extra
	notification stuff.

	* src/DirectoryAdaptor.cs: hook up reload here too for a little
	while, although this all about to change.

2004-09-13  Larry Ewing  <lewing@novell.com>

	* src/FormClient.cs: Allow for a noncaching mode and add a
	workaround for monos broken cookies.

2004-09-12  Larry Ewing  <lewing@novell.com>

	* src/TagCommands.cs: Add label typo fix from Caleb Groom.

	* src/MainWindow.cs: set the cursor to null if we bail from the
	slideshow.

2004-09-10  Larry Ewing  <lewing@novell.com>

	* src/FlickrRemote.cs: add a functional method to upoad to flickr.

2004-09-09  Larry Ewing  <lewing@novell.com>

	* src/GroupSelector.cs: when computing the box height make sure
	100% of 0 is zero.

	* src/MainWindow.cs: rebuild the GroupSelector view if we've
	imported items.

	* src/GroupSelector.cs: redraw the widget if the adaptor changes.

	* src/GroupAdaptor.cs: add new abstract method reload.

	* src/TimeAdaptor.cs: implement reload.
	
	* src/DirectoryAdaptor.cs: implement reload.

2004-09-08  Larry Ewing  <lewing@novell.com>

	* src/GroupSelector.cs: use the ILimitable interface, don't draw
	the limit handles if the model isn't limitable.

	* src/GroupAdaptor.cs: add an ILimitable interface for the limits.

	* src/TimeAdaptor.cs: implement ILimitable.

	* src/DirectoryAdaptor.cs: remove the SetLimits stub.

2004-09-03  Larry Ewing  <lewing@novell.com>

	* src/PreviewPopup.cs: refactor slightly, always update the
	position if we set the item.

	* src/PhotoView.cs: create ColorDialog with the proper arguments.

	* src/ColorDialog.cs: make saving work.

	* src/f-spot.glade: hook up ok and cancel signals.

2004-09-01  Larry Ewing  <lewing@novell.com>

	* src/PreviewPopup.cs: cleanup the output, make the popup come up
	centered over the icon.

	* src/ThumbnailCache.cs: Implement IDispose.

	* src/PreviewPopup.cs: look for motion events on the popup window
	if we see them update the popup position.

	* src/GroupSelector.cs: fix the glass label window position now
	that I know how.

	* src/PreviewPopup.cs: fix the window position issue.
	
	* src/PreviewPopup.cs: relocated and cleaned up preview code.  The
	position is still a little off but I haven't tracked it down yet.

	* src/MainWindow.cs: move the preview into its own File.

	* src/makefile.am: add PreviewPopup.cs.
	
	* src/TagPopup.cs: simple menu for tag Popup.

	* src/makefile.am: add TagPopup.cs.
	
	* src/MainWindow.cs: make tag commands pulic add
	ButtonPressHandler to tag_selection_widget to add right click
	popup menu.

	* src/TagCommands.cs: handle toplevel tags properly.

2004-08-31  Larry Ewing  <lewing@novell.com>

	* src/ColorDialog.cs: new horribly ugly dialog that uses the 
	cms stuff to do color correction.  It currently offers no way to
	save the corrected version so don't expect it to.

	* src/PhotoView.cs: popup the ColorDialog instead of sharpen ;).

	* src/makefile.am: add ColorDialog.cs.

	* src/f-spot.glade: add color dialog.
	
	* src/MainWindow.cs: make printing do something approaching the
	right thing.

	* src/PixbufUtils.cs: add more cms utility functions.
	
	* src/Cms.cs: add a from file contstructor and RGBA8 format.

2004-08-30  Larry Ewing  <lewing@novell.com>

	* makefile.am: add Cms.cs.

	* src/f-spot.exe.config: add a mapping for lcms.

	* src/Cms.cs: new file that adds an extremely incomplete lcms.
	binding.
	
	* src/PixbufUtils.cs: Add a ColorAdjust method that uses the Cms
	bindings.

2004-08-29  Larry Ewing  <lewing@novell.com>

	* Release f-spot-0.0.2 -- Ice Machine

2004-08-29  Larry Ewing  <lewing@novell.com>
	
	* autogen.sh: bump required automake version, this is needed for
	the glib-gettextize I have.  It is possible other might not need
	it but I'm playing it safe.

	* src/makefile.am: remove GtkDnd.cs.
	
	* src/GtkDnd.cs: remove unused file.

	* src/TimelineSelectorWidget.cs: this is the GroupSelector.cs.

2004-08-26  Larry Ewing  <lewing@novell.com>

	* src/GroupSelector.cs: add the glass label while dragging.

	* src/GroupAdaptor.cs: return the Path for the glass lable;

2004-08-25  Larry Ewing  <lewing@novell.com>

	* src/SlideView.cs: since we might for some reason get a size
	allocate before we have transitioned from the background image,
	scale the current image if current_idx < 0;
	
	* src/PixbufUtils.cs: use the screen size not the root window
	size, if the resolution has changed the rootwindow size may be
	wrong.

	* src/DirectoryAdaptor: return Directory as GlassLabel.

	* src/TimeAdaptor.cs: return Year as TickLable, month as GlassLabel.

	* src/GroupAdaptor.cs: add TickLabel and GlassLable remove Label.

	* src/GroupSelector.cs: add tick label drawing, using adaptor.TickLabel.

2004-08-24  Larry Ewing  <lewing@novell.com>

	* src/main.cs: set the default icon, yes we need a new one I was
	just tired of looking at the blank doc.

	* src/IconView.cs: Remove unused delegate that I missed before.
	Remove GetCell size stuff, use CellBounds instead.
	
	* src/MainWindow.cs: translate drag event x,y to window space
	before looking up the cell.  Always use FocusCell when switching
	pages.

	* src/IconView.cs: expose CellIsSelected and FocusCell for the
	changes in mainwindow.cs

	* src/MainWindow.cs: make page switching use the focused cell not
	the start of the selection and rework dnd to attach to the dropped
	on cell unless the dropped on cell is selected then use the selection.

	* src/ThumbnailCache.cs: only dispose once we've actually removed
	the thumnail from the cache.
	
	* src/MainWindow.cs: revert the quickpreview thumbnail dispose
	change, something isn't working.

	* src/PhotoLoader.cs: use the public ThumbnailFactory.

	* src/PhotoStore.cs: make the thumbnail factory public.

	* src/MainWindow.cs: Dispose the return values of
	GetThumbnailForPath whenever we can.

	* src/ThumbnailCache.cs: use a subpixbuf hack to make the return
	value of the pixbuf disposable.  Dispose the thumbnail whenever we
	remove it from the cache.  Since the callers have subpixbufs they
	hold their own refs and don't have to worry about our explicit
	dispose.

	* src/IconView.cs: always dispose the result of
	GetThumbnailForPath.
	
	* src/PhotoLoader.cs: always dispose the result of
	GetThumbnailForPath.

2004-08-23  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: add a IntPtr ctor, bump the ThumbnailCache icon
	size to 256.

	* src/PhotoView.cs: use the PhotoLoader.
	
	* src/SlideView.cs: use the new Loader stuff.

	* src/makefile.am: add PhotoLoader.cs.

	* src/PixbufUtils.cs: add SetOption method.

	* src/PhotoLoader.cs: add new Loader class.

2004-08-22  Federico Mena Quintero  <federico@ximian.com>

	* src/CompatFileChooser.cs (CompatFileChooserDialog): Compare the
	result of Gtk.Global.CheckVersion() to "" rather than to null.

2004-08-22  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: make the previow a popup.

	* src/IconView.cs: make get cell center public, remove motion
	event. From Trow.

	* src/MainWindow.cs: cleanup preview code ans use cache. From
	trow.

	* src/PixbufUtils.cs: add a new aspect loader. From trow

2004-08-21  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: add handlers for zoom items.

	* src/PhotoView.cs: clean up the exception bounds and the variable
	names.

	* src/IconView.cs: throb selected cells too.

	* src/MainWindow.cs: set the fg and bg color on the preview.
	
	* src/MainWindow.cs: add Nat and Trow's preview hack, load
	fullsize version if smaller version doesn't 	

	* src/IconView.cs: add Nat and Trow's preview hack, remove dnd cruft.

2004-08-20  Larry Ewing  <lewing@novell.com>

	* src/TimeAdaptor.cs: update now that glass set has moved.

	* src/MainWindow.cs: fix the glass calling methods.

	* src/DirectoryAdaptor.cs: implement SetGlass.
	
	* src/GroupAdaptor.cs: add the GlassSet event to the abstract
	class.

	* src/DirectoryAdaptor.cs: add a directory adaptor that builds the
	histogram based on path to the directory.

	* src/TimeAdaptor.cs: iterate over all the photos instead of doing
	a lot of queries.

	* src/GroupSelector.cs: use GroupAdaptor not TimeAdaptor.  Set the
	Limits when we set the adaptor.

	* src/MainWindow.cs: slight reworking.

	* src/makefile.am: add GroupAdaptor.cs.

	* src/TimeAdaptor.cs: derive from GroupAdaptor.  Fix Limit end calculation.

	* src/GroupAdaptor.cs: new abstract class for the adaptors.

	* src/TimeAdaptor.cs: load the whole range, this still needs work.
	Improve the end date calculation. Fix it so it builds.

	* src/MainWindow.cs: call the new time adaptor constructor.

	* src/PhotoStore.cs: fix stupid typo.

	* src/f-spot.glade: remove the icons from the rotate buttons.

	* src/ExifData.cs: add exif date parsing code from Ewen
	Cheslack-Postava <echeslack@gmail.com>.

	* src/PhotoStore.cs: read the time from the exif info if it
	exists, otherwise use the file creation time.

	* src/FileImportBackend.cs: don't pass the time to create, let it
	generate it from the file.

2004-08-19  Larry Ewing  <lewing@novell.com>

	* src/ExifUtils.cs: parse the date to a DateTime.

2004-08-18  Larry Ewing  <lewing@novell.com>

	* src/IconView.cs: Patch from trow to smooth out the throb.

	* src/MainWindow.cs: set current photo if they move the interest
	point while in PhotoView mode.

	* src/MainWindow.cs: call ScrollTo then Throb: on the selected cell.

	* src/IconView.cs: add the throb interface.

	* src/MainWindow.cs: check the source not the sender for dnd. Arg.

	* src/CompatFileChooser.cs: destroy the chooser too.

	* src/IconView.cs: change the selection drawing. This may not
	actually be better but it is a start.  More selection drawing
	changes.

	* src/PhotoStore.cs: Make several of the methods private to clean
	up the public interface.

	* src/IconView.cs: clean up some of the debug output and bounds
	setting.

	* src/MainWindow.cs: attach to the adaptor glass set delegate and
	hndle it by calling icon_view.ScrollTo.

	* src/GroupSelector.cs: fire the adaptor glass set method when the
	glass changes.

	* src/TimeAdaptor.cs: add a delegate for the glass set event.

2004-08-17  Joe Shaw  <joeshaw@novell.com>

	* src/TagStore.cs (TagStore.CreateDefaultTags): Set this.hidden to
	the hidden_tag.

2004-08-17  Larry Ewing  <lewing@novell.com>

	* src/PhotoStore.cs: remove useless block.

2004-08-17  Dave Camp  <dave@novell.com>

	* src/PhotoStore.cs: Fixed the build.

2004-08-17  Larry Ewing  <lewing@novell.com>

	* autogen.sh (PKG_NAME): remove some cruft.

	* src/PhotoStore.cs: reformat some of the code.

	* src/TagCommands.cs: use FromPixbuf not Pixbuf to set for now
	since it should be null_ok.

	* src/PhotoStore.cs: remove some old debug output.

	* src/TimeAdaptor.cs: rebuild the query when the limits change.

	* src/GroupSelector.cs: set the adaptor limits when the limit
	position changes.

	* src/makefile.am: add TimeAdaptor.cs.

	* src/MainWindow.cs: connect the GroupSeletor using an adaptor.

	* src/TimeAdaptor.cs: add a simplist adaptor between the
	GroupSelector and TimeAdaptor.cs.

	* src/MainWindow.cs: move the group selector into the class.

	* src/GroupSelector.cs: add a raw ctor.

2004-08-16  Larry Ewing  <lewing@novell.com>

	* makefile.am: add GroupSelector.cs remove TimelineSelector.cs.

	* src/f-spot.glade: add an hbox for packing the Selector into.

	* src/GroupSelector.cs: clean up offset fixes.

	* src/MainWindow.cs: add a GroupSelector with bogus values to
	start tying in the Selector for testing.

	* src/GroupSelector.cs: event and drawing boinds if the widget
	isn't located at 0x0.

	* src/GroupSelector.cs: fix box drawing limit color.

	* src/GroupSelector.cs: draw limits as boxes, invalidate Union
	instead of just the two areas because we may have changed the
	background state.

	* src/GroupSelector.cs: don't iterate over all the groups just the
	visible ones.  When releasing Hit test the middle of the
	manipulator not the point we grabbed.

	* src/GroupSelector.cs: make the drag hit testing use just the X
	bounds.

	* src/GroupSelector.cs: add dragging support.

2004-08-15  Larry Ewing  <lewing@novell.com>

	* src/GroupSelector.cs: refactor Glass and Limit into Manipulator
	(lame name) superclass.  Move hit testing into Manipulator.

004-08-15  Larry Ewing  <lewing@novell.com>

	* src/GroupSelector.cs: refactor bounds checking add button press
	handler for click to move glass.

	* src/GroupSelector.cs: Add prelighting to the glass, hook up
	event_window.

2004-08-14  Larry Ewing  <lewing@novell.com>

	* src/GroupSelector.csi: don't attach the style in the realize
	handler.  Draw innactive boxes using the prelight color (it isn't
	perfect but it is prettier than the inset frame.  Add a detail
	string to the PaintHandle call because pixbuf themes seem to crash
	without it.
	
2004-08-14  Larry Ewing  <lewing@novell.com>

	* src/GroupSelector.cs: Add handle drawing to the glass.

	* src/GroupSelector.cs: add the start of the limit boxes.  Add
	scrolling support.  Change drawing colors.  Add tick support.
	Add selection drawing. polish other drawing..
	

2004-08-13  Larry Ewing  <lewing@novell.com>

	* src/GroupSelector.cs: more drawing fixes.
	
	* src/GroupSelector.cs: add start of glass drawing;

	* src/GroupSelector.cs: add start of the basic timeline display
	code.

2004-08-12  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: set tag icon to first image if no icon is
	set.

	* src/TagStore.cs: use the pixdata Serialize/Deserialize now that
	they actually work.

	* src/PixbufUtils.cs: make the tag icon 52x52 to avoid the
	Pixdata.Serialize crash.

2004-08-11  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: really fix attachment syntax. *sigh*

	* src/PixbufUtils.cs: add TagIconFromPixbuf helper function that
	simply does some croping and scaling.  This might belong somewhere
	else.

	* src/MainWindow.cs: Rework the call the Edit.
	
	* src/f-spot.glade: add edit icon dialog.

	* src/TagCommands.cs: Add EditIcon command.  Make clicking on the
	tag Icon spawn the editor.  Refactor ::Edit slightly.
	
	* src/f-spot.glade: add edit command menu item and dialog.

	* src/MainWindow.cs: add edit command handler.

	* src/TagCommands.cs: Add Edit command.

2004-08-10  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: add handlers for Find->Date commands.

	* src/f-spot.glade: add new date range dialog (this needs love).

	* src/PhotoQuery.cs: add a new Range property.

	* src/PhotoStore.cs: expose the DateRange as public, make the
	start and end time readonly properties.

	* src/DateCommands.cs: new dialog command that lets you define the
	date range for the query.

2004-08-06  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: fix attachment url syntax.

	* src/PhotoQuery.cs: remove the sorting it is being handled in the
	query for now.

2004-08-05  Larry Ewing  <lewing@novell.com>

	* src/MainWindow.cs: Fix the array copying bounds.

	* src/SlideView.cs: Don't change the transition_interval even on
	the first fade.

	* src/MainWindow.cs: Make the photo range function smarter so that
	there is no need to select a range of photos.

2004-08-04  Larry Ewing  <lewing@novell.com>

	* src/SlideView.cs: wrap to the begining cleanly.

	* src/MainWindow.cs: move slide show start too an idle loop to
	allow the menu item to redraw.

	* src/SlideView.cs: move the intervals to variables, add a fade
	mode flag.  Add background pixbuf param to ctor for fading from a
	background and initialize variables differently if background is
	valid.

	* src/MainWindow.cs: make slideshow full screen, do a screen
	capture to fake a fadeout.  Add a button press handler for the
	fullscreen mode.

	* src/PixbufUtils.cs: add LoadFromScreen util function to get a
	screen capture.

	* libeog/image-view.c (image_view_set_pixbuf): always unref the
	old pixbuf since we always replace it.

2004-08-03  Larry Ewing  <lewing@novell.com>

	* src/PhotoStore.cs: rework the query again, use two nested
	queries instead of one, and remove the join completely.

	* src/PhotoStore.cs: Try a query based hidden tag again, remove
	the external cruft.  I think it is finally correct.

	* src/PhotoStore.cs: Go back to manual inspection for the hidden
	tag, the query based one is not correct yet.

	* src/TagsStore.cs: Expose the whole hidden tag not just the Id so
	that we can test for the tag more simply.
	
	* src/PhotoStore.cs: fix accidentally reversed logic in the
	reworked query.	

	* src/PhotoStore.cs: remove the horrible hidden hack from earlier
	and move the hidden logic into the query.  Rework the query logic
	to stop using OR and instead use IN.

	* src/TagStore.cs: add a new HiddenId property so that the logic
	for which tag is the hidden tag is kept in the store.

2004-08-02  Federico Mena Quintero  <federico@ximian.com>

	* src/IconView.cs (UpdateLayout): Set the step increment of the
	Vadjustment once we compute the cell_height so that the
	scrollbar's arrows will work.

2004-08-02  Larry Ewing  <lewing@novell.com>

	* src/PhotoStore.cs: Add a horrible hack to make the hidden tag
	work for now, will fix shortly.  Clean up debug output.

	* libeog/accessible-image-view.c: remove bonobo.h include, it
	isn't needed.

2004-08-01  Larry Ewing  <lewing@novell.com>

	* src/PhotoStore.cs: reorder the tables in the join, this speeds
	up the query drastically.

2004-07-31  Larry Ewing  <lewing@novell.com>

	* src/PhotoStore.cs: more cleanups, combine query logic a little,
	remove outdated code.

	* src/PhotoStore.cs: add some cleanups, remove the hack to demand
	load the photo data since it is no longer used.

	* src/PhotoStore.cs: Add big changes to the query to speed up the
	loading, still needs lots of cleanup but I want to keep the
	revision history.

	* src/PixbufLoader.cs: move existing requests to the front of the
	queue.

2004-07-21  Larry Ewing  <lewing@ximian.com>

	* src/Db.cs: commit a patch from trow to make sure the DateTimes
	we return are converted to/trom localtime.

2004-07-30  Larry Ewing  <lewing@ximian.com>

	* src/makefile.am: add PhotoPopup.cs, remove IconViewPopup.cs.
	
	* src/IconView.cs: use PhotoPopup instead of IconViewPopup remove
	GetFullFilename.

	* src/MainWindow.cs: Add HandleCopyLocation and make SelectedIds
	public for PhotoPopup.

	* src/PhotoView.cs: use PhotoPopup on right click.

	* src/PhotoPopup.cs: add new file, reworked version of
	IconViewPopup that doesn't reference anything but the mainwindow.

	* src/IconViewPopup.cs: remove unused file.

	* src/PhotoView.cs: Add TagView and try out a new layout for the
	PhotoView.

	* src/makefile.am: Add TagView.cs

	* src/TagView.cs: add a very basic tag display.

2004-07-09  Larry Ewing  <lewing@ximian.com>

	* src/f-spot.glade: remove the old handlers from the glade file.

	* src/MainWindow.cs: remove the activate code for the TagMenu
	handlers.

	* src/TagMenu.cs: remove the single argument constuctor.

	* src/MainWindow.cs: fix the TagMenu constuctor to use the new
	format since the old one breaks.
	
	* src/MainWindow.cs: Set the cursor to busy when building a new
	query.  

2004-07-09  Matt Jones  <mattharrison@sbcglobal.net>

	* src/TagStore.cs (CreateDefaultTags): fix some cut-n-paste typos
	regarding default image names

2004-07-03  Larry Ewing  <lewing@ximian.com>

	* src/GalleryRemote.cs: actually use the auto rotate flag and set
	it to false.

2004-06-29  Federico Mena Quintero  <federico@ximian.com>

	* src/PhotoView.cs (CurrentPhoto.set): Don't do anything if we are
	trying to set the same photo as the one we have.
	(UpdateStarted): New event.
	(UpdateFinished): New event.
	(Update): Emit the UpdateStarted and UpdateFinished notifications.
	
	* src/MainWindow.cs (MainWindow): Add event handlers to the
	photo_view UpdateStarted and UpdateFinished.
	(HandlePhotoViewUpdateStarted): New event handler; set the cursor
	to a watch.
	(HandlePhotoViewUpdateFinished): New event handler; unset the cursor.

2004-06-29  Larry Ewing  <lewing@ximian.com>

	* src/PixbufLoader.cs: make the queue act in as last in first out
	to speed up the icon view scrolling.

2004-06-28  Larry Ewing  <lewing@ximian.com>

	* src/f-spot.glade: rename delete menu item.

	* src/MainWindow.cs: use SelectedIds in a couple of places it was
	needed.  Rename the delete menu item.

2004-06-23  Larry Ewing  <lewing@ximian.com>

	* src/TagMenu.cs: store the parent_item and handle populating the
	menu internally.

	* src/makefile.am (F_SPOT_CSFILES): fix the last broken commit.

	* src/IconViewPopup.cs: hook up the TagMenus in the popup.

	* src/MainWindow.cs: Make the TagMenu handlers public.

2004-06-23  Larry Ewing  <lewing@ximian.com>

	* src/MainWindow.cs: Track the IconView changes.  Make some of the
	event handlers public for the IconView popup, add a static member
	to hold the singleton instance.  Scroll IconView when switching
	modes so that that last PhotoView image is visible on screen.

	* src/IconView.cs: rename some of the selection interface popup
	the IconViewPopup on right click.

	* src/IconViewPopup.cs: Initial commit based on a patch from
	Miguel.

	* src/makefile.am: add IconViewPopup.cs.
	
	* src/PhotoTagMenu.cs: make sure we check our inputs.

2004-06-17  Larry Ewing  <lewing@ximian.com>

	* src/MainWindow.cs: hook up the Remove tag item to the
	PhotoTagMenu.

	* src/f-spot.glade: hook up the Remove Tag item.

	* src/PhotoTagMenu.cs: new object to handle tags on selections of
	photos.  Needs to use the selection interface once I write it.

2004-06-16  Larry Ewing  <lewing@ximian.com>

	* src/TagMenu.cs: Rebuild the menu each time populate is called.

	* src/MainWindow.cs: Add Find by tag handler and generic Activate
	handler for tag Menu that populates that menu.

	* src/f-spot.glade: add a Find menu update the Attach Tag items
	activate handler, 

	* src/TagSelectionWidget.cs: call update if the Tags are set.  We
	really need to just update the display instead instead of
	rebuilding the entire tree.

	* src/ExifData.cs: marshall all the strings types, I doubt this
	code is really correct but it stops the free spewage which is good
	enough for me right now.

	* configure.in: bump the Gtk# requires.

	* src/TagSelectionWidget.cs: fix GetPathAtPos call for Gtk# 
	treeview api changes.

	* src/MainWindow.cs: update for Gtk# api changes, TypeName is now
	protected and GetPathAtPos has a better overload.

2004-06-15  Larry Ewing  <lewing@ximian.com>

	* src/MainWindow.cs: add a handler to the attach TagMenu so that
	it actually works.

	* src/TagMenu.cs: Fix the activation logic and add the category to
	its own submenu to allow people to select it.

2004-06-14  Larry Ewing  <lewing@ximian.com>

	* src/MainWindow.cs: add a new source type
	application/x-fspot-photos make the tag selection widget drop
	handler default to using that.
	
	* src/MainWindow.cs: Make the IconView accept text/uri-list drops
	and import them.  This should really popup an import dialog bug
	that isn't done yet.

	* src/Util.cs: fix a few bugs in the UriList class, add a
	SelectionData constructor.

2004-06-13  Larry Ewing  <lewing@ximian.com>

	* src/MainWindow.cs: fix the IconView drag handler for now.

	* src/PhotoStore.cs: Add a Query overload with a start and end
	DateTime.

	* src/PhotoStore.cs: remove the ToUriList bits the UriList class
	replaces them.

	* src/PhotoView.cs: fix more issues with empty queries and invalid
	current photo seetings by introducing CurrentPhotoValid method.
	This isn't super clean but it preserves most of the behavior I
	want.

2004-06-13 MOREAU Vincent <vmoreau@orange.fr>
	
	* src/PhotoView.cs: Make the PhotoView handle empty queries more
	gracefully.  Patch from bug #144210.
	
2004-06-13  Larry Ewing  <lewing@ximian.com>

	* src/PhotoView.cs: Make the PhotoView handle empty queries more
	gracefully.  Fixes bug #144210.

	* src/MainWindow.cs: Add drop handlers for the TagSelection
	widget, modified from the dnd patch by Lee.

	* src/PhotoStore.cs: Add GetByPath method based on patch from Lee
	Willis <lee@leewillist.co.uk>.

	* src/TagSelectionWidget.cs: TagAtPosition helper method, based on
	a dnd patch from Lee Willis <lee@leewillist.co.uk>.

	* src/IconView.cs: Integrate Icon view selection patch from Lee
	Willis <lee@leewillis.co.uk> and MOREAU Vincent
	<vmoreau@orange.fr>.

2004-06-11  Larry Ewing  <lewing@ximian.com>

	* src/MainWindow.cs: Add new SelectedIds method make dealing with
	the different modes more similar.  Make the selection logic behave
	so that in PhotoView mode operations only apply to the
	CurrentPhoto but in PhotoView mode it applies to all the selected
	photos.  Clean up the various operations so that they use this new
	logic.

	* src/makefile.am (F_SPOT_CSFILES): add Util.cs

	* src/ExportCommand.cs: use thread progress dialog, this needs
	lots of work but it might as well go in.

	* src/Util.cs: remove the strange win32 define, change the scheme
	check.

	* src/MainWindow.cs: make sure we add the Update the query after
	removing.  Use the new UriList api for the dnd sources. 

	* src/ImportCommand.cs: add a Scroll property to control the
	scrolling behavior as new photos are added.  Based on a patch from
	Miguel <miguel@ximian.com>.

2004-06-10  Larry Ewing  <lewing@ximian.com>
	
	* src/Util.cs: add ToLocalPaths method.

2004-06-10  Larry Ewing  <lewing@ximian.com>
	
	* src/Util.cs: add new util file.  Mostly code from Miguel for the
	popup items.

	* src/PhotoView.cs: fix off by one in entry sensitivity.

	* src/SlideView.cs: use the new LoadAtMaxSize function.

	* src/makefile.am (F_SPOT_CSFILES): add TagMenu.cs.

	* src/MainWindow.cs: Add delete command.  Stub in fullscreen,
	rename window1 everywhere.  Attach tag menu.  Add send mail
	command.

	* src/f-spot.glade: add menu items, reorder view menu, add some
	spacing.  Rename window1 to main_window.

	* src/TagMenu.cs: generate a menu based on the tag tree.

2004-06-09  Larry Ewing  <lewing@ximian.com>

	* src/PixbufUtils.cs: add AspectLoader and LoadAtMaxSize.

	* src/PhotoStore.cs: add a method to remove all versions, Make
	generate thumbnail use the ThumnailFactory.Save now that it
	exists.

2004-06-03  Larry Ewing  <lewing@ximian.com>

	* src/ThreadProgressDialog.cs: new progress dialog for the gallery
	uploading.

	* src/makefile.am (F_SPOT_CSFILES): add ThreadProgressDialog.cs.
	Update rules a bit.

2004-05-25  Larry Ewing  <lewing@ximian.com>

	* src/f-spot.glade: rename and reorder the rotation buttons.

	* src/GalleryRemote.cs: pass the description along as the caption.

	* src/PhotoView.cs: add a description entry in the photo view.
	The ui needs work but I want the description field funtioning.

2003-12-28  Miguel de Icaza  <miguel@ximian.com>

       * src/FileImportBackend.cs: Skip over thumbnail directories.

2004-05-14  Larry Ewing  <lewing@ximian.com>

	* src/ExportCommand.cs: commit a quick hack to upload photos in a
	thread.  This is by no means ready for prime time.

2004-05-14  Todd Berman  <tberman@sevenl.net>

	* src/makefile.am: fix makefile for mono from cvs.

2004-05-14  Todd Berman  <tberman@sevenl.net>

	* src/ExportCommand.cs:
	* src/PhotoVersionCommands.cs:
	* src/TagCommands.cs: update to gtk-sharp from cvs.

2004-05-14  Larry Ewing  <lewing@ximian.com>

	* src/ImageView.cs: add a namespace so that we don't clash with
	the libeogfspot ImageView for now.

	* src/PhotoView.cs: add a button press handler and use the
	namespaced ImageView.

2004-05-14  Peter Johanson  <latexer@gentoo.org>

	* src/f-spot.exe.config: add config file for the assemblies we are
	loading.

	* src/makefile.am: install f-spot.exe.config

2004-05-02  Larry Ewing  <lewing@ximian.com>

	* configure.in: bump required gtk-sharp verison.

2004-04-29  Larry Ewing  <lewing@ximian.com>

	* src/f-spot.glade: Rename properties handler.

	* src/MainWindow.cs: Add tag drag handlers, add a lame properties
	handler for the time being.  Use the fixed Print.Pixbuf handler.

	* src/TagSelectionWidget.cs: Fix GValue as a value type, thanks to
	a patch from Peter Johanson <latexer@gentoo.org>.

2004-04-09  Larry Ewing  <lewing@ximian.com>

	* src/ImageView.cs: fixup constructor.

2004-04-03  Larry Ewing  <lewing@ximian.com>

	* src/SlideView.cs: Switch to Nearest mode on the tween images
	they don't matter and be a little more carefull about calling
	dispose.

	* src/MainWindow.cs: always listen to page switches and try to do
	something smart.

2004-04-02  Larry Ewing  <lewing@ximian.com>

	* src/MainWindow.cs: add more set the drag icon, it probably
	shouldn't stay here but I want to get things working.

	* src/IconView.cs: remove old dnd stuff, call dispose on all
	resized thumbnails.

	* src/PhotoStore.cs: add a static ToUriList Method.

	* src/MainWindow.cs: add dnd to the icon view.  Work around broken
	Gtk# SelectionData wrappers for the time being.

2004-03-27  Larry Ewing  <lewing@ximian.com>

	* src/PixbufLoader.cs: process most recently added requests first.

2004-03-17  Larry Ewing  <lewing@ximian.com>

	* src/SlideView.cs: use the nearest blend mode for now.  The loss
	of quality doesn't have much impact in the time the tween frame is
	shown.

2004-03-15  Larry Ewing  <lewing@ximian.com>

	* src/makefile.am: Use the sqlite wrapper that is now part of
	Mono.  Closes bug #134770 based on a patch from Graham Orr.

	* src/PhotoStore.cs: extend the comparison stuff a little.
	
	* MAINTAINERS: update.

	* AUTHORS: update a little.

	* src/MainWindow.cs: handle the delete_event signal properly.
	Fixes bug #134783 and is based on a patch by Graham Orr.

	* src/f-spot.glade: add a delete_event handler.
	
2004-03-10  Larry Ewing  <lewing@ximian.com>

	* src/GalleryRemote.cs: Fix Album::Parent so that it actually
	works and add a quick hack to parse the reference number when
	building the Album.  It might be safe to just assume the position
	is the reference number, but the docs aren't clear on that so
	better safe than sorry.
	
	* src/ExportCommand.cs: always setup the option menu even if we
	don't have values in the fields.

	* src/f-spot.glade: make the pasword text invisible.
	
	* src/makefile.am (F_SPOT_CSFILES): add ExportCommand.cs

	* src/f-spot.glade: add export dialog.
	
	* src/MainWindow.cs: remove old gallery export hack, hook to the
	new dialog hack.

	* src/ExportCommand.cs: add a really broken dialog for the gallery
	export command.

2004-03-07  Larry Ewing  <lewing@ximian.com>

	* src/FormClient.cs: misc formatting cleanups.

	* src/SlideView.cs: reset the timer before we show the image to
	even out the display time and bump the transition timer to 75
	milisecond.

2004-03-05  Larry Ewing  <lewing@ximian.com>

	* src/PhotoQuery.cs: use Array.Sort to preserve the order of the
	photos.

	* src/PhotoStore.cs: implement a basic IComparable on Photo so
	that we can sort the array when needed.sr

2004-03-04  Larry Ewing  <lewing@ximian.com>

	* src/f-spot.glade: add export menu item.
	
	* src/MainWindow.cs: add hardcoded export handler.

	* src/FormClient.cs: added, basic HTTP Post implementation for
	form sumbmission and file Upload.
	
	* src/GalleryRemote.cs: new file with beginnings of GalleryRemote
	protocol implementation.
	
	* src/makefile.am (F_SPOT_CSFILES): add FormClient.cs and
	GalleryRemote.cs

2004-03-01  Larry Ewing  <lewing@ximian.com>

	* configure.in: require gtk-sharp >= 0.17.

2004-02-28  Larry Ewing  <lewing@ximian.com>

	* src/IconView.cs: fixup for gtk-sharp 0.17.

	* src/TagSelectionWidget.cs: more gtk# fixups.

	* src/TimelineSelectorWidget.cs: more gtk# fixups.

	* src/PhotoView.cs: more gtk# fixups.

	* src/MainWindow.cs: more gtk# fixups.

	* src/SlideView.cs: more gtk# fixups.

2004-02-27  Larry Ewing  <lewing@ximian.com>

	* src/f-spot.glade: add menu item for set as background.
	
	* src/MainWindow.cs: add set as background handler and hook up the
	menu item.

2004-02-25  Larry Ewing  <lewing@ximian.com>

	* src/SlideView.cs: Refactor the Forward back logic more, add
	next_idx logic.
	
	* src/SlideView.cs: Add the begginings of the flipping code.	

2004-02-12  Larry Ewing  <lewing@ximian.com>

	* src/MainWindow.cs: Queue a redraw of the icon view now that
	we've changed the tags.  This needs a better solution.

	* src/PhotoStore.cs: be sure to commit the tag changes.

	* src/MainWindow.cs: remove the old ifdefed code it was confusing.

	* src/IconView.cs: Use UnselectAllCells() to clear the selection,
	we were missing notification before.
	
	* src/MainWindow.cs: make UpdateMenus handle more of the menu
	items.  Hook UpdateMenus to the tag selection widget.

	* src/f-spot.glade: fix a couple of the menu item widget names now
	that we are using them.

2004-02-11  Larry Ewing  <lewing@ximian.com>

	* src/f-spot.glade: remove toolbar that crept in somehow.
	
	* src/MainWindow.cs: hook up select/unselect.
	
	* src/IconView.cs: make unselectall public add selectall.

2004-02-10  Larry Ewing  <lewing@ximian.com>

	* src/PhotoStore.cs: add a remove method for tags that removes the
	tag from all the photos that refer to it and the removes it from
	the tag store.

	* src/TagStore.cs: make sure we clear the category so that our
	parent category doesn't try to keep us around.

	* src/MainWindow.cs: add remove tag handler logic.

2004-02-06  Larry Ewing  <lewing@ximian.com>

	* src/IconView.cs: Fix speed issue with selecting large ranges
	of cells.

	* src/makefile.am (CLEANFILES): add makefile to CLEANFILES.

	* src/IconView.cs: Clear selection when the query changes.
	
	* src/RotateCommand.cs: reformat slightly.

	* src/SlideView.cs: remove uneeded break that mcs complains about
	now.

	* src/makefile.am (F_SPOT_CSFILES): add ThumbnailCommand.cs.  Fix
	f-spot rule.

	* src/f-spot.glade: add new menu items.

	* src/MainWindow.cs: Add handler for deleting selected pictures
	from the catalog and for thumbnailing.  Use new thumbnail command
	for thumbnailing.  Add the start of a print command.

	* src/ThumbnailCommand.cs: add a thumbnailing command.

2004-01-30  Larry Ewing  <lewing@ximian.com>

	* src/SlideView.cs: Add another timer loop for the display
	transitions so that the transtion takes roughly the same amount of
	time for all sizes.  Clean up debug statments and timer names.  

2004-01-30  Larry Ewing  <lewing@ximian.com>

	* src/SlideView.cs: Generate the inbetween frames starting at the
	last frame and working forward because it gives a smoother
	impression if the end is smooth and the beginning is rough.  Use
	Destroyed instead of Destroy event.
	

2004-01-30  Larry Ewing  <lewing@ximian.com>

	* src/SlideView.cs: Generate the inbetween frames in an idle loop
	while showing the current image.  This trades off a lot of memory
	for speed but it make Full screen mode possible and improves
	interactivity.

2004-01-29  Larry Ewing  <lewing@ximian.com>

	* src/SlideView.cs: wrap the transition in a try block in case we
	get destroyed in the middle.

2004-01-28  Larry Ewing  <lewing@ximian.com>

	* src/SlideView.cs: use the allocation size rather than an
	arbitrary size.  Stop allocating a new buffer for each blend
	call.

	* src/MainWindow.cs: set the size request here.

	* src/SlideView.cs: add a quick hack to play with the blending in
	slide show transitions.

	* src/PhotoStore.cs: make AddTag also accept and array of tags,
	should fix the naming here soon.

	* src/MainWindow.cs: Add very basic View->Slide Show handler.
	Pass array directly to AddTag.

	* src/f-spot.glade: Add spelling fix from Kevin Breit
	<mrproper@ximian.com>.  Add View->Slide Show menu item.

	* src/makefile.am (F_SPOT_CSFILES): add SlideView.cs to the build.

	* src/SlideView.cs: add the start of a slideshow widget.  It
	currently only supports flip transitions.

2004-01-24  Larry Ewing  <lewing@ximian.com>

	* src/IconView.cs: add basic keynav and focus handling.  Shift
	selection still isn't right but things are getting better.

2004-01-23  Larry Ewing  <lewing@ximian.com>

	* src/f-spot.glade: Make hide the tabs and sink the scrolled
	window to remove some of the visual noise, the view changing
	buttons will come soon.

	* src/MainWindow.cs: add some temporary handlers for icon view
	resizing work.

	* TagCommands.cs: walk down the parent categories to indent for
	each level.

	* src/PixbufUtils.cs: bind UnsharpMask.

	* libfspot/f-pixbuf-unsharp.c: add a unsharp mask filter to
	libfspot.

	* libfspot/Makefile.am (libfspot_la_SOURCES): add
	f-pixbuf-unsharp.c


2004-01-21  Larry Ewing  <lewing@ximian.com>

	* src/IconView.cs: make InvalidateCell public for now.

	* src/MainWindow.cs: add handlers for new menu items and toolbars,
	reconnect the tag selection widgets SelectionChanged handler.

2004-01-20  Larry Ewing  <lewing@ximian.com>

	* src/TagSelectionWidget.cs: add TagHighlght method to get the
	tree selection.

	* src/f-spot.glade: add toolbar buttons and attach and remove tag
	menu items.

	* src/FileImportBackend.cs: allow multple base paths in an import.

	* src/ImportCommand.cs: allow multiple selections in the file
	selector.

	* src/TagCommands.cs: fix the category option so that it doesn't
	loop forever if a category has a sub category.

2004-01-18  Larry Ewing  <lewing@ximian.com>

	* src/IconView.cs: Add InvalidateCell() method to cut down on
	redraws, use where appropriate.  Add SelectCellRange() to
	implement shift selection.

2003-12-15  Miguel de Icaza  <miguel@ximian.com>

	* src/MainWindow.cs: Moved the main UI to Glade, and bring all the
	functionality from the old version there.

2003-11-29  Ettore Perazzoli  <ettore@ximian.com>

	* libfspot/f-image-view.c (impl_motion_notify_event): Fix memory
	leak.  Also, remove big chunk of "#if 0"ed code.

2003-11-29  Ettore Perazzoli  <ettore@ximian.com>

	* src/IconView.cs (IconView.HandlePixbufLoaded): Use
	InvalidateRect() instead of calling DrawCell() directly.  This
	fixes a redraw problem that occurred with a large enough number of
	pictures.  [I had a comment there saying that it was slower, but
	it doesn't seem to make a difference on my current machine.]

2003-11-29  Ettore Perazzoli  <ettore@ximian.com>

	* src/PixbufLoader.cs: Rename all methods using the conventions
	used in the rest of the code.

2003-11-28  Ettore Perazzoli  <ettore@ximian.com>

	* src/PixbufLoader.cs (PixbufLoader.Cancel): Just check if the
	hash returns null.
	(PixbufLoader.workerThread): If the queue count is zero after
	waiting on the monitor, wait again.
	(PixbufLoader.handleProcessedRequests): Don't remove the requests
	from the hash here, since we are already doing it when processing
	them.

	* src/IconView.cs (IconView.HandleScrollOnIdle): Move the code
	from Scroll() in here.
	(IconView.Scroll): Set an idle handler to scroll instead of just
	scrolling right away.
	(IconView.CancelScroll): New method to cancel a queued scroll.
	(IconView.HandleDestroyEvent): Handler for the widget's destroy
	event; call CancelScroll.
	(IconView.ctor): Connect the destroy event handler.

2003-11-22  Miguel de Icaza  <miguel@ximian.com>

	* src/PhotoSource.cs: Add another overload for GenerateThumbnail
	so we can specify whether to use Exif or not.

	* src/ImportCommand.cs: Thumbnails might not be generated, skip
	over those files.

	* src/f-spot.in (LD_LIBRARY_PATH): Added elite --debug flag to get
	line numbers on stack traces.

	* src/Makefile.am: Add elite -g to the mcs command line, so it
	generates debug info.

	* src/PhotoSource.cs: Add dog-food enabling feature by using Exif.

2003-11-22  Ettore Perazzoli  <ettore@ximian.com>

	* src/TagStore.cs: Pass true for the cache_is_immortal flag to the
	base constructor.

	* src/ImportStore.cs (ImportStore.ctor): Pass false for the
	cache_is_immortal flag to the base constructor.
	* src/PhotoStore.cs (PhotoStore.ctor): Likewise.

	* src/Db.cs (DbStore.cache_is_immortal): New private member.
	(DbStore.ctor): Get a cache_is_immortal arg.
	(DbStore.AddToCache): Add the item if the cache is immortal,
	instead of adding a WeakReference to it.
	(DbStore.LookupInCache): Expect a WeakReference if the cache is
	not immortal, the actual item otherwise.

2003-11-22  Ettore Perazzoli  <ettore@ximian.com>

	* libfspot/Makefile.am (libfspot_la_LIBADD): Add a dep on libeog.

2003-11-17  Ettore Perazzoli  <ettore@ximian.com>

	* src/RotateCommand.cs (RotateCommand.Execute): Only show the
	dialog if we are rotating more than one picture.

	* src/ProgressDialog.cs: Removed timeout stuff, we don't really
	need it.

2003-11-17  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/RotateCommand.cs (RotateCommand.Execute): Add a stoppable
	progress dialog.

	* src/ProgressDialog.cs: New.

2003-11-16  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/makefile.am (RESOURCES): Add f-spot-rotate-90.png and
	f-spot-rotate-270.png.

	* src/StockIcons.cs (StockIcons.Initialize): Add
	"f-spot-rotate-270", "f-spot-rotate-90".

	* src/RotateCommand.cs (RotateCommand.Direction): Renamed from
	RotationType.

	* src/PixbufLoader.cs (PixbufLoader.workerThread): Set the
	current_request to null after processing.

	* src/MainWindow.cs (MainWindow.RotateSelectedPictures):
	Implementation of the command to rotate the current picture if in
	photo view mode, or all the selected pictures in icon view mode.
	(MainWindow.HandleRotate90ToolbarButtonClicked): New event handler
	for the "Rotate 90 degrees" toolbar button.
	(MainWindow.HandleRotate270ToolbarButtonClicked): New event
	handler for the "Rotate 270 degrees" toolbar button.
	(MainWindow.CreateToolbar): New private method to create the
	toolbar.
	(MainWindow.ctor): Add the toolbar.

	* src/IconView.cs (IconView.UpdateThumbnail): Remove the thumbnail
	path, not the photo path.

	* libfspot/Makefile.am (libfspot_la_LIBADD): Add a dependency on
	libfspotjpegtran.

	* src/StockIcons.cs: Add new icons.

	* icons/f-spot-rotate-90.png: New.
	* icons/f-spot-rotate-270.png: New.

2003-11-16  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/RotateCommand.cs: New.

2003-11-16  Ettore Perazzoli  <ettore@perazzoli.org>

	Get some basic Dnd stuff in, although, it doesn't really work and
	I am giving up for now.

	* src/IconView.cs: Set up as a drag destination.  This doesn't
	work but I'll commit anyways since it's a start.

	* src/GtkDnd.cs: New file trying to make up for the broken
	bindings.

2003-11-16  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/MainWindow.cs (MainWindow.OnTagSelectionChanged): Switch to
	icon view mode.

2003-11-15  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/IconView.cs: Don't emit a DoubleClicked event if any
	keyboard modifiers are held.

2003-11-15  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/IconView (IconView.display_tags): New private member
	variable.
	(IconView.DisplayTags): New property.
	(IconView.CELL_BORDER_WIDTH): Reduced to 10 pixels.
	(IconView.SELECTION_THICKNESS): Reduced to 3 pixels.
	(Iconview.TAG_ICON_SIZE): New constant.
	(Iconview.TAG_ICON_HSPACING): New constant.
	(Iconview.TAG_ICON_VSPACING): New constant.
	(iconView.ErrorPixbuf): Use PixbufUtils.LoadFromAssembly().
	(IconView.UpdateLayout): Increase the cell_height to make space
	for the tags if DisplayTags is true.
	(IconView.DrawCell): Draw the category icons for the tags of the
	photo.

	* src/TagStore (TagStore.stock_icon_name): New private member.
	(TagStore.StockIconName): New public property.
	(TagStore.Icon): When this is set, set stock_icon_name to null.
	(TagStore.STOCK_ICON_DB_PREFIX): New constant.
	(TagStore.SetIconFromString): New private helper method.
	(TagStore.LoadAllTags): Add a debugging Console.WriteLine() since
	otherwise things do not seem to work [no idea why!].  Also, use
	SetIconFromString() to get the icon so we properly handle stock
	icons.
	(TagStore.GetIconString): If it's a stock icon, return
	STOCK_ICON_DB_PREFIX plus the icon name instead of the raw base64
	encoding.
	(TagStore.CreateDefaultTags): Set stock icons for the default tags
	instead of raw pixbufs.

	* src/StockIcons.cs (StockIcons.Initialize): Use
	PixbufUtils.LoadFromAssembly().

	* src/PixbufUtils.cs (PixbufUtils.LoadFromStream): New.
	(PixbufUtils.LoadFromAssembly (Assembly, string)): New.
	(PixbufUtils.LoadFromAssembly (string)): New.

2003-11-13  Jakub Steiner <jimmac@ximian.com>

	* icons/f-spot-people.png: use a nicer icon for people

2003-11-12  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/MainWindow.cs: Hmmm set "shrink" to true again for the
	hpaned, otherwise we can have some nasty resizing when selecting
	pictures.  We need to fix this properly by using labels with
	ellipsis.

2003-11-12  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/makefile.am: Add f-spot-people.png, f-spot-places.png to the
	.exe.

	* src/main.cs (Driver.Main): Change the working directory to be
	the user's home directory.

	* src/f-spot.in: DllImport uses LD_LIBRARY_PATH, not MONO_PATH,
	you doofus.

	* src/TagStore.cs (Tag.CompareTo): Reverse the order when using
	SortPriority.
	(TagStore.LoadAllTags): Get the icon from the database.
	(TagStore.CreateDefaultTags): Add "Favorites", "People", "Events"
	and "Other" categories.

	* src/TagSelectionWidget.cs (TagSelectionWidget.Update): Rename
	from Reload().
	(TagSelectionWidget.SetBackground): Private method to set the
	color of the cells depending on whether they are a category or a
	tag.
	(TagSelectionWidget.CheckBoxDataFunc): Use it.
	(TagSelectionWidget.IconDataFunc): Use it.
	(TagSelectionWidget.NameDataFunc): Use it.

	* src/TagCommands.cs: New.

	* src/f-spot.glade: Make "version_name_dialog" not visible (so we
	don't flicker).  New dialog "create_tag_dialog".

	* icons/f-spot-people.png: New icon.
	* icons/f-spot-places.png: New icon.

2003-11-11  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/main.cs (Driver.Main): Change to the home directory at
	start-up.

2003-11-11  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/TagSelectionWidget.cs (TagSelectionWidget.IconDataFunc):
	New.
	(TagSelectionWidget.ctor): Hook it up so we can display the icon
	for the tag.

	* src/TagStore.cs (PixbufSerializer): New temporary class to avoid
	using the broken GTK# bindings for gdk_pixdata_serialize() and
	gdk_pixdata_deserialize().
	(GetIconString): Get the base64 encoded version of the pixbuf.
	(TagStore.LoadAllTags): Get the icons.
	(TagStore.CreateDefaultTags): Set the f-spot-favorite icon for the
	favorites tag.
	(TagStore.Commit): Save the icon.

	* icons/f-spot-favorite.png: New.

2003-11-11  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/PhotoStore.cs (Photo.CreateDefaultModifiedVersion): Start at
	"(2)" for "Modified" versions past the first one, instead of
	"(1)".  [So if you have a "Modified" version now you get "Modified
	(2)" instead of "Modified (1)".]

2003-11-10  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/PhotoStore.cs (PhotoStore.MoveThumbnail): New.
	(PhotoStore.DeleteThumbnail): New.
	(Photo.DeleteVersion): Remove the thumbnail.
	(Photo.RenameVersion): Rename the thumbnail.
	(PhotoStore.Create): Get the id after doing the query, not before!

2003-11-10  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/PhotoView.cs (Photoview.UpdateImageView): Use
	Photo.DefaultVersionPath, not Photo.Path, to get the path for the
	image to display.

2003-11-09  Larry Ewing  <lewing@ximian.com>

	* configure.in: drop libgnome requirement to 2.2 since it doens't
	seem to break anything.

	* src/PixbufLoader.cs (PixbufLoader.processRequest): catch the
	possible Pixbuf exceptions.

	* src/PhotoView.cs (PhotoView.UpdateImageView): catch the possible Pixbuf exception.

	* src/IconView.cs (IconView.ErrorPixbuf): use the question mark icon we ship.

2003-11-10  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/InfoBox.cs (InfoBox.Update): Get the size info from the
	photo's DefaultVersionPath instead of its Path.

2003-11-09  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/MainWindow.cs (MainWindow.ctor): Pass false as the "shrink"
	arg in Paned.Pack1() for the left pane so we don't get sized below
	the InfoBox' size requisition.

2003-11-09  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/MainWindow.cs (MainWindow.HandlePhotoViewButtonPressEvent):
	Button press event handler for the PhotoView, so we can switch to
	icon view mode on double click.
	(MainWindow.ctor): Connect.

	* libfspot/f-image-view.c (impl_button_press_event): Clean up on
	GDK_2BUTTON_PRESS.

2003-11-09  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/ZoomUtils.cs: Import from libfspoteog, not libeog.

2003-11-09  Ettore Perazzoli  <ettore@perazzoli.org>

	* configure.in: Remove gnome-thumbnail.h check, add a Sqlite
	check.

2003-11-09  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/PhotoVersionCommands.cs (PhotoVersionCommands.Create): Pass
	true for create_file to Photo.CreateVersion.

	* src/IconView.cs (IconView.Scroll): Use Photo.DefaultVersionPath
	instead of Photo.Path.
	(IconView.DrawCell): Likewise.
	(UpdateThumbnail): New method to have a thumbnail reloaded.

	* src/MainWindow.cs (MainWindow.ctor): Pass photo store to
	PhotoView.
	(MainWindow.HandleCreateVersionCommand): Update the thumbnail in
	the icon view.
	(MainWindow.HandleDeleteVersionCommand): Likewise.
	(MainWindow.HandleRenameVersionCommand): Likewise.
	(MainWindow.UpdateForVersionIdChange): Likewise.
	(MainWindow.HandlePhotoViewPhotoChanged): New handler for the
	PhotoChanged event on the PhotoView.
	(MainWindow.ctor): Connect.

	* src/PhotoView.cs (PhotoView.HandleCropButtonClicked): New.
	(PhotoView.ctor): Connect to the "Clicked" event on the crop
	button.
	(PhotoView.photo_store): New member to keep a pointer to the photo
	store.
	(PhotoView.ctor): Get a PhotoStore arg, initialize photo_store.
	(PhotoView.PhotoChanged): New public event.
	(PhotoView.UpdateImageView): Use Photo.DefaultVersionPath instead
	of .Path, so that we display the default version.
	(PhotoView.HandleDisplayNextButtonClicked): Emit PhotoChanged.
	(PhotoView.HandleDisplayPreviousButtonClicked): Emit PhotoChanged.

	* src/PhotoStore.cs (Photo.CreateDefaultModifiedVersion): New.
	(Photo.CreateVersion): Get a bool arg specifying whether to create
	a file for the new version or not.
	(Photo.DefaultVersionPath): New public property.

2003-11-09  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/InfoBox.cs (InfoBox.SetupWidgets): Move the version option
	menu up, after the name entry; I think it makes more sense this
	way.

2003-11-09  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/MainWindow.cs (MainWindow.UpdateForVersionIdChange): New.
	(MainWindow.HandleVersionIdChanged): Use it.
	(MainWindow.HandleInfoBoxVersionIdChanged): New.
	(MainWindow.ctor): Hook to the VersionIdChanged event on the
	InfoBox.

	* src/InfoBox.cs (InfoBox.VersionIdChanged): New public event.
	(InfoBox.HandleVersionIdChanged): Handler for the PhotoVersionMenu
	version id changes, emits VersionIdChanged.
	(InfoBox.Update): Make it use PhotoVersionMenu.
	(InfoBox.PopulateVersionOptionMenu): Remove.
	(InfoBox.HandleVersionOptionMenuActivated): Remove.

2003-11-09  Ettore Perazzoli  <ettore@perazzoli.org>

	* configure.in: Require Gnome 2.4 libs.

2003-11-09  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/PhotoVersionCommands.cs
	(PhotoVersionCommands.VersionNameRequest): Change so that it gets
	a request type and sets prompt and title depending on it.  Also,
	don't give a "this name already exists" warning if it's a rename
	request and the user typed the same name as the current version
	and return ResponseType.Cancel in that case even if the user
	clicked "Ok".
	(PhotoVersionCommands.Create): Update accordingly.
	(PhotoVersionCommands.Rename): Update accordingly.
	(PhotoVersionCommands.Update): New.
	(PhotoVersionCommands.VersionNameRequest.HandleVersionNameEntryChanged):
	Use it.
	(PhotoVersionCommands.VersionNameRequest.Run): Likewise.

2003-11-09  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/PhotoVersionCommands.cs
	(PhotoVersionCommands.Delete.Execute): Implement.
	(PhotoVersionCommands.VersionNameRequest): New private class for
	generic version name requests.
	(PhotoVersionCommands.Create): Use this class.
	(PhotoVersionCommands.Rename): Implement.

	* src/f-spot.glade: Rename "create_new_version_dialog" to
	"version_name_dialog", give a name to the prompt label, remove all
	text.

	* src/MainWindow.cs (MainWindow.HandleVersionIdChanged): Call
	UpdateMenus().
	(MainWindow.HandleRenameVersionCommand): Implement.
	(MainWindow.UpdateMenus): Make the "rename version" menu item
	insensitive when the original version is selected.

	* src/PhotoStore.cs (Photo.GetVersionPath): Use GetVersionName().
	(Photo.DeleteVersion): Delete the version file.  Also, if we are
	deleting the DefaultVersion, re-set it to be the most recent of
	the versions before this one.
	(Photo.RenameVersion): Get a uint version_id, not an int, also use
	the proper name.

2003-11-09  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/makefile.am: Include f-spot.glade as a resource into
	f-spot.exe.

	* src/f-spot.glade: New file, right now containing only the
	"Create New Version" dialog box.

	* src/ThumbnailCache.cs (ThumbnailCache.MaybeExpunge): Renamed
	from "maybeExpunge" for consistency.

	* src/PhotoView.cs (PhotoView.Update): Made public.

	* src/PhotoVersionMenu.cs: New file implementing a menu to select
	photo versions.

	* src/PhotoVersionCommands.cs: New file implementing version
	management commands.

	* src/PhotoStore.cs (Photo.default_version_id): New private member
	variable.
	(Photo.DefaultVersionId): New property.
	(Photo.VersionNameExists): Made public.
	(Photo.GetVersionPath): Return the appropriate path for the
	OriginalVersionId.
	(Photo.CreateVersion): Make a copy of the base version and
	generate a thumbnail for it.  Make sure that a file with the new
	path doesn't already exist.
	(PhotoStore.thumbnail_factory): Made static.
	(PhotoStore.EnsureThumbnailDirectory): Made static.
	(PhotoStore.GenerateThumbnail): New static method.
	(PhotoStore.Create): Use it.
	(PhotoStore.ctor): Add a default_version_id column to the table.
	(PhotoStore.Create): Set the default_version_id column.
	(PhotoStore.Get): Get the default_version_id column and set
	DefaultVersionId.
	(PhotoStore.Commit): Set the default_version_id column.  Also,
	don't store the OriginalVersionId in the photo_versions table.

	* src/MainWindow.cs: Added a Photo -> Version submenu and
	Create/Delete/Rename Version menu items.
	(MainWindow.CurrentPhoto): New private property to track the
	selected photo.

	* src/InfoBox.cs (InfoBox.Update): Made public.

2003-11-09  Ettore Perazzoli  <ettore@perazzoli.org>

	* configure.in: Don't require libxml.

2003-11-08  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/ImportCommand.cs (ImportCommand.HandleDialogResponse):
	Renamed from "OnResponse" for consistency.

2003-11-08  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/TagStore.cs (Tag.Children): Change from an ArrayList to an
	array.

	* src/TagSelectionWidget.cs (TagSelection): Return an array of
	tags instead of an ArrayList.

	* src/PhotoView.cs: Renamed private member "model" to "query";
	updated for the changes in PhotoQuery.
	(PhotoQuery.Query): Renamed from "Model".

	* src/PhotoStore.cs (Photo.Tags): Change from an ArrayList to an
	array.
	(Photo.Query): Return an array of Photos instead of an ArrayList.

	* src/MainWindow.cs (MainWindow.HandleSelectionChanged): Update
	for the fact that IconView.Selection is now an array.

	* src/InfoBox.cs (InfoBox.PhotoPath): Removed, together with the
	private "photo_path" member.
	(InfoBox.Photo): New property, use this instead.
	(InfoBox.HandleVersionOptionMenuActivated): New.
	(InfoBox.PopulateVersionOptionMenu): New.
	(InfoBox.Update): Call it.
	(InfoBox.SetupWidgets): Add a row with the version option menu.
	(InfoBox.Clear): Make the option menu insensitive.

	* src/IconView.cs (IconView): Rename local member "model" to
	"query"; make it use just a PhotoQuery object.
	(IconView.Selection): Return an array instead of an ArrayList.

	* src/PhotoQuery.cs: Don't derive from PhotoListModel anymore;
	move all the method inherited from PhotoListModel in.
	(PhotoQuery.Tags): Changed from an ArrayList to an array.
	(PhotoQuery.Photos): Return an array.
	(PhotoQuery.GetItem): Removed.

	* src/PhotoListModel.cs: Removed.

	* src/Db.cs (DbStore.AddToCache): Remove an existing item with the
	same ID as the one we are adding.

2003-11-08  Ettore Perazzoli  <ettore@perazzoli.org>

	* src/PhotoView.cs (PhotoView.UpdateImageView): Handle a null
	model or an out of range photo index value gracefully.

	* src/PhotoStore.cs (Photo.ctr): Moved initialization for "tags"
	out of the constructor.  Added version management.
	(Photo.VersionIds): New.
	(Photo.AddVersionUnsafely): New.
	(Photo.GetPathForVersionName): New.
	(Photo.VersionNameExists): New.
	(Photo.GetVersionName): New.
	(Photo.GetVersionPath): New.
	(Photo.DeleteVersion): New.
	(Photo.CreateVersion): New.
	(Photo.RenameVersion): New.
	(Photo.Photo): Made the two constructors use each other to
	avoid duplicated code.  Also, create the default "Original" version.
	(PhotoStore.ctor): Create the "photo_versions" table.
	(PhotoStore.Get): Get the versions from the database.
	(PhotoStore.Remove): Update the "photo_versions" table.
	(PhotoStore.Commit): Likewise.
	(Main): Added testing code for the versioning stuff.

	* src/ImageView.cs (ImageView.Pixbuf): Handle a null value.

2003-11-08  Ettore Perazzoli  <ettore@perazzoli.org>

	* MAINTAINERS: New.
	* Makefile.am (EXTRA_DIST): Add.

2003-11-08  Ettore Perazzoli  <ettore@perazzoli.org>

	* configure.in: Don't use gettext for now, we have no support for
	it anyhow.

